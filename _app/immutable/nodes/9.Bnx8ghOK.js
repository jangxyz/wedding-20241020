import"../chunks/disclose-version.Bg9kRutz.js";import{p as zt,A as Et,a as Bt,Z as Ns,i as me,B as Ht,a4 as Oe,e as hg,G as rt,F as En}from"../chunks/runtime.C0n2djTQ.js";import{o as O,p as R,a as Ee,t as Fe,r as M,E as Ko,$ as Zo,f as To,F as dg}from"../chunks/template.BXHdiYLZ.js";import{h as fg}from"../chunks/svelte-head.BMQkQFr9.js";import{s as yt,b as rn}from"../chunks/attributes.-pvQeO7p.js";import{p as ci,c as pg,b as mg,o as Ar,d as gg,i as xo,a as Ws}from"../chunks/index-client.CFqqgPjk.js";import{c as yg,g as vg}from"../chunks/_commonjsHelpers.Cpj98o6Y.js";import{s as Ue}from"../chunks/render.Bo655TCF.js";import{f as $c,j as _g,k as Js,l as er,g as La,r as wg,h as Ud,i as bg}from"../chunks/utils.BsSJCznB.js";import{i as qd}from"../chunks/lifecycle.BDw4vTLY.js";import{w as Eg}from"../chunks/index.D1ImXhcw.js";import{d as ys,e as Io}from"../chunks/events.BBpaa9N7.js";import{b as Co}from"../chunks/this.B-ETQvcb.js";import{s as Tg}from"../chunks/snippet.0rr2GiOx.js";import{a as xg,b as Ig,c as Cg,d as kg,e as Ag,f as Rg,g as Sg}from"../chunks/public.CWYNeE22.js";import{m as $d,i as Pg,k as Dg}from"../chunks/navermap.EyrpMYFC.js";var Hd={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(yg,function(){return function(t){function i(r){if(s[r])return s[r].exports;var o=s[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}var s={};return i.m=t,i.c=s,i.p="dist/",i(0)}([function(t,i,s){function r(U){return U&&U.__esModule?U:{default:U}}var o=Object.assign||function(U){for(var ie=1;ie<arguments.length;ie++){var Re=arguments[ie];for(var Ie in Re)Object.prototype.hasOwnProperty.call(Re,Ie)&&(U[Ie]=Re[Ie])}return U},c=s(1),l=(r(c),s(6)),u=r(l),d=s(7),p=r(d),m=s(8),g=r(m),x=s(9),E=r(x),k=s(10),S=r(k),D=s(11),F=r(D),V=s(14),L=r(V),N=[],C=!1,v={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},w=function(){var U=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(U&&(C=!0),C)return N=(0,F.default)(N,v),(0,S.default)(N,v.once),N},I=function(){N=(0,L.default)(),w()},b=function(){N.forEach(function(U,ie){U.node.removeAttribute("data-aos"),U.node.removeAttribute("data-aos-easing"),U.node.removeAttribute("data-aos-duration"),U.node.removeAttribute("data-aos-delay")})},T=function(U){return U===!0||U==="mobile"&&E.default.mobile()||U==="phone"&&E.default.phone()||U==="tablet"&&E.default.tablet()||typeof U=="function"&&U()===!0},_=function(U){v=o(v,U),N=(0,L.default)();var ie=document.all&&!window.atob;return T(v.disable)||ie?b():(v.disableMutationObserver||g.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),v.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",v.easing),document.querySelector("body").setAttribute("data-aos-duration",v.duration),document.querySelector("body").setAttribute("data-aos-delay",v.delay),v.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?w(!0):v.startEvent==="load"?window.addEventListener(v.startEvent,function(){w(!0)}):document.addEventListener(v.startEvent,function(){w(!0)}),window.addEventListener("resize",(0,p.default)(w,v.debounceDelay,!0)),window.addEventListener("orientationchange",(0,p.default)(w,v.debounceDelay,!0)),window.addEventListener("scroll",(0,u.default)(function(){(0,S.default)(N,v.once)},v.throttleDelay)),v.disableMutationObserver||g.default.ready("[data-aos]",I),N)};t.exports={init:_,refresh:w,refreshHard:I}},function(t,i){},,,,,function(t,i){(function(s){function r(T,_,U){function ie(ue){var Be=Ge,Ut=et;return Ge=et=void 0,xt=ue,Ce=T.apply(Ut,Be)}function Re(ue){return xt=ue,Se=setTimeout(He,_),It?ie(ue):Ce}function Ie(ue){var Be=ue-ft,Ut=ue-xt,Lr=_-Be;return Ct?I(Lr,Dt-Ut):Lr}function $e(ue){var Be=ue-ft,Ut=ue-xt;return ft===void 0||Be>=_||Be<0||Ct&&Ut>=Dt}function He(){var ue=b();return $e(ue)?Tt(ue):void(Se=setTimeout(He,Ie(ue)))}function Tt(ue){return Se=void 0,ge&&Ge?ie(ue):(Ge=et=void 0,Ce)}function sn(){Se!==void 0&&clearTimeout(Se),xt=0,Ge=ft=et=Se=void 0}function We(){return Se===void 0?Ce:Tt(b())}function pe(){var ue=b(),Be=$e(ue);if(Ge=arguments,et=this,ft=ue,Be){if(Se===void 0)return Re(ft);if(Ct)return Se=setTimeout(He,_),ie(ft)}return Se===void 0&&(Se=setTimeout(He,_)),Ce}var Ge,et,Dt,Ce,Se,ft,xt=0,It=!1,Ct=!1,ge=!0;if(typeof T!="function")throw new TypeError(m);return _=d(_)||0,c(U)&&(It=!!U.leading,Ct="maxWait"in U,Dt=Ct?w(d(U.maxWait)||0,_):Dt,ge="trailing"in U?!!U.trailing:ge),pe.cancel=sn,pe.flush=We,pe}function o(T,_,U){var ie=!0,Re=!0;if(typeof T!="function")throw new TypeError(m);return c(U)&&(ie="leading"in U?!!U.leading:ie,Re="trailing"in U?!!U.trailing:Re),r(T,_,{leading:ie,maxWait:_,trailing:Re})}function c(T){var _=typeof T>"u"?"undefined":p(T);return!!T&&(_=="object"||_=="function")}function l(T){return!!T&&(typeof T>"u"?"undefined":p(T))=="object"}function u(T){return(typeof T>"u"?"undefined":p(T))=="symbol"||l(T)&&v.call(T)==x}function d(T){if(typeof T=="number")return T;if(u(T))return g;if(c(T)){var _=typeof T.valueOf=="function"?T.valueOf():T;T=c(_)?_+"":_}if(typeof T!="string")return T===0?T:+T;T=T.replace(E,"");var U=S.test(T);return U||D.test(T)?F(T.slice(2),U?2:8):k.test(T)?g:+T}var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},m="Expected a function",g=NaN,x="[object Symbol]",E=/^\s+|\s+$/g,k=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,D=/^0o[0-7]+$/i,F=parseInt,V=(typeof s>"u"?"undefined":p(s))=="object"&&s&&s.Object===Object&&s,L=(typeof self>"u"?"undefined":p(self))=="object"&&self&&self.Object===Object&&self,N=V||L||Function("return this")(),C=Object.prototype,v=C.toString,w=Math.max,I=Math.min,b=function(){return N.Date.now()};t.exports=o}).call(i,function(){return this}())},function(t,i){(function(s){function r(b,T,_){function U(ge){var ue=pe,Be=Ge;return pe=Ge=void 0,ft=ge,Dt=b.apply(Be,ue)}function ie(ge){return ft=ge,Ce=setTimeout($e,T),xt?U(ge):Dt}function Re(ge){var ue=ge-Se,Be=ge-ft,Ut=T-ue;return It?w(Ut,et-Be):Ut}function Ie(ge){var ue=ge-Se,Be=ge-ft;return Se===void 0||ue>=T||ue<0||It&&Be>=et}function $e(){var ge=I();return Ie(ge)?He(ge):void(Ce=setTimeout($e,Re(ge)))}function He(ge){return Ce=void 0,Ct&&pe?U(ge):(pe=Ge=void 0,Dt)}function Tt(){Ce!==void 0&&clearTimeout(Ce),ft=0,pe=Se=Ge=Ce=void 0}function sn(){return Ce===void 0?Dt:He(I())}function We(){var ge=I(),ue=Ie(ge);if(pe=arguments,Ge=this,Se=ge,ue){if(Ce===void 0)return ie(Se);if(It)return Ce=setTimeout($e,T),U(Se)}return Ce===void 0&&(Ce=setTimeout($e,T)),Dt}var pe,Ge,et,Dt,Ce,Se,ft=0,xt=!1,It=!1,Ct=!0;if(typeof b!="function")throw new TypeError(p);return T=u(T)||0,o(_)&&(xt=!!_.leading,It="maxWait"in _,et=It?v(u(_.maxWait)||0,T):et,Ct="trailing"in _?!!_.trailing:Ct),We.cancel=Tt,We.flush=sn,We}function o(b){var T=typeof b>"u"?"undefined":d(b);return!!b&&(T=="object"||T=="function")}function c(b){return!!b&&(typeof b>"u"?"undefined":d(b))=="object"}function l(b){return(typeof b>"u"?"undefined":d(b))=="symbol"||c(b)&&C.call(b)==g}function u(b){if(typeof b=="number")return b;if(l(b))return m;if(o(b)){var T=typeof b.valueOf=="function"?b.valueOf():b;b=o(T)?T+"":T}if(typeof b!="string")return b===0?b:+b;b=b.replace(x,"");var _=k.test(b);return _||S.test(b)?D(b.slice(2),_?2:8):E.test(b)?m:+b}var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},p="Expected a function",m=NaN,g="[object Symbol]",x=/^\s+|\s+$/g,E=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,S=/^0o[0-7]+$/i,D=parseInt,F=(typeof s>"u"?"undefined":d(s))=="object"&&s&&s.Object===Object&&s,V=(typeof self>"u"?"undefined":d(self))=="object"&&self&&self.Object===Object&&self,L=F||V||Function("return this")(),N=Object.prototype,C=N.toString,v=Math.max,w=Math.min,I=function(){return L.Date.now()};t.exports=r}).call(i,function(){return this}())},function(t,i){function s(d){var p=void 0,m=void 0;for(p=0;p<d.length;p+=1)if(m=d[p],m.dataset&&m.dataset.aos||m.children&&s(m.children))return!0;return!1}function r(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function o(){return!!r()}function c(d,p){var m=window.document,g=r(),x=new g(l);u=p,x.observe(m.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function l(d){d&&d.forEach(function(p){var m=Array.prototype.slice.call(p.addedNodes),g=Array.prototype.slice.call(p.removedNodes),x=m.concat(g);if(s(x))return u()})}Object.defineProperty(i,"__esModule",{value:!0});var u=function(){};i.default={isSupported:o,ready:c}},function(t,i){function s(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function r(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function m(g,x){for(var E=0;E<x.length;E++){var k=x[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(g,k.key,k)}}return function(g,x,E){return x&&m(g.prototype,x),E&&m(g,E),g}}(),c=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,l=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,u=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,d=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,p=function(){function m(){s(this,m)}return o(m,[{key:"phone",value:function(){var g=r();return!(!c.test(g)&&!l.test(g.substr(0,4)))}},{key:"mobile",value:function(){var g=r();return!(!u.test(g)&&!d.test(g.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),m}();i.default=new p},function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var s=function(o,c,l){var u=o.node.getAttribute("data-aos-once");c>o.position?o.node.classList.add("aos-animate"):typeof u<"u"&&(u==="false"||!l&&u!=="true")&&o.node.classList.remove("aos-animate")},r=function(o,c){var l=window.pageYOffset,u=window.innerHeight;o.forEach(function(d,p){s(d,u+l,c)})};i.default=r},function(t,i,s){function r(u){return u&&u.__esModule?u:{default:u}}Object.defineProperty(i,"__esModule",{value:!0});var o=s(12),c=r(o),l=function(u,d){return u.forEach(function(p,m){p.node.classList.add("aos-init"),p.position=(0,c.default)(p.node,d.offset)}),u};i.default=l},function(t,i,s){function r(u){return u&&u.__esModule?u:{default:u}}Object.defineProperty(i,"__esModule",{value:!0});var o=s(13),c=r(o),l=function(u,d){var p=0,m=0,g=window.innerHeight,x={offset:u.getAttribute("data-aos-offset"),anchor:u.getAttribute("data-aos-anchor"),anchorPlacement:u.getAttribute("data-aos-anchor-placement")};switch(x.offset&&!isNaN(x.offset)&&(m=parseInt(x.offset)),x.anchor&&document.querySelectorAll(x.anchor)&&(u=document.querySelectorAll(x.anchor)[0]),p=(0,c.default)(u).top,x.anchorPlacement){case"top-bottom":break;case"center-bottom":p+=u.offsetHeight/2;break;case"bottom-bottom":p+=u.offsetHeight;break;case"top-center":p+=g/2;break;case"bottom-center":p+=g/2+u.offsetHeight;break;case"center-center":p+=g/2+u.offsetHeight/2;break;case"top-top":p+=g;break;case"bottom-top":p+=u.offsetHeight+g;break;case"center-top":p+=u.offsetHeight/2+g}return x.anchorPlacement||x.offset||isNaN(d)||(m=d),p+m};i.default=l},function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var s=function(r){for(var o=0,c=0;r&&!isNaN(r.offsetLeft)&&!isNaN(r.offsetTop);)o+=r.offsetLeft-(r.tagName!="BODY"?r.scrollLeft:0),c+=r.offsetTop-(r.tagName!="BODY"?r.scrollTop:0),r=r.offsetParent;return{top:c,left:o}};i.default=s},function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var s=function(r){return r=r||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(r,function(o){return{node:o}})};i.default=s}])})})(Hd);var Mg=Hd.exports;const Og=vg(Mg);var Vg=Fe('<div class="intro svelte-zusuhs"><div style="position: relative"><div><div><div class="image-container svelte-zusuhs"><div><img alt="첫화면" style="width: 100%" class="blur-effect"> <div class="image-placer svelte-zusuhs"></div></div></div></div> <div><div class="names svelte-zusuhs"><div class="groom svelte-zusuhs"> </div> <div class="separator svelte-zusuhs"></div> <div class="bride svelte-zusuhs"> </div></div> <div class="info svelte-zusuhs"><div class="text svelte-zusuhs"> </div> <div class="text svelte-zusuhs"> </div></div></div></div> <div class="border svelte-zusuhs"></div></div></div>');function Ng(n,e){zt(e,!0);var t=Vg(),i=O(t),s=O(i),r=O(s),o=O(r),c=O(o),l=O(c);R(R(l,!0)),M(c),M(o),M(r);var u=R(R(r,!0)),d=O(u),p=O(d),m=O(p);M(p);var g=R(R(p,!0)),x=R(R(g,!0)),E=O(x);M(x),M(d);var k=R(R(d,!0)),S=O(k),D=O(S);Et(()=>Ue(D,$c(e.dateTime,"yyyy.MM.dd. EE hh:mma").toUpperCase())),M(S);var F=R(R(S,!0)),V=O(F);M(F),M(k),M(u),M(s),R(R(s,!0)),M(i),M(t),Et(()=>{yt(l,"src",e.introImage.src),Ue(m,e.groom.fullName),Ue(E,e.bride.fullName),Ue(V,e.location)}),Ee(n,t),Bt()}const ui="generated",Lg="pointerdown",Fg="pointerup",dc="pointerleave",zg="pointerout",_i="pointermove",Bg="touchstart",Lu="touchend",jg="touchmove",Ug="touchcancel",qg="resize",$g="visibilitychange",Lt="tsParticles - Error",Vn=100,Fu=.5,ct=1e3;var Ze;(function(n){n.bottom="bottom",n.bottomLeft="bottom-left",n.bottomRight="bottom-right",n.left="left",n.none="none",n.right="right",n.top="top",n.topLeft="top-left",n.topRight="top-right",n.outside="outside",n.inside="inside"})(Ze||(Ze={}));function Wd(n){return typeof n=="boolean"}function Un(n){return typeof n=="string"}function qn(n){return typeof n=="number"}function $i(n){return typeof n=="object"&&n!==null}function yn(n){return Array.isArray(n)}const an={x:0,y:0,z:0},zu=2,Hg=1;class At{constructor(e,t,i){if(this._updateFromAngle=(s,r)=>{this.x=Math.cos(s)*r,this.y=Math.sin(s)*r},!qn(e)&&e){this.x=e.x,this.y=e.y;const s=e;this.z=s.z?s.z:an.z}else if(e!==void 0&&t!==void 0)this.x=e,this.y=t,this.z=i??an.z;else throw new Error(`${Lt} Vector3d not initialized correctly`)}static get origin(){return At.create(an.x,an.y,an.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return At.create(e.x,e.y,e.z)}static create(e,t,i){return new At(e,t,i)}add(e){return At.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return At.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return At.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**zu+this.y**zu}mult(e){return At.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=0&&this.multTo(Hg/e)}rotate(e){return At.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),an.z)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:an.z}sub(e){return At.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class qe extends At{constructor(e,t){super(e,t,an.z)}static get origin(){return qe.create(an.x,an.y)}static clone(e){return qe.create(e.x,e.y)}static create(e,t){return new qe(e,t)}}let Wg=Math.random;const Gd={nextFrame:n=>requestAnimationFrame(n),cancel:n=>cancelAnimationFrame(n)},fc=new Map,Gg=2,Kg=Math.PI*Gg;function Fa(n,e){fc.get(n)||fc.set(n,e)}function Kd(n){return fc.get(n)??(e=>e)}function we(){return Ft(Wg(),0,1-Number.EPSILON)}function Zg(n){return Gd.nextFrame(n)}function Qg(n){Gd.cancel(n)}function Ft(n,e,t){return Math.min(Math.max(n,e),t)}function za(n,e,t,i){return Math.floor((n*t+e*i)/(t+i))}function Rt(n){const e=Wt(n),t=0;let i=Qo(n);return e===i&&(i=t),we()*(e-i)+i}function K(n){return qn(n)?n:Rt(n)}function Qo(n){return qn(n)?n:n.min}function Wt(n){return qn(n)?n:n.max}function fe(n,e){if(n===e||e===void 0&&qn(n))return n;const t=Qo(n),i=Wt(n);return e!==void 0?{min:Math.min(t,e),max:Math.max(i,e)}:fe(t,i)}function vt(n,e){const t=n.x-e.x,i=n.y-e.y,s=2;return{dx:t,dy:i,distance:Math.sqrt(t**s+i**s)}}function St(n,e){return vt(n,e).distance}function Ln(n){return n*Math.PI/180}function Xg(n,e,t){if(qn(n))return Ln(n);const i=0,s=.5,r=.25,o=s+r;switch(n){case Ze.top:return-Math.PI*s;case Ze.topRight:return-Math.PI*r;case Ze.right:return i;case Ze.bottomRight:return Math.PI*r;case Ze.bottom:return Math.PI*s;case Ze.bottomLeft:return Math.PI*o;case Ze.left:return Math.PI;case Ze.topLeft:return-Math.PI*o;case Ze.inside:return Math.atan2(t.y-e.y,t.x-e.x);case Ze.outside:return Math.atan2(e.y-t.y,e.x-t.x);default:return we()*Kg}}function Yg(n){const e=qe.origin;return e.length=1,e.angle=n,e}function Bu(n,e,t,i){return qe.create(n.x*(t-i)/(t+i)+e.x*2*i/(t+i),n.y)}function Jg(n){var e,t;return{x:((e=n.position)==null?void 0:e.x)??we()*n.size.width,y:((t=n.position)==null?void 0:t.y)??we()*n.size.height}}function Zd(n){return n?n.endsWith("%")?parseFloat(n)/Vn:parseFloat(n):1}var hi;(function(n){n.auto="auto",n.increase="increase",n.decrease="decrease",n.random="random"})(hi||(hi={}));var Ve;(function(n){n.increasing="increasing",n.decreasing="decreasing"})(Ve||(Ve={}));var wi;(function(n){n.none="none",n.max="max",n.min="min"})(wi||(wi={}));var re;(function(n){n.bottom="bottom",n.left="left",n.right="right",n.top="top"})(re||(re={}));var ts;(function(n){n.precise="precise",n.percent="percent"})(ts||(ts={}));var Ki;(function(n){n.max="max",n.min="min",n.random="random"})(Ki||(Ki={}));const ey={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function bi(){return ey}function ju(n){const e={bounced:!1},{pSide:t,pOtherSide:i,rectSide:s,rectOtherSide:r,velocity:o,factor:c}=n,l=.5,u=0;return i.min<r.min||i.min>r.max||i.max<r.min||i.max>r.max||(t.max>=s.min&&t.max<=(s.max+s.min)*l&&o>u||t.min<=s.max&&t.min>(s.max+s.min)*l&&o<u)&&(e.velocity=o*-c,e.bounced=!0),e}function ty(n,e){const t=jt(e,i=>n.matches(i));return yn(t)?t.some(i=>i):t}function Ei(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function ny(){return!Ei()&&typeof matchMedia<"u"}function Qd(n){if(ny())return matchMedia(n)}function iy(n){if(!(Ei()||typeof IntersectionObserver>"u"))return new IntersectionObserver(n)}function sy(n){if(!(Ei()||typeof MutationObserver>"u"))return new MutationObserver(n)}function De(n,e){return n===e||yn(e)&&e.indexOf(n)>-1}async function Uu(n,e){try{await document.fonts.load(`${e??"400"} 36px '${n??"Verdana"}'`)}catch{}}function ry(n){return Math.floor(we()*n.length)}function Xo(n,e,t=!0){return n[e!==void 0&&t?e%n.length:ry(n)]}function Hc(n,e,t,i,s){return oy(Rr(n,i??0),e,t,s)}function oy(n,e,t,i){let s=!0;return(!i||i===re.bottom)&&(s=n.top<e.height+t.x),s&&(!i||i===re.left)&&(s=n.right>t.x),s&&(!i||i===re.right)&&(s=n.left<e.width+t.y),s&&(!i||i===re.top)&&(s=n.bottom>t.y),s}function Rr(n,e){return{bottom:n.y+e,left:n.x-e,right:n.x+e,top:n.y-e}}function ut(n,...e){for(const t of e){if(t==null)continue;if(!$i(t)){n=t;continue}const i=Array.isArray(t);i&&($i(n)||!n||!Array.isArray(n))?n=[]:!i&&($i(n)||!n||Array.isArray(n))&&(n={});for(const s in t){if(s==="__proto__")continue;const r=t,o=r[s],c=n;c[s]=$i(o)&&Array.isArray(o)?o.map(l=>ut(c[s],l)):ut(c[s],o)}}return n}function Wc(n,e){return!!Jd(e,t=>t.enable&&De(n,t.mode))}function Gc(n,e,t){jt(e,i=>{const s=i.mode;i.enable&&De(n,s)&&ay(i,t)})}function ay(n,e){const t=n.selectors;jt(t,i=>{e(i,n)})}function Xd(n,e){if(!(!e||!n))return Jd(n,t=>ty(e,t.selectors))}function pc(n){return{position:n.getPosition(),radius:n.getRadius(),mass:n.getMass(),velocity:n.velocity,factor:qe.create(K(n.options.bounce.horizontal.value),K(n.options.bounce.vertical.value))}}function Yd(n,e){const{x:t,y:i}=n.velocity.sub(e.velocity),[s,r]=[n.position,e.position],{dx:o,dy:c}=vt(r,s);if(t*o+i*c<0)return;const u=-Math.atan2(c,o),d=n.mass,p=e.mass,m=n.velocity.rotate(u),g=e.velocity.rotate(u),x=Bu(m,g,d,p),E=Bu(g,m,d,p),k=x.rotate(-u),S=E.rotate(-u);n.velocity.x=k.x*n.factor.x,n.velocity.y=k.y*n.factor.y,e.velocity.x=S.x*e.factor.x,e.velocity.y=S.y*e.factor.y}function cy(n,e){const t=n.getPosition(),i=n.getRadius(),s=Rr(t,i),r=n.options.bounce,o=ju({pSide:{min:s.left,max:s.right},pOtherSide:{min:s.top,max:s.bottom},rectSide:{min:e.left,max:e.right},rectOtherSide:{min:e.top,max:e.bottom},velocity:n.velocity.x,factor:K(r.horizontal.value)});o.bounced&&(o.velocity!==void 0&&(n.velocity.x=o.velocity),o.position!==void 0&&(n.position.x=o.position));const c=ju({pSide:{min:s.top,max:s.bottom},pOtherSide:{min:s.left,max:s.right},rectSide:{min:e.top,max:e.bottom},rectOtherSide:{min:e.left,max:e.right},velocity:n.velocity.y,factor:K(r.vertical.value)});c.bounced&&(c.velocity!==void 0&&(n.velocity.y=c.velocity),c.position!==void 0&&(n.position.y=c.position))}function jt(n,e){return yn(n)?n.map((i,s)=>e(i,s)):e(n,0)}function Gt(n,e,t){return yn(n)?Xo(n,e,t):n}function Jd(n,e){return yn(n)?n.find((i,s)=>e(i,s)):e(n,0)?n:void 0}function ef(n,e){const t=n.value,i=n.animation,s={delayTime:K(i.delay)*ct,enable:i.enable,value:K(n.value)*e,max:Wt(t)*e,min:Qo(t)*e,loops:0,maxLoops:K(i.count),time:0},r=1;if(i.enable){switch(s.decay=r-K(i.decay),i.mode){case hi.increase:s.status=Ve.increasing;break;case hi.decrease:s.status=Ve.decreasing;break;case hi.random:s.status=we()>=Fu?Ve.increasing:Ve.decreasing;break}const o=i.mode===hi.auto;switch(i.startValue){case Ki.min:s.value=s.min,o&&(s.status=Ve.increasing);break;case Ki.max:s.value=s.max,o&&(s.status=Ve.decreasing);break;case Ki.random:default:s.value=Rt(s),o&&(s.status=we()>=Fu?Ve.increasing:Ve.decreasing);break}}return s.initialValue=s.value,s}function ly(n,e){if(!(n.mode===ts.percent)){const{mode:s,...r}=n;return r}return"x"in n?{x:n.x/Vn*e.width,y:n.y/Vn*e.height}:{width:n.width/Vn*e.width,height:n.height/Vn*e.height}}function tf(n,e){return ly(n,e)}function uy(n,e,t,i,s){switch(e){case wi.max:t>=s&&n.destroy();break;case wi.min:t<=i&&n.destroy();break}}function Kc(n,e,t,i,s){if(n.destroyed||!e||!e.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0))return;const d=(e.velocity??0)*s.factor,p=e.min,m=e.max,g=e.decay??1;if(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=s.value),!((e.delayTime??0)>0&&e.time<(e.delayTime??0))){switch(e.status){case Ve.increasing:e.value>=m?(t?e.status=Ve.decreasing:e.value-=m,e.loops||(e.loops=0),e.loops++):e.value+=d;break;case Ve.decreasing:e.value<=p?(t?e.status=Ve.increasing:e.value+=m,e.loops||(e.loops=0),e.loops++):e.value-=d}e.velocity&&g!==1&&(e.velocity*=g),uy(n,i,e.value,p,m),n.destroyed||(e.value=Ft(e.value,p,m))}}var mc;(function(n){n.darken="darken",n.enlighten="enlighten"})(mc||(mc={}));var li;(function(n){n[n.r=1]="r",n[n.g=2]="g",n[n.b=3]="b",n[n.a=4]="a"})(li||(li={}));const ko="random",go="mid",Yo=new Map;function qu(n){Yo.set(n.key,n)}function hy(n){for(const[,l]of Yo)if(n.startsWith(l.stringPrefix))return l.parseString(n);const e=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,t=n.replace(e,(l,u,d,p,m)=>u+u+d+d+p+p+(m!==void 0?m+m:"")),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,s=i.exec(t),r=16;return s?{a:s[li.a]!==void 0?parseInt(s[li.a],r)/255:1,b:parseInt(s[li.b],r),g:parseInt(s[li.g],r),r:parseInt(s[li.r],r)}:void 0}function Xt(n,e,t=!0){if(!n)return;const i=Un(n)?{value:n}:n;if(Un(i.value))return nf(i.value,e,t);if(yn(i.value))return Xt({value:Xo(i.value,e,t)});for(const[,s]of Yo){const r=s.handleRangeColor(i);if(r)return r}}function nf(n,e,t=!0){if(!n)return;const i=Un(n)?{value:n}:n;if(Un(i.value))return i.value===ko?rf():dy(i.value);if(yn(i.value))return nf({value:Xo(i.value,e,t)});for(const[,s]of Yo){const r=s.handleColor(i);if(r)return r}}function tr(n,e,t=!0){const i=Xt(n,e,t);return i?sf(i):void 0}function sf(n){const d=n.r/255,p=n.g/255,m=n.b/255,g=Math.max(d,p,m),x=Math.min(d,p,m),E={h:0,l:(g+x)*.5,s:0};return g!==x&&(E.s=E.l<.5?(g-x)/(g+x):(g-x)/(2-g-x),E.h=d===g?(p-m)/(g-x):E.h=p===g?2+(m-d)/(g-x):2*2+(d-p)/(g-x)),E.l*=100,E.s*=100,E.h*=60,E.h<0&&(E.h+=360),E.h>=360&&(E.h-=360),E}function dy(n){return hy(n)}function ns(n){const o=(n.h%360+360)%360,c=Math.max(0,Math.min(100,n.s)),l=Math.max(0,Math.min(100,n.l)),u=o/360,d=c/100,p=l/100,m=255,g=3;if(c===0){const w=Math.round(p*m);return{r:w,g:w,b:w}}const x=.5,E=2,k=(w,I,b)=>{if(b<0&&b++,b>1&&b--,b*6<1)return w+(I-w)*6*b;if(b*E<1)return I;if(b*g<1*E){const ie=E/g;return w+(I-w)*(ie-b)*6}return w},S=1,D=p<x?p*(S+d):p+d-p*d,F=E*p-D,V=1,L=V/g,N=Math.min(m,m*k(F,D,u+L)),C=Math.min(m,m*k(F,D,u)),v=Math.min(m,m*k(F,D,u-L));return{r:Math.round(N),g:Math.round(C),b:Math.round(v)}}function fy(n){const e=ns(n);return{a:n.a,b:e.b,g:e.g,r:e.r}}function rf(n){return{b:Math.floor(Rt(fe(0,256))),g:Math.floor(Rt(fe(0,256))),r:Math.floor(Rt(fe(0,256)))}}function xn(n,e){return`rgba(${n.r}, ${n.g}, ${n.b}, ${e??1})`}function nr(n,e){return`hsla(${n.h}, ${n.s}%, ${n.l}%, ${e??1})`}function Zc(n,e,t,i){let s=n,r=e;return s.r===void 0&&(s=ns(n)),r.r===void 0&&(r=ns(e)),{b:za(s.b,r.b,t,i),g:za(s.g,r.g,t,i),r:za(s.r,r.r,t,i)}}function gc(n,e,t){if(t===ko)return rf();if(t===go){const i=n.getFillColor()??n.getStrokeColor(),s=(e==null?void 0:e.getFillColor())??(e==null?void 0:e.getStrokeColor());if(i&&s&&e)return Zc(i,s,n.getRadius(),e.getRadius());{const r=i??s;if(r)return ns(r)}}else return t}function of(n,e,t){const i=Un(n)?n:n.value;return i===ko?t?Xt({value:i}):e?ko:go:i===go?go:Xt({value:i})}function $u(n){return n!==void 0?{h:n.h.value,s:n.s.value,l:n.l.value}:void 0}function af(n,e,t){const i={h:{enable:!1,value:n.h},s:{enable:!1,value:n.s},l:{enable:!1,value:n.l}};return e&&(Ba(i.h,e.h,t),Ba(i.s,e.s,t),Ba(i.l,e.l,t)),i}function Ba(n,e,t){n.enable=e.enable;const i=0,s=1,r=0,o=0;n.enable?(n.velocity=K(e.speed)/Vn*t,n.decay=s-K(e.decay),n.status=Ve.increasing,n.loops=r,n.maxLoops=K(e.count),n.time=o,n.delayTime=K(e.delay)*ct,e.sync||(n.velocity*=we(),n.value*=we()),n.initialValue=n.value,n.offset=fe(e.offset)):n.velocity=i}function ja(n,e,t,i){if(!n||!n.enable||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0)||(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=i.value),(n.delayTime??0)>0&&n.time<(n.delayTime??0)))return;const d=n.offset?Rt(n.offset):0,p=(n.velocity??0)*i.factor+d*3.6,m=n.decay??1,g=Wt(e),x=Qo(e);!t||n.status===Ve.increasing?(n.value+=p,n.value>g&&(n.loops||(n.loops=0),n.loops++,t?n.status=Ve.decreasing:n.value-=g)):(n.value-=p,n.value<0&&(n.loops||(n.loops=0),n.loops++,n.status=Ve.increasing)),n.velocity&&m!==1&&(n.velocity*=m),n.value=Ft(n.value,x,g)}function cf(n,e){if(!n)return;const{h:t,s:i,l:s}=n,r={h:{min:0,max:360},s:{min:0,max:100},l:{min:0,max:100}};t&&ja(t,r.h,!1,e),i&&ja(i,r.s,!0,e),s&&ja(s,r.l,!0,e)}const is={x:0,y:0},Jr={a:1,b:0,c:0,d:1};function Gs(n,e,t){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.closePath()}function py(n,e,t){n.fillStyle=t??"rgba(0,0,0,0)",n.fillRect(is.x,is.y,e.width,e.height)}function my(n,e,t,i){t&&(n.globalAlpha=i,n.drawImage(t,is.x,is.y,e.width,e.height),n.globalAlpha=1)}function Ua(n,e){n.clearRect(is.x,is.y,e.width,e.height)}function gy(n){const{container:e,context:t,particle:i,delta:s,colorStyles:r,backgroundMask:o,composite:c,radius:l,opacity:u,shadow:d,transform:p}=n,m=i.getPosition(),g=0,x=i.rotation+(i.pathRotation?i.velocity.angle:g),E={sin:Math.sin(x),cos:Math.cos(x)},k=!!x,S=1,D={a:E.cos*(p.a??Jr.a),b:k?E.sin*(p.b??S):p.b??Jr.b,c:k?-E.sin*(p.c??S):p.c??Jr.c,d:E.cos*(p.d??Jr.d)};t.setTransform(D.a,D.b,D.c,D.d,m.x,m.y),o&&(t.globalCompositeOperation=c);const F=i.shadowColor;d.enable&&F&&(t.shadowBlur=d.blur,t.shadowColor=xn(F),t.shadowOffsetX=d.offset.x,t.shadowOffsetY=d.offset.y),r.fill&&(t.fillStyle=r.fill);const V=0,L=i.strokeWidth??V;t.lineWidth=L,r.stroke&&(t.strokeStyle=r.stroke);const N={container:e,context:t,particle:i,radius:l,opacity:u,delta:s,transformData:D,strokeWidth:L};vy(N),_y(N),yy(N),t.globalCompositeOperation="source-over",t.resetTransform()}function yy(n){const{container:e,context:t,particle:i,radius:s,opacity:r,delta:o,transformData:c}=n;if(!i.effect)return;const l=e.effectDrawers.get(i.effect);l&&l.draw({context:t,particle:i,radius:s,opacity:r,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...c}})}function vy(n){const{container:e,context:t,particle:i,radius:s,opacity:r,delta:o,strokeWidth:c,transformData:l}=n,u=0;if(!i.shape)return;const d=e.shapeDrawers.get(i.shape);d&&(t.beginPath(),d.draw({context:t,particle:i,radius:s,opacity:r,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...l}}),i.shapeClose&&t.closePath(),c>u&&t.stroke(),i.shapeFill&&t.fill())}function _y(n){const{container:e,context:t,particle:i,radius:s,opacity:r,delta:o,transformData:c}=n;if(!i.shape)return;const l=e.shapeDrawers.get(i.shape);l!=null&&l.afterDraw&&l.afterDraw({context:t,particle:i,radius:s,opacity:r,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...c}})}function wy(n,e,t){e.draw&&e.draw(n,t)}function by(n,e,t,i){e.drawParticle&&e.drawParticle(n,t,i)}function Ey(n,e,t){return{h:n.h,s:n.s,l:n.l+(e===mc.darken?-1:1)*t}}function Ty(n,e,t){const i=e[t],s=1;i!==void 0&&(n[t]=(n[t]??s)*i)}function Hu(n,e,t=!1){if(!e)return;const i=n;if(!i)return;const s=i.style;if(s)for(const r in e){const o=e[r];o&&s.setProperty(r,o,t?"important":"")}}class xy{constructor(e){this.container=e,this._applyPostDrawUpdaters=t=>{var i;for(const s of this._postDrawUpdaters)(i=s.afterDraw)==null||i.call(s,t)},this._applyPreDrawUpdaters=(t,i,s,r,o,c)=>{var l;for(const u of this._preDrawUpdaters){if(u.getColorStyles){const{fill:d,stroke:p}=u.getColorStyles(i,t,s,r);d&&(o.fill=d),p&&(o.stroke=p)}if(u.getTransformValues){const d=u.getTransformValues(i);for(const p in d)Ty(c,d,p)}(l=u.beforeDraw)==null||l.call(u,i)}},this._applyResizePlugins=()=>{var t;for(const i of this._resizePlugins)(t=i.resize)==null||t.call(i)},this._getPluginParticleColors=t=>{let i,s;for(const r of this._colorPlugins)if(!i&&r.particleFillColor&&(i=tr(r.particleFillColor(t))),!s&&r.particleStrokeColor&&(s=tr(r.particleStrokeColor(t))),i&&s)break;return[i,s]},this._initCover=async()=>{const t=this.container.actualOptions,i=t.backgroundMask.cover,s=i.color;if(s){const r=Xt(s);if(r){const o={...r,a:i.opacity};this._coverColorStyle=xn(o,o.a)}}else await new Promise((r,o)=>{if(!i.image)return;const c=document.createElement("img");c.addEventListener("load",()=>{this._coverImage={image:c,opacity:i.opacity},r()}),c.addEventListener("error",l=>{o(l.error)}),c.src=i.image})},this._initStyle=()=>{const t=this.element,i=this.container.actualOptions;if(t){this._fullScreen?(this._originalStyle=ut({},t.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const s in i.style){if(!s||!i.style)continue;const r=i.style[s];r&&t.style.setProperty(s,r,"important")}}},this._initTrail=async()=>{const t=this.container.actualOptions,i=t.particles.move.trail,s=i.fill;if(!i.enable)return;const r=1,o=r/i.length;if(s.color){const c=Xt(s.color);if(!c)return;this._trailFill={color:{...c},opacity:o}}else await new Promise((c,l)=>{if(!s.image)return;const u=document.createElement("img");u.addEventListener("load",()=>{this._trailFill={image:u,opacity:o},c()}),u.addEventListener("error",d=>{l(d.error)}),u.src=s.image})},this._paintBase=t=>{this.draw(i=>py(i,this.size,t))},this._paintImage=(t,i)=>{this.draw(s=>my(s,this.size,t,i))},this._repairStyle=()=>{const t=this.element;t&&(this._safeMutationObserver(i=>i.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(i=>{!t||!(t instanceof Node)||i.observe(t,{attributes:!0})}))},this._resetOriginalStyle=()=>{const t=this.element,i=this._originalStyle;t&&i&&Hu(t,i)},this._safeMutationObserver=t=>{this._mutationObserver&&t(this._mutationObserver)},this._setFullScreenStyle=()=>{const t=this.element;if(!t)return;Hu(t,{position:"fixed",zIndex:this.container.actualOptions.fullScreen.zIndex.toString(10),top:"0",left:"0",width:"100%",height:"100%"},!0)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,t=e.particles.move.trail,i=this._trailFill;e.backgroundMask.enable?this.paint():t.enable&&t.length>0&&i?i.color?this._paintBase(xn(i.color,i.opacity)):i.image&&this._paintImage(i.image,i.opacity):e.clear&&this.draw(r=>{Ua(r,this.size)})}destroy(){if(this.stop(),this._generated){const e=this.element;e==null||e.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const t=this._context;if(t)return e(t)}drawAsync(e){const t=this._context;if(t)return e(t)}drawParticle(e,t){if(e.spawning||e.destroyed)return;const i=e.getRadius();if(i<=0)return;const r=e.getFillColor(),o=e.getStrokeColor()??r;let[c,l]=this._getPluginParticleColors(e);c||(c=r),l||(l=o),!(!c&&!l)&&this.draw(u=>{var C;const d=this.container,p=d.actualOptions,m=e.options.zIndex,g=1,x=g-e.zIndexFactor,E=x**m.opacityRate,k=1,S=e.bubble.opacity??((C=e.opacity)==null?void 0:C.value)??k,D=e.strokeOpacity??S,F=S*E,V=D*E,L={},N={fill:c?nr(c,F):void 0};N.stroke=l?nr(l,V):N.fill,this._applyPreDrawUpdaters(u,e,i,F,N,L),gy({container:d,context:u,particle:e,delta:t,colorStyles:N,backgroundMask:p.backgroundMask.enable,composite:p.backgroundMask.composite,radius:i*x**m.sizeRate,opacity:F,shadow:e.options.shadow,transform:L}),this._applyPostDrawUpdaters(e)})}drawParticlePlugin(e,t,i){this.draw(s=>by(s,e,t,i))}drawPlugin(e,t){this.draw(i=>wy(i,e,t))}async init(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=sy(e=>{for(const t of e)t.type==="attributes"&&t.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),await this._initCover();try{await this._initTrail()}catch(e){bi().error(e)}this.initBackground(),this._safeMutationObserver(e=>{!this.element||!(this.element instanceof Node)||e.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions,t=e.background,i=this.element;if(!i)return;const s=i.style;if(s){if(t.color){const r=Xt(t.color);s.backgroundColor=r?xn(r,t.opacity):""}else s.backgroundColor="";s.backgroundImage=t.image||"",s.backgroundPosition=t.position||"",s.backgroundRepeat=t.repeat||"",s.backgroundSize=t.size||""}}initPlugins(){this._resizePlugins=[];for(const[,e]of this.container.plugins)e.resize&&this._resizePlugins.push(e),(e.particleFillColor??e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles??e.getTransformValues??e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&ui in e.dataset?e.dataset[ui]==="true":this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=ut({},this.element.style),this.size.height=e.offsetHeight,this.size.width=e.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(t=>{!this.element||!(this.element instanceof Node)||t.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const e=this.container.actualOptions;this.draw(t=>{e.backgroundMask.enable&&e.backgroundMask.cover?(Ua(t,this.size),this._coverImage?this._paintImage(this._coverImage.image,this._coverImage.opacity):this._coverColorStyle?this._paintBase(this._coverColorStyle):this._paintBase()):this._paintBase()})}resize(){if(!this.element)return!1;const e=this.container,t=e.retina.pixelRatio,i=e.canvas.size,s={width:this.element.offsetWidth*t,height:this.element.offsetHeight*t};if(s.height===i.height&&s.width===i.width&&s.height===this.element.height&&s.width===this.element.width)return!1;const r={...i};return this.element.width=i.width=this.element.offsetWidth*t,this.element.height=i.height=this.element.offsetHeight*t,this.container.started&&e.particles.setResizeFactor({width:i.width/r.width,height:i.height/r.height}),!0}stop(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=void 0,this.draw(e=>Ua(e,this.size))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,t=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),t&&await e.refresh()}}var Zi;(function(n){n.canvas="canvas",n.parent="parent",n.window="window"})(Zi||(Zi={}));const Wu=2;function Mt(n,e,t,i,s){if(i){let r={passive:!0};Wd(s)?r.capture=s:s!==void 0&&(r=s),n.addEventListener(e,t,r)}else{const r=s;n.removeEventListener(e,t,r)}}class Iy{constructor(e){this.container=e,this._doMouseTouchClick=t=>{const i=this.container,s=i.actualOptions;if(this._canPush){const r=i.interactivity.mouse,o=r.position;if(!o)return;r.clickPosition={...o},r.clickTime=new Date().getTime();const c=s.interactivity.events.onClick;jt(c.mode,l=>this.container.handleClickMode(l))}t.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=t=>{const i=t,s=this.container,r=s.options,o=r.defaultThemes,c=i.matches?o.dark:o.light,l=r.themes.find(u=>u.name===c);l!=null&&l.default.auto&&s.loadTheme(c)},this._handleVisibilityChange=()=>{const t=this.container,i=t.actualOptions;this._mouseTouchFinish(),i.pauseOnBlur&&(document!=null&&document.hidden?(t.pageHidden=!0,t.pause()):(t.pageHidden=!1,t.animationStatus?t.play(!0):t.draw(!0)))},this._handleWindowResize=()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout);const t=async()=>{const i=this.container.canvas;await(i==null?void 0:i.windowResize())};this._resizeTimeout=setTimeout(()=>void t(),this.container.actualOptions.interactivity.events.resize.delay*ct)},this._manageInteractivityListeners=(t,i)=>{const s=this._handlers,r=this.container,o=r.actualOptions,c=r.interactivity.element;if(!c)return;const l=c,u=r.canvas.element;u&&(u.style.pointerEvents=l===u?"initial":"none"),(o.interactivity.events.onHover.enable||o.interactivity.events.onClick.enable)&&(Mt(c,_i,s.mouseMove,i),Mt(c,Bg,s.touchStart,i),Mt(c,jg,s.touchMove,i),o.interactivity.events.onClick.enable?(Mt(c,Lu,s.touchEndClick,i),Mt(c,Fg,s.mouseUp,i),Mt(c,Lg,s.mouseDown,i)):Mt(c,Lu,s.touchEnd,i),Mt(c,t,s.mouseLeave,i),Mt(c,Ug,s.touchCancel,i))},this._manageListeners=t=>{const i=this._handlers,s=this.container,r=s.actualOptions,o=r.interactivity.detectsOn,c=s.canvas.element;let l=dc;o===Zi.window?(s.interactivity.element=window,l=zg):o===Zi.parent&&c?s.interactivity.element=c.parentElement??c.parentNode:s.interactivity.element=c,this._manageMediaMatch(t),this._manageResize(t),this._manageInteractivityListeners(l,t),document&&Mt(document,$g,i.visibilityChange,t,!1)},this._manageMediaMatch=t=>{const i=this._handlers,s=Qd("(prefers-color-scheme: dark)");if(s){if(s.addEventListener!==void 0){Mt(s,"change",i.themeChange,t);return}s.addListener!==void 0&&(t?s.addListener(i.oldThemeChange):s.removeListener(i.oldThemeChange))}},this._manageResize=t=>{const i=this._handlers,s=this.container;if(!s.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){Mt(window,qg,i.resize,t);return}const o=s.canvas.element;this._resizeObserver&&!t?(o&&this._resizeObserver.unobserve(o),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&t&&o&&(this._resizeObserver=new ResizeObserver(c=>{c.find(u=>u.target===o)&&this._handleWindowResize()}),this._resizeObserver.observe(o))},this._mouseDown=()=>{const{interactivity:t}=this.container;if(!t)return;const{mouse:i}=t;i.clicking=!0,i.downPosition=i.position},this._mouseTouchClick=t=>{const i=this.container,s=i.actualOptions,{mouse:r}=i.interactivity;r.inside=!0;let o=!1;const c=r.position;if(!(!c||!s.interactivity.events.onClick.enable)){for(const[,l]of i.plugins)if(l.clickPositionValid&&(o=l.clickPositionValid(c),o))break;o||this._doMouseTouchClick(t),r.clicking=!1}},this._mouseTouchFinish=()=>{const t=this.container.interactivity;if(!t)return;const i=t.mouse;delete i.position,delete i.clickPosition,delete i.downPosition,t.status=dc,i.inside=!1,i.clicking=!1},this._mouseTouchMove=t=>{const i=this.container,s=i.actualOptions,r=i.interactivity,o=i.canvas.element;if(!(r!=null&&r.element))return;r.mouse.inside=!0;let c;if(t.type.startsWith("pointer")){this._canPush=!0;const u=t;if(r.element===window){if(o){const d=o.getBoundingClientRect();c={x:u.clientX-d.left,y:u.clientY-d.top}}}else if(s.interactivity.detectsOn===Zi.parent){const d=u.target,p=u.currentTarget;if(d&&p&&o){const m=d.getBoundingClientRect(),g=p.getBoundingClientRect(),x=o.getBoundingClientRect();c={x:u.offsetX+Wu*m.left-(g.left+x.left),y:u.offsetY+Wu*m.top-(g.top+x.top)}}else c={x:u.offsetX??u.clientX,y:u.offsetY??u.clientY}}else u.target===o&&(c={x:u.offsetX??u.clientX,y:u.offsetY??u.clientY})}else if(this._canPush=t.type!=="touchmove",o){const u=t,d=1,p=u.touches[u.touches.length-d],m=o.getBoundingClientRect(),g=0;c={x:p.clientX-(m.left??g),y:p.clientY-(m.top??g)}}const l=i.retina.pixelRatio;c&&(c.x*=l,c.y*=l),r.mouse.position=c,r.status=_i},this._touchEnd=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchFinish()},this._touchEndClick=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchClick(t)},this._touchStart=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.set(r.identifier,performance.now());this._mouseTouchMove(t)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:t=>this._mouseTouchMove(t),mouseUp:t=>this._mouseTouchClick(t),touchStart:t=>this._touchStart(t),touchMove:t=>this._mouseTouchMove(t),touchEnd:t=>this._touchEnd(t),touchCancel:t=>this._touchEnd(t),touchEndClick:t=>this._touchEndClick(t),visibilityChange:()=>this._handleVisibilityChange(),themeChange:t=>this._handleThemeChange(t),oldThemeChange:t=>this._handleThemeChange(t),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}var gt;(function(n){n.configAdded="configAdded",n.containerInit="containerInit",n.particlesSetup="particlesSetup",n.containerStarted="containerStarted",n.containerStopped="containerStopped",n.containerDestroyed="containerDestroyed",n.containerPaused="containerPaused",n.containerPlay="containerPlay",n.containerBuilt="containerBuilt",n.particleAdded="particleAdded",n.particleDestroyed="particleDestroyed",n.particleRemoved="particleRemoved"})(gt||(gt={}));class ht{constructor(){this.value=""}static create(e,t){const i=new ht;return i.load(e),t!==void 0&&(Un(t)||yn(t)?i.load({value:t}):i.load(t)),i}load(e){(e==null?void 0:e.value)!==void 0&&(this.value=e.value)}}class Cy{constructor(){this.color=new ht,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=ht.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.position!==void 0&&(this.position=e.position),e.repeat!==void 0&&(this.repeat=e.repeat),e.size!==void 0&&(this.size=e.size),e.opacity!==void 0&&(this.opacity=e.opacity))}}class ky{constructor(){this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=ht.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Ay{constructor(){this.composite="destination-out",this.cover=new ky,this.enable=!1}load(e){if(e){if(e.composite!==void 0&&(this.composite=e.composite),e.cover!==void 0){const t=e.cover,i=Un(e.cover)?{color:e.cover}:e.cover;this.cover.load(t.color!==void 0||t.image!==void 0?t:{color:i})}e.enable!==void 0&&(this.enable=e.enable)}}}class Ry{constructor(){this.enable=!0,this.zIndex=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.zIndex!==void 0&&(this.zIndex=e.zIndex))}}class Sy{constructor(){this.enable=!1,this.mode=[]}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode))}}var ss;(function(n){n.circle="circle",n.rectangle="rectangle"})(ss||(ss={}));class Gu{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type=ss.circle}load(e){e&&(e.selectors!==void 0&&(this.selectors=e.selectors),e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),e.type!==void 0&&(this.type=e.type))}}class Py{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.force!==void 0&&(this.force=e.force),e.smooth!==void 0&&(this.smooth=e.smooth))}}class Dy{constructor(){this.enable=!1,this.mode=[],this.parallax=new Py}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class My{constructor(){this.delay=.5,this.enable=!0}load(e){e!==void 0&&(e.delay!==void 0&&(this.delay=e.delay),e.enable!==void 0&&(this.enable=e.enable))}}class Oy{constructor(){this.onClick=new Sy,this.onDiv=new Gu,this.onHover=new Dy,this.resize=new My}load(e){if(!e)return;this.onClick.load(e.onClick);const t=e.onDiv;t!==void 0&&(this.onDiv=jt(t,i=>{const s=new Gu;return s.load(i),s})),this.onHover.load(e.onHover),this.resize.load(e.resize)}}class Vy{constructor(e,t){this._engine=e,this._container=t}load(e){if(!e||!this._container)return;const t=this._engine.interactors.get(this._container);if(t)for(const i of t)i.loadModeOptions&&i.loadModeOptions(this,e)}}class lf{constructor(e,t){this.detectsOn=Zi.window,this.events=new Oy,this.modes=new Vy(e,t)}load(e){if(!e)return;const t=e.detectsOn;t!==void 0&&(this.detectsOn=t),this.events.load(e.events),this.modes.load(e.modes)}}const Ku=50;class Ny{load(e){e&&(e.position&&(this.position={x:e.position.x??Ku,y:e.position.y??Ku,mode:e.position.mode??ts.percent}),e.options&&(this.options=ut({},e.options)))}}var di;(function(n){n.screen="screen",n.canvas="canvas"})(di||(di={}));class Ly{constructor(){this.maxWidth=1/0,this.options={},this.mode=di.canvas}load(e){e&&(e.maxWidth!==void 0&&(this.maxWidth=e.maxWidth),e.mode!==void 0&&(e.mode===di.screen?this.mode=di.screen:this.mode=di.canvas),e.options!==void 0&&(this.options=ut({},e.options)))}}var Mn;(function(n){n.any="any",n.dark="dark",n.light="light"})(Mn||(Mn={}));class Fy{constructor(){this.auto=!1,this.mode=Mn.any,this.value=!1}load(e){e&&(e.auto!==void 0&&(this.auto=e.auto),e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class zy{constructor(){this.name="",this.default=new Fy}load(e){e&&(e.name!==void 0&&(this.name=e.name),this.default.load(e.default),e.options!==void 0&&(this.options=ut({},e.options)))}}class Qc{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){e&&(e.count!==void 0&&(this.count=fe(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=fe(e.speed)),e.decay!==void 0&&(this.decay=fe(e.decay)),e.delay!==void 0&&(this.delay=fe(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class Xc extends Qc{constructor(){super(),this.mode=hi.auto,this.startValue=Ki.random}load(e){super.load(e),e&&(e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}}class qa extends Qc{constructor(){super(),this.offset=0,this.sync=!0}load(e){super.load(e),e&&e.offset!==void 0&&(this.offset=fe(e.offset))}}class By{constructor(){this.h=new qa,this.s=new qa,this.l=new qa}load(e){e&&(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class ir extends ht{constructor(){super(),this.animation=new By}static create(e,t){const i=new ir;return i.load(e),t!==void 0&&(Un(t)||yn(t)?i.load({value:t}):i.load(t)),i}load(e){if(super.load(e),!e)return;const t=e.animation;t!==void 0&&(t.enable!==void 0?this.animation.h.load(t):this.animation.load(e.animation))}}var Qi;(function(n){n.absorb="absorb",n.bounce="bounce",n.destroy="destroy"})(Qi||(Qi={}));class jy{constructor(){this.speed=2}load(e){e&&e.speed!==void 0&&(this.speed=e.speed)}}class Uy{constructor(){this.enable=!0,this.retries=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class Si{constructor(){this.value=0}load(e){e&&e.value!==void 0&&(this.value=fe(e.value))}}class qy extends Si{constructor(){super(),this.animation=new Qc}load(e){if(super.load(e),!e)return;const t=e.animation;t!==void 0&&this.animation.load(t)}}class uf extends qy{constructor(){super(),this.animation=new Xc}load(e){super.load(e)}}class Zu extends Si{constructor(){super(),this.value=1}}class hf{constructor(){this.horizontal=new Zu,this.vertical=new Zu}load(e){e&&(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class $y{constructor(){this.absorb=new jy,this.bounce=new hf,this.enable=!1,this.maxSpeed=50,this.mode=Qi.bounce,this.overlap=new Uy}load(e){e&&(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=fe(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class Hy{constructor(){this.close=!0,this.fill=!0,this.options={},this.type=[]}load(e){if(!e)return;const t=e.options;if(t!==void 0)for(const i in t){const s=t[i];s&&(this.options[i]=ut(this.options[i]??{},s))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class Wy{constructor(){this.offset=0,this.value=90}load(e){e&&(e.offset!==void 0&&(this.offset=fe(e.offset)),e.value!==void 0&&(this.value=fe(e.value)))}}class Gy{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}load(e){if(e&&(e.distance!==void 0&&(this.distance=fe(e.distance)),e.enable!==void 0&&(this.enable=e.enable),e.rotate)){const t=e.rotate.x;t!==void 0&&(this.rotate.x=t);const i=e.rotate.y;i!==void 0&&(this.rotate.y=i)}}}class Ky{constructor(){this.x=50,this.y=50,this.mode=ts.percent,this.radius=0}load(e){e&&(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class Zy{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=fe(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=fe(e.maxSpeed)))}}class Qy{constructor(){this.clamp=!0,this.delay=new Si,this.enable=!1,this.options={}}load(e){e&&(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=ut(this.options,e.options)))}}class Xy{load(e){e&&(e.color!==void 0&&(this.color=ht.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class Yy{constructor(){this.enable=!1,this.length=10,this.fill=new Xy}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.fill!==void 0&&this.fill.load(e.fill),e.length!==void 0&&(this.length=e.length))}}var Ne;(function(n){n.bounce="bounce",n.none="none",n.out="out",n.destroy="destroy",n.split="split"})(Ne||(Ne={}));class Jy{constructor(){this.default=Ne.out}load(e){e&&(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class ev{constructor(){this.acceleration=0,this.enable=!1}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=fe(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=ut({},e.position)))}}class tv{constructor(){this.angle=new Wy,this.attract=new Gy,this.center=new Ky,this.decay=0,this.distance={},this.direction=Ze.none,this.drift=0,this.enable=!1,this.gravity=new Zy,this.path=new Qy,this.outModes=new Jy,this.random=!1,this.size=!1,this.speed=2,this.spin=new ev,this.straight=!1,this.trail=new Yy,this.vibrate=!1,this.warp=!1}load(e){if(!e)return;this.angle.load(qn(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=fe(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=qn(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=fe(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const t=e.outModes;t!==void 0&&($i(t)?this.outModes.load(t):this.outModes.load({default:t})),this.path.load(e.path),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=fe(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class nv extends Xc{constructor(){super(),this.destroy=wi.none,this.speed=2}load(e){super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class iv extends uf{constructor(){super(),this.animation=new nv,this.value=1}load(e){if(!e)return;super.load(e);const t=e.animation;t!==void 0&&this.animation.load(t)}}class sv{constructor(){this.enable=!1,this.width=1920,this.height=1080}load(e){if(!e)return;e.enable!==void 0&&(this.enable=e.enable);const t=e.width;t!==void 0&&(this.width=t);const i=e.height;i!==void 0&&(this.height=i)}}var sr;(function(n){n.delete="delete",n.wait="wait"})(sr||(sr={}));class rv{constructor(){this.mode=sr.delete,this.value=0}load(e){e&&(e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class ov{constructor(){this.density=new sv,this.limit=new rv,this.value=0}load(e){e&&(this.density.load(e.density),this.limit.load(e.limit),e.value!==void 0&&(this.value=e.value))}}class av{constructor(){this.blur=0,this.color=new ht,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=ht.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}}class cv{constructor(){this.close=!0,this.fill=!0,this.options={},this.type="circle"}load(e){if(!e)return;const t=e.options;if(t!==void 0)for(const i in t){const s=t[i];s&&(this.options[i]=ut(this.options[i]??{},s))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class lv extends Xc{constructor(){super(),this.destroy=wi.none,this.speed=5}load(e){super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class uv extends uf{constructor(){super(),this.animation=new lv,this.value=3}load(e){if(super.load(e),!e)return;const t=e.animation;t!==void 0&&this.animation.load(t)}}class Qu{constructor(){this.width=0}load(e){e&&(e.color!==void 0&&(this.color=ir.create(this.color,e.color)),e.width!==void 0&&(this.width=fe(e.width)),e.opacity!==void 0&&(this.opacity=fe(e.opacity)))}}class hv extends Si{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),e&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class dv{constructor(e,t){this._engine=e,this._container=t,this.bounce=new hf,this.collisions=new $y,this.color=new ir,this.color.value="#fff",this.effect=new Hy,this.groups={},this.move=new tv,this.number=new ov,this.opacity=new iv,this.reduceDuplicates=!1,this.shadow=new av,this.shape=new cv,this.size=new uv,this.stroke=new Qu,this.zIndex=new hv}load(e){if(!e)return;if(e.groups!==void 0)for(const i of Object.keys(e.groups)){if(!Object.hasOwn(e.groups,i))continue;const s=e.groups[i];s!==void 0&&(this.groups[i]=ut(this.groups[i]??{},s))}e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.bounce.load(e.bounce),this.color.load(ir.create(this.color,e.color)),this.effect.load(e.effect),this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=ut({},e.interactivity));const t=e.stroke;if(t&&(this.stroke=jt(t,i=>{const s=new Qu;return s.load(i),s})),this._container){const i=this._engine.updaters.get(this._container);if(i)for(const r of i)r.loadOptions&&r.loadOptions(this,e);const s=this._engine.interactors.get(this._container);if(s)for(const r of s)r.loadParticlesOptions&&r.loadParticlesOptions(this,e)}}}function df(n,...e){for(const t of e)n.load(t)}function ff(n,e,...t){const i=new dv(n,e);return df(i,...t),i}class fv{constructor(e,t){this._findDefaultTheme=i=>this.themes.find(s=>s.default.value&&s.default.mode===i)??this.themes.find(s=>s.default.value&&s.default.mode===Mn.any),this._importPreset=i=>{this.load(this._engine.getPreset(i))},this._engine=e,this._container=t,this.autoPlay=!0,this.background=new Cy,this.backgroundMask=new Ay,this.clear=!0,this.defaultThemes={},this.delay=0,this.fullScreen=new Ry,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new lf(e,t),this.manualParticles=[],this.particles=ff(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}load(e){var o,c;if(!e)return;e.preset!==void 0&&jt(e.preset,l=>this._importPreset(l)),e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.clear!==void 0&&(this.clear=e.clear),e.key!==void 0&&(this.key=e.key),e.name!==void 0&&(this.name=e.name),e.delay!==void 0&&(this.delay=fe(e.delay));const t=e.detectRetina;t!==void 0&&(this.detectRetina=t),e.duration!==void 0&&(this.duration=fe(e.duration));const i=e.fpsLimit;i!==void 0&&(this.fpsLimit=i),e.pauseOnBlur!==void 0&&(this.pauseOnBlur=e.pauseOnBlur),e.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),e.zLayers!==void 0&&(this.zLayers=e.zLayers),this.background.load(e.background);const s=e.fullScreen;Wd(s)?this.fullScreen.enable=s:this.fullScreen.load(s),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map(l=>{const u=new Ny;return u.load(l),u})),this.particles.load(e.particles),this.style=ut(this.style,e.style),this._engine.loadOptions(this,e),e.smooth!==void 0&&(this.smooth=e.smooth);const r=this._engine.interactors.get(this._container);if(r)for(const l of r)l.loadOptions&&l.loadOptions(this,e);if(e.responsive!==void 0)for(const l of e.responsive){const u=new Ly;u.load(l),this.responsive.push(u)}if(this.responsive.sort((l,u)=>l.maxWidth-u.maxWidth),e.themes!==void 0)for(const l of e.themes){const u=this.themes.find(d=>d.name===l.name);if(u)u.load(l);else{const d=new zy;d.load(l),this.themes.push(d)}}this.defaultThemes.dark=(o=this._findDefaultTheme(Mn.dark))==null?void 0:o.name,this.defaultThemes.light=(c=this._findDefaultTheme(Mn.light))==null?void 0:c.name}setResponsive(e,t,i){this.load(i);const s=this.responsive.find(r=>r.mode===di.screen&&screen?r.maxWidth>screen.availWidth:r.maxWidth*t>e);return this.load(s==null?void 0:s.options),s==null?void 0:s.maxWidth}setTheme(e){if(e){const t=this.themes.find(i=>i.name===e);t&&this.load(t.options)}else{const t=Qd("(prefers-color-scheme: dark)"),i=t==null?void 0:t.matches,s=this._findDefaultTheme(i?Mn.dark:Mn.light);s&&this.load(s.options)}}}var rs;(function(n){n.external="external",n.particles="particles"})(rs||(rs={}));class pv{constructor(e,t){this.container=t,this._engine=e,this._interactors=[],this._externalInteractors=[],this._particleInteractors=[]}externalInteract(e){for(const t of this._externalInteractors)t.isEnabled()&&t.interact(e)}handleClickMode(e){var t;for(const i of this._externalInteractors)(t=i.handleClickMode)==null||t.call(i,e)}async init(){this._interactors=await this._engine.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case rs.external:this._externalInteractors.push(e);break;case rs.particles:this._particleInteractors.push(e);break}e.init()}}particlesInteract(e,t){for(const i of this._externalInteractors)i.clear(e,t);for(const i of this._particleInteractors)i.isEnabled(e)&&i.interact(e,t)}reset(e){for(const t of this._externalInteractors)t.isEnabled()&&t.reset(e);for(const t of this._particleInteractors)t.isEnabled(e)&&t.reset(e)}}var Yt;(function(n){n.normal="normal",n.inside="inside",n.outside="outside"})(Yt||(Yt={}));const Xu=0,yc=2,eo=.5,mv=2,Yu="random";function gv(n,e,t,i){const s=e.options[n];if(s)return ut({close:e.close,fill:e.fill},Gt(s,t,i))}function yv(n,e,t,i){const s=e.options[n];if(s)return ut({close:e.close,fill:e.fill},Gt(s,t,i))}function Ju(n){if(!De(n.outMode,n.checkModes))return;const e=n.radius*yc;n.coord>n.maxCoord-e?n.setCb(-n.radius):n.coord<e&&n.setCb(n.radius)}class vv{constructor(e,t){this.container=t,this._calcPosition=(i,s,r,o=Xu)=>{for(const[,x]of i.plugins){const E=x.particlePosition!==void 0?x.particlePosition(s,this):void 0;if(E)return At.create(E.x,E.y,r)}const c=i.canvas.size,l=Jg({size:c,position:s}),u=At.create(l.x,l.y,r),d=this.getRadius(),p=this.options.move.outModes,m=x=>{Ju({outMode:x,checkModes:[Ne.bounce],coord:u.x,maxCoord:i.canvas.size.width,setCb:E=>u.x+=E,radius:d})},g=x=>{Ju({outMode:x,checkModes:[Ne.bounce],coord:u.y,maxCoord:i.canvas.size.height,setCb:E=>u.y+=E,radius:d})};return m(p.left??p.default),m(p.right??p.default),g(p.top??p.default),g(p.bottom??p.default),this._checkOverlap(u,o)?this._calcPosition(i,void 0,r,o+1):u},this._calculateVelocity=()=>{const i=Yg(this.direction),s=i.copy(),r=this.options.move;if(r.direction===Ze.inside||r.direction===Ze.outside)return s;const o=Ln(K(r.angle.value)),c=Ln(K(r.angle.offset)),l={left:c-o*eo,right:c+o*eo};return r.straight||(s.angle+=Rt(fe(l.left,l.right))),r.random&&typeof r.speed=="number"&&(s.length*=we()),s},this._checkOverlap=(i,s=Xu)=>{const r=this.options.collisions,o=this.getRadius();if(!r.enable)return!1;const c=r.overlap;if(c.enable)return!1;const l=c.retries;if(l>=0&&s>l)throw new Error(`${Lt} particle is overlapping and can't be placed`);return!!this.container.particles.find(d=>St(i,d.position)<o+d.getRadius())},this._getRollColor=i=>{if(!i||!this.roll||!this.backColor&&!this.roll.alter)return i;const s=1,r=0,o=this.roll.horizontal&&this.roll.vertical?yc*s:s,c=this.roll.horizontal?Math.PI*eo:r;return Math.floor(((this.roll.angle??r)+c)/(Math.PI/o))%yc?this.backColor?this.backColor:this.roll.alter?Ey(i,this.roll.alter.type,this.roll.alter.value):i:i},this._initPosition=i=>{const s=this.container,r=K(this.options.zIndex.value),o=0;this.position=this._calcPosition(s,i,Ft(r,o,s.zLayers)),this.initialPosition=this.position.copy();const c=s.canvas.size,l=0;switch(this.moveCenter={...tf(this.options.move.center,c),radius:this.options.move.center.radius??l,mode:this.options.move.center.mode??ts.percent},this.direction=Xg(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case Ze.inside:this.outType=Yt.inside;break;case Ze.outside:this.outType=Yt.outside;break}this.offset=qe.origin},this._engine=e}destroy(e){var r,o,c;if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const t=this.container,i=this.pathGenerator,s=t.shapeDrawers.get(this.shape);(r=s==null?void 0:s.particleDestroy)==null||r.call(s,this);for(const[,l]of t.plugins)(o=l.particleDestroyed)==null||o.call(l,this,e);for(const l of t.particles.updaters)(c=l.particleDestroyed)==null||c.call(l,this,e);i==null||i.reset(this),this._engine.dispatchEvent(gt.particleDestroyed,{container:this.container,data:{particle:this}})}draw(e){const t=this.container,i=t.canvas;for(const[,s]of t.plugins)i.drawParticlePlugin(s,this,e);i.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??$u(this.color))}getMass(){return this.getRadius()**mv*Math.PI*eo}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??$u(this.strokeColor))}init(e,t,i,s){var v,w,I,b,T,_;const r=this.container,o=this._engine;this.id=e,this.group=s,this.effectClose=!0,this.effectFill=!0,this.shapeClose=!0,this.shapeFill=!0,this.pathRotation=!1,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.isRotating=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType=Yt.normal,this.ignoresResizeRatio=!0;const c=r.retina.pixelRatio,l=r.actualOptions,u=ff(this._engine,r,l.particles),{reduceDuplicates:d}=u,p=u.effect.type,m=u.shape.type;this.effect=Gt(p,this.id,d),this.shape=Gt(m,this.id,d);const g=u.effect,x=u.shape;if(i){if((v=i.effect)!=null&&v.type){const U=i.effect.type,ie=Gt(U,this.id,d);ie&&(this.effect=ie,g.load(i.effect))}if((w=i.shape)!=null&&w.type){const U=i.shape.type,ie=Gt(U,this.id,d);ie&&(this.shape=ie,x.load(i.shape))}}if(this.effect===Yu){const U=[...this.container.effectDrawers.keys()];this.effect=U[Math.floor(Math.random()*U.length)]}if(this.shape===Yu){const U=[...this.container.shapeDrawers.keys()];this.shape=U[Math.floor(Math.random()*U.length)]}this.effectData=gv(this.effect,g,this.id,d),this.shapeData=yv(this.shape,x,this.id,d),u.load(i);const E=this.effectData;E&&u.load(E.particles);const k=this.shapeData;k&&u.load(k.particles);const S=new lf(o,r);S.load(r.actualOptions.interactivity),S.load(u.interactivity),this.interactivity=S,this.effectFill=(E==null?void 0:E.fill)??u.effect.fill,this.effectClose=(E==null?void 0:E.close)??u.effect.close,this.shapeFill=(k==null?void 0:k.fill)??u.shape.fill,this.shapeClose=(k==null?void 0:k.close)??u.shape.close,this.options=u;const D=this.options.move.path;this.pathDelay=K(D.delay.value)*ct,D.generator&&(this.pathGenerator=this._engine.getPathGenerator(D.generator),this.pathGenerator&&r.addPath(D.generator,this.pathGenerator)&&this.pathGenerator.init(r)),r.retina.initParticle(this),this.size=ef(this.options.size,c),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(t),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy();const F=1;this.moveDecay=F-K(this.options.move.decay);const V=r.particles;V.setLastZIndex(this.position.z),this.zIndexFactor=this.position.z/r.zLayers,this.sides=24;let L=r.effectDrawers.get(this.effect);L||(L=this._engine.getEffectDrawer(this.effect),L&&r.effectDrawers.set(this.effect,L)),L!=null&&L.loadEffect&&L.loadEffect(this);let N=r.shapeDrawers.get(this.shape);N||(N=this._engine.getShapeDrawer(this.shape),N&&r.shapeDrawers.set(this.shape,N)),N!=null&&N.loadShape&&N.loadShape(this);const C=N==null?void 0:N.getSidesCount;C&&(this.sides=C(this)),this.spawning=!1,this.shadowColor=Xt(this.options.shadow.color);for(const U of V.updaters)U.init(this);for(const U of V.movers)(I=U.init)==null||I.call(U,this);(b=L==null?void 0:L.particleInit)==null||b.call(L,r,this),(T=N==null?void 0:N.particleInit)==null||T.call(N,r,this);for(const[,U]of r.plugins)(_=U.particleCreated)==null||_.call(U,this)}isInsideCanvas(){const e=this.getRadius(),t=this.container.canvas.size,i=this.position;return i.x>=-e&&i.y>=-e&&i.y<=t.height+e&&i.x<=t.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){var e;for(const t of this.container.particles.updaters)(e=t.reset)==null||e.call(t,this)}}class _v{constructor(e,t){this.position=e,this.particle=t}}var Xi;(function(n){n.circle="circle",n.rectangle="rectangle"})(Xi||(Xi={}));const Ls=2;class pf{constructor(e,t,i){this.position={x:e,y:t},this.type=i}}class lt extends pf{constructor(e,t,i){super(e,t,Xi.circle),this.radius=i}contains(e){return St(e,this.position)<=this.radius}intersects(e){const t=this.position,i=e.position,s={x:Math.abs(i.x-t.x),y:Math.abs(i.y-t.y)},r=this.radius;if(e instanceof lt||e.type===Xi.circle){const o=e,c=r+o.radius,l=Math.sqrt(s.x**Ls+s.y**Ls);return c>l}else if(e instanceof tn||e.type===Xi.rectangle){const o=e,{width:c,height:l}=o.size;return Math.pow(s.x-c,Ls)+Math.pow(s.y-l,Ls)<=r**Ls||s.x<=r+c&&s.y<=r+l||s.x<=c||s.y<=l}return!1}}class tn extends pf{constructor(e,t,i,s){super(e,t,Xi.rectangle),this.size={height:s,width:i}}contains(e){const t=this.size.width,i=this.size.height,s=this.position;return e.x>=s.x&&e.x<=s.x+t&&e.y>=s.y&&e.y<=s.y+i}intersects(e){if(e instanceof lt)return e.intersects(this);const t=this.size.width,i=this.size.height,s=this.position,r=e.position,o=e instanceof tn?e.size:{width:0,height:0},c=o.width,l=o.height;return r.x<s.x+t&&r.x+c>s.x&&r.y<s.y+i&&r.y+l>s.y}}const Fs=.5,wv=2,bv=4;class Ao{constructor(e,t){this.rectangle=e,this.capacity=t,this._subdivide=()=>{const{x:i,y:s}=this.rectangle.position,{width:r,height:o}=this.rectangle.size,{capacity:c}=this;for(let l=0;l<bv;l++){const u=l%wv;this._subs.push(new Ao(new tn(i+r*Fs*u,s+o*Fs*(Math.round(l*Fs)-u),r*Fs,o*Fs),c))}this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return this.rectangle.contains(e.position)?this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some(t=>t.insert(e))):!1}query(e,t){const i=[];if(!e.intersects(this.rectangle))return[];for(const s of this._points)!e.contains(s.position)&&St(e.position,s.position)>s.particle.getRadius()&&(!t||t(s.particle))||i.push(s.particle);if(this._divided)for(const s of this._subs)i.push(...s.query(e,t));return i}queryCircle(e,t,i){return this.query(new lt(e.x,e.y,t),i)}queryRectangle(e,t,i){return this.query(new tn(e.x,e.y,t.width,t.height),i)}}const eh=4,Ev=2,Tv=1,th=n=>{const{height:e,width:t}=n,i=-.25,s=1.5;return new tn(i*t,i*e,s*t,s*e)};let xv=class{constructor(e,t){this._addToPool=(...s)=>{this._pool.push(...s)},this._applyDensity=(s,r,o)=>{var x;const c=s.number;if(!((x=s.number.density)!=null&&x.enable)){o===void 0?this._limit=c.limit.value:c.limit&&this._groupLimits.set(o,c.limit.value);return}const l=this._initDensityFactor(c.density),u=c.value,d=0,p=c.limit.value>d?c.limit.value:u,m=Math.min(u,p)*l+r,g=Math.min(this.count,this.filter(E=>E.group===o).length);o===void 0?this._limit=c.limit.value*l:this._groupLimits.set(o,c.limit.value*l),g<m?this.push(Math.abs(m-g),void 0,s,o):g>m&&this.removeQuantity(g-m,o)},this._initDensityFactor=s=>{const r=this._container,o=1;if(!r.canvas.element||!s.enable)return o;const c=r.canvas.element,l=r.retina.pixelRatio;return c.width*c.height/(s.height*s.width*l**Ev)},this._pushParticle=(s,r,o,c)=>{try{let l=this._pool.pop();l||(l=new vv(this._engine,this._container)),l.init(this._nextId,s,r,o);let u=!0;return c&&(u=c(l)),u?(this._array.push(l),this._zArray.push(l),this._nextId++,this._engine.dispatchEvent(gt.particleAdded,{container:this._container,data:{particle:l}}),l):void 0}catch(l){bi().warning(`${Lt} adding particle: ${l}`)}},this._removeParticle=(s,r,o)=>{const c=this._array[s];if(!c||c.group!==r)return!1;const l=this._zArray.indexOf(c),u=1;return this._array.splice(s,u),this._zArray.splice(l,u),c.destroy(o),this._engine.dispatchEvent(gt.particleRemoved,{container:this._container,data:{particle:c}}),this._addToPool(c),!0},this._engine=e,this._container=t,this._nextId=0,this._array=[],this._zArray=[],this._pool=[],this._limit=0,this._groupLimits=new Map,this._needsSort=!1,this._lastZIndex=0,this._interactionManager=new pv(e,t),this._pluginsInitialized=!1;const i=t.canvas.size;this.quadTree=new Ao(th(i),eh),this.movers=[],this.updaters=[]}get count(){return this._array.length}addManualParticles(){const e=this._container;e.actualOptions.manualParticles.forEach(i=>this.addParticle(i.position?tf(i.position,e.canvas.size):void 0,i.options))}addParticle(e,t,i,s){const r=this._container.actualOptions.particles.number.limit.mode,o=i===void 0?this._limit:this._groupLimits.get(i)??this._limit,c=this.count;if(o>0)switch(r){case sr.delete:{const p=c+1-o;p>0&&this.removeQuantity(p);break}case sr.wait:if(c>=o)return;break}return this._pushParticle(e,t,i,s)}clear(){this._array=[],this._zArray=[],this._pluginsInitialized=!1}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}draw(e){const t=this._container,i=t.canvas;i.clear(),this.update(e);for(const[,s]of t.plugins)i.drawPlugin(s,e);for(const s of this._zArray)s.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}get(e){return this._array[e]}handleClickMode(e){this._interactionManager.handleClickMode(e)}async init(){var s,r;const e=this._container,t=e.actualOptions;this._lastZIndex=0,this._needsSort=!1,await this.initPlugins();let i=!1;for(const[,o]of e.plugins)if(i=((s=o.particlesInitialization)==null?void 0:s.call(o))??i,i)break;if(this.addManualParticles(),!i){const o=t.particles,c=o.groups;for(const l in c){const u=c[l];for(let d=this.count,p=0;p<((r=u.number)==null?void 0:r.value)&&d<o.number.value;d++,p++)this.addParticle(void 0,u,l)}for(let l=this.count;l<o.number.value;l++)this.addParticle()}}async initPlugins(){if(this._pluginsInitialized)return;const e=this._container;this.movers=await this._engine.getMovers(e,!0),this.updaters=await this._engine.getUpdaters(e,!0),await this._interactionManager.init();for(const[,t]of e.pathGenerators)t.init(e)}push(e,t,i,s){for(let r=0;r<e;r++)this.addParticle(t==null?void 0:t.position,i,s)}async redraw(){this.clear(),await this.init(),this.draw({value:0,factor:0})}remove(e,t,i){this.removeAt(this._array.indexOf(e),void 0,t,i)}removeAt(e,t=Tv,i,s){if(e<0||e>this.count)return;let o=0;for(let c=e;o<t&&c<this.count;c++)this._removeParticle(c--,i,s)&&o++}removeQuantity(e,t){this.removeAt(0,e,t)}setDensity(){const e=this._container.actualOptions,t=e.particles.groups,i=0;for(const s in t)this._applyDensity(t[s],i,s);this._applyDensity(e.particles,e.manualParticles.length)}setLastZIndex(e){this._lastZIndex=e,this._needsSort=this._needsSort||this._lastZIndex<e}setResizeFactor(e){this._resizeFactor=e}update(e){var r,o;const t=this._container,i=new Set;this.quadTree=new Ao(th(t.canvas.size),eh);for(const[,c]of t.pathGenerators)c.update();for(const[,c]of t.plugins)(r=c.update)==null||r.call(c,e);const s=this._resizeFactor;for(const c of this._array){s&&!c.ignoresResizeRatio&&(c.position.x*=s.width,c.position.y*=s.height,c.initialPosition.x*=s.width,c.initialPosition.y*=s.height),c.ignoresResizeRatio=!1,this._interactionManager.reset(c);for(const[,l]of this._container.plugins){if(c.destroyed)break;(o=l.particleUpdate)==null||o.call(l,c,e)}for(const l of this.movers)l.isEnabled(c)&&l.move(c,e);if(c.destroyed){i.add(c);continue}this.quadTree.insert(new _v(c.getPosition(),c))}if(i.size){const c=l=>!i.has(l);this._array=this.filter(c),this._zArray=this._zArray.filter(c);for(const l of i)this._engine.dispatchEvent(gt.particleRemoved,{container:this._container,data:{particle:l}});this._addToPool(...i)}this._interactionManager.externalInteract(e);for(const c of this._array){for(const l of this.updaters)l.update(c,e);!c.destroyed&&!c.spawning&&this._interactionManager.particlesInteract(c,e)}if(delete this._resizeFactor,this._needsSort){const c=this._zArray;c.sort((u,d)=>d.position.z-u.position.z||u.id-d.id);const l=1;this._lastZIndex=c[c.length-l].position.z,this._needsSort=!1}}};const nh=1,ih=1;class Iv{constructor(e){this.container=e,this.pixelRatio=nh,this.reduceFactor=ih}init(){const e=this.container,t=e.actualOptions;this.pixelRatio=!t.detectRetina||Ei()?nh:window.devicePixelRatio,this.reduceFactor=ih;const i=this.pixelRatio,s=e.canvas;if(s.element){const c=s.element;s.size.width=c.offsetWidth*i,s.size.height=c.offsetHeight*i}const r=t.particles,o=r.move;this.maxSpeed=K(o.gravity.maxSpeed)*i,this.sizeAnimationSpeed=K(r.size.animation.speed)*i}initParticle(e){const t=e.options,i=this.pixelRatio,s=t.move,r=s.distance,o=e.retina;o.moveDrift=K(s.drift)*i,o.moveSpeed=K(s.speed)*i,o.sizeAnimationSpeed=K(t.size.animation.speed)*i;const c=o.maxDistance;c.horizontal=r.horizontal!==void 0?r.horizontal*i:void 0,c.vertical=r.vertical!==void 0?r.vertical*i:void 0,o.maxSpeed=K(s.gravity.maxSpeed)*i}}function Ae(n){return n&&!n.destroyed}const $a=60;function Cv(n,e=$a,t=!1){return{value:n,factor:t?$a/e:$a*n/ct}}function Li(n,e,...t){const i=new fv(n,e);return df(i,...t),i}class kv{constructor(e,t,i){this._intersectionManager=s=>{if(!(!Ae(this)||!this.actualOptions.pauseOnOutsideViewport))for(const r of s)r.target===this.interactivity.element&&(r.isIntersecting?this.play():this.pause())},this._nextFrame=s=>{try{if(!this._smooth&&this._lastFrameTime!==void 0&&s<this._lastFrameTime+ct/this.fpsLimit){this.draw(!1);return}this._lastFrameTime??(this._lastFrameTime=s);const r=Cv(s-this._lastFrameTime,this.fpsLimit,this._smooth);if(this.addLifeTime(r.value),this._lastFrameTime=s,r.value>ct){this.draw(!1);return}if(this.particles.draw(r),!this.alive()){this.destroy();return}this.animationStatus&&this.draw(!1)}catch(r){bi().error(`${Lt} in animation loop`,r)}},this._engine=e,this.id=Symbol(t),this.fpsLimit=120,this._smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this._lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._clickHandlers=new Map,this._sourceOptions=i,this._initialSourceOptions=i,this.retina=new Iv(this),this.canvas=new xy(this),this.particles=new xv(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this._options=Li(this._engine,this),this.actualOptions=Li(this._engine,this),this._eventListeners=new Iy(this),this._intersectionObserver=iy(s=>this._intersectionManager(s)),this._engine.dispatchEvent(gt.containerBuilt,{container:this})}get animationStatus(){return!this._paused&&!this.pageHidden&&Ae(this)}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!Ae(this))return;const t=this.interactivity.element;if(!t)return;const i=(p,m,g)=>{if(!Ae(this))return;const x=this.retina.pixelRatio,E={x:m.x*x,y:m.y*x},k=this.particles.quadTree.queryCircle(E,g*x);e(p,k)},s=p=>{if(!Ae(this))return;const m=p,g={x:m.offsetX||m.clientX,y:m.offsetY||m.clientY};i(p,g,1)},r=()=>{Ae(this)&&(u=!0,d=!1)},o=()=>{Ae(this)&&(d=!0)},c=p=>{if(Ae(this)){if(u&&!d){const m=p,g=1;let x=m.touches[m.touches.length-g];if(!x&&(x=m.changedTouches[m.changedTouches.length-g],!x))return;const E=this.canvas.element,k=E?E.getBoundingClientRect():void 0,S=0,D={x:x.clientX-(k?k.left:S),y:x.clientY-(k?k.top:S)};i(p,D,Math.max(x.radiusX,x.radiusY))}u=!1,d=!1}},l=()=>{Ae(this)&&(u=!1,d=!1)};let u=!1,d=!1;this._clickHandlers.set("click",s),this._clickHandlers.set("touchstart",r),this._clickHandlers.set("touchmove",o),this._clickHandlers.set("touchend",c),this._clickHandlers.set("touchcancel",l);for(const[p,m]of this._clickHandlers)t.addEventListener(p,m)}addLifeTime(e){this._lifeTime+=e}addPath(e,t,i=!1){return!Ae(this)||!i&&this.pathGenerators.has(e)?!1:(this.pathGenerators.set(e,t),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}clearClickHandlers(){var e;if(Ae(this)){for(const[t,i]of this._clickHandlers)(e=this.interactivity.element)==null||e.removeEventListener(t,i);this._clickHandlers.clear()}}destroy(e=!0){var t,i;if(Ae(this)){this.stop(),this.clearClickHandlers(),this.particles.destroy(),this.canvas.destroy();for(const[,s]of this.effectDrawers)(t=s.destroy)==null||t.call(s,this);for(const[,s]of this.shapeDrawers)(i=s.destroy)==null||i.call(s,this);for(const s of this.effectDrawers.keys())this.effectDrawers.delete(s);for(const s of this.shapeDrawers.keys())this.shapeDrawers.delete(s);if(this._engine.clearPlugins(this),this.destroyed=!0,e){const s=this._engine.items,r=s.findIndex(c=>c===this);r>=0&&s.splice(r,1)}this._engine.dispatchEvent(gt.containerDestroyed,{container:this})}}draw(e){if(!Ae(this))return;let t=e;const i=s=>{t&&(this._lastFrameTime=void 0,t=!1),this._nextFrame(s)};this._drawAnimationFrame=Zg(s=>i(s))}async export(e,t={}){for(const[,i]of this.plugins){if(!i.export)continue;const s=await i.export(e,t);if(s.supported)return s.blob}bi().error(`${Lt} - Export plugin with type ${e} not found`)}handleClickMode(e){var t;if(Ae(this)){this.particles.handleClickMode(e);for(const[,i]of this.plugins)(t=i.handleClickMode)==null||t.call(i,e)}}async init(){var p,m,g,x;if(!Ae(this))return;const e=this._engine.getSupportedEffects();for(const E of e){const k=this._engine.getEffectDrawer(E);k&&this.effectDrawers.set(E,k)}const t=this._engine.getSupportedShapes();for(const E of t){const k=this._engine.getShapeDrawer(E);k&&this.shapeDrawers.set(E,k)}await this.particles.initPlugins(),this._options=Li(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Li(this._engine,this,this._options);const i=await this._engine.getAvailablePlugins(this);for(const[E,k]of i)this.plugins.set(E,k);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize();const{zLayers:s,duration:r,delay:o,fpsLimit:c,smooth:l}=this.actualOptions;this.zLayers=s,this._duration=K(r)*ct,this._delay=K(o)*ct,this._lifeTime=0;const u=120,d=0;this.fpsLimit=c>d?c:u,this._smooth=l;for(const[,E]of this.effectDrawers)await((p=E.init)==null?void 0:p.call(E,this));for(const[,E]of this.shapeDrawers)await((m=E.init)==null?void 0:m.call(E,this));for(const[,E]of this.plugins)await((g=E.init)==null?void 0:g.call(E));this._engine.dispatchEvent(gt.containerInit,{container:this}),await this.particles.init(),this.particles.setDensity();for(const[,E]of this.plugins)(x=E.particlesSetup)==null||x.call(E);this._engine.dispatchEvent(gt.particlesSetup,{container:this})}async loadTheme(e){Ae(this)&&(this._currentTheme=e,await this.refresh())}pause(){var e;if(Ae(this)&&(this._drawAnimationFrame!==void 0&&(Qg(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,t]of this.plugins)(e=t.pause)==null||e.call(t);this.pageHidden||(this._paused=!0),this._engine.dispatchEvent(gt.containerPaused,{container:this})}}play(e){if(!Ae(this))return;const t=this._paused||e;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),t)for(const[,i]of this.plugins)i.play&&i.play();this._engine.dispatchEvent(gt.containerPlay,{container:this}),this.draw(t??!1)}async refresh(){if(Ae(this))return this.stop(),this.start()}async reset(e){if(Ae(this))return this._initialSourceOptions=e,this._sourceOptions=e,this._options=Li(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Li(this._engine,this,this._options),this.refresh()}async start(){!Ae(this)||this.started||(await this.init(),this.started=!0,await new Promise(e=>{const t=async()=>{var i;this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,s]of this.plugins)await((i=s.start)==null?void 0:i.call(s));this._engine.dispatchEvent(gt.containerStarted,{container:this}),this.play(),e()};this._delayTimeout=setTimeout(()=>void t(),this._delay)}))}stop(){var e;if(!(!Ae(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,t]of this.plugins)(e=t.stop)==null||e.call(t);for(const t of this.plugins.keys())this.plugins.delete(t);this._sourceOptions=this._options,this._engine.dispatchEvent(gt.containerStopped,{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this._responsiveMaxWidth===e?!1:(this._responsiveMaxWidth=e,!0)}}class Av{constructor(){this._listeners=new Map}addEventListener(e,t){this.removeEventListener(e,t);let i=this._listeners.get(e);i||(i=[],this._listeners.set(e,i)),i.push(t)}dispatchEvent(e,t){const i=this._listeners.get(e);i==null||i.forEach(s=>s(t))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,t){const i=this._listeners.get(e);if(!i)return;const s=i.length,r=i.indexOf(t);if(r<0)return;const c=1;s===c?this._listeners.delete(e):i.splice(r,c)}}async function Ha(n,e,t,i=!1){let s=e.get(n);return(!s||i)&&(s=await Promise.all([...t.values()].map(r=>r(n))),e.set(n,s)),s}async function Rv(n){const e=Gt(n.url,n.index);if(!e)return n.fallback;const t=await fetch(e);return t.ok?await t.json():(bi().error(`${Lt} ${t.status} while retrieving config file`),n.fallback)}const mf="true",sh="false",Wa="canvas",Sv=n=>{let e;if(n instanceof HTMLCanvasElement||n.tagName.toLowerCase()===Wa)e=n,e.dataset[ui]||(e.dataset[ui]=sh);else{const i=n.getElementsByTagName(Wa);i.length?(e=i[0],e.dataset[ui]=sh):(e=document.createElement(Wa),e.dataset[ui]=mf,n.appendChild(e))}const t="100%";return e.style.width||(e.style.width=t),e.style.height||(e.style.height=t),e},Pv=(n,e)=>{let t=e??document.getElementById(n);return t||(t=document.createElement("div"),t.id=n,t.dataset[ui]=mf,document.body.append(t),t)};class Dv{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new Av,this._initialized=!1,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this.pathGenerators=new Map}get configs(){const e={};for(const[t,i]of this._configs)e[t]=i;return e}get items(){return this._domArray}get version(){return"3.5.0"}addConfig(e){const t=e.key??e.name??"default";this._configs.set(t,e),this._eventDispatcher.dispatchEvent(gt.configAdded,{data:{name:t,config:e}})}async addEffect(e,t,i=!0){jt(e,s=>{this.getEffectDrawer(s)||this.effectDrawers.set(s,t)}),await this.refresh(i)}addEventListener(e,t){this._eventDispatcher.addEventListener(e,t)}async addInteractor(e,t,i=!0){this._initializers.interactors.set(e,t),await this.refresh(i)}async addMover(e,t,i=!0){this._initializers.movers.set(e,t),await this.refresh(i)}async addParticleUpdater(e,t,i=!0){this._initializers.updaters.set(e,t),await this.refresh(i)}async addPathGenerator(e,t,i=!0){this.getPathGenerator(e)||this.pathGenerators.set(e,t),await this.refresh(i)}async addPlugin(e,t=!0){this.getPlugin(e.id)||this.plugins.push(e),await this.refresh(t)}async addPreset(e,t,i=!1,s=!0){(i||!this.getPreset(e))&&this.presets.set(e,t),await this.refresh(s)}async addShape(e,t=!0){for(const i of e.validTypes)this.getShapeDrawer(i)||this.shapeDrawers.set(i,e);await this.refresh(t)}clearPlugins(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}dispatchEvent(e,t){this._eventDispatcher.dispatchEvent(e,t)}dom(){return this.items}domItem(e){return this.item(e)}async getAvailablePlugins(e){const t=new Map;for(const i of this.plugins)i.needsPlugin(e.actualOptions)&&t.set(i.id,await i.getPlugin(e));return t}getEffectDrawer(e){return this.effectDrawers.get(e)}async getInteractors(e,t=!1){return Ha(e,this.interactors,this._initializers.interactors,t)}async getMovers(e,t=!1){return Ha(e,this.movers,this._initializers.movers,t)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(t=>t.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.shapeDrawers.get(e)}getSupportedEffects(){return this.effectDrawers.keys()}getSupportedShapes(){return this.shapeDrawers.keys()}async getUpdaters(e,t=!1){return Ha(e,this.updaters,this._initializers.updaters,t)}init(){this._initialized||(this._initialized=!0)}item(e){const{items:t}=this,i=t[e];if(!i||i.destroyed){t.splice(e,1);return}return i}async load(e){var x;const i=e.id??((x=e.element)==null?void 0:x.id)??`tsparticles${Math.floor(we()*1e4)}`,{index:s,url:r}=e,o=r?await Rv({fallback:e.options,url:r,index:s}):e.options,c=Gt(o,s),{items:l}=this,u=l.findIndex(E=>E.id.description===i),d=0,p=new kv(this,i,c);if(u>=d){const E=this.item(u),k=1,S=0,D=E?k:S;E&&!E.destroyed&&E.destroy(!1),l.splice(u,D,p)}else l.push(p);const m=Pv(i,e.element),g=Sv(m);return p.canvas.loadCanvas(g),await p.start(),p}loadOptions(e,t){this.plugins.forEach(i=>{var s;return(s=i.loadOptions)==null?void 0:s.call(i,e,t)})}loadParticlesOptions(e,t,...i){const s=this.updaters.get(e);s&&s.forEach(r=>{var o;return(o=r.loadOptions)==null?void 0:o.call(r,t,...i)})}async refresh(e=!0){e&&await Promise.all(this.items.map(t=>t.refresh()))}removeEventListener(e,t){this._eventDispatcher.removeEventListener(e,t)}setOnClickHandler(e){const{items:t}=this;if(!t.length)throw new Error(`${Lt} can only set click handlers after calling tsParticles.load()`);t.forEach(i=>i.addClickHandler(e))}}var Hi;(function(n){n[n.h=1]="h",n[n.s=2]="s",n[n.l=3]="l",n[n.a=5]="a"})(Hi||(Hi={}));class Mv{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.s!==void 0&&i.l!==void 0)return ns(i)}handleRangeColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.l!==void 0)return ns({h:K(i.h),l:K(i.l),s:K(i.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,i=t.exec(e),s=4,r=1,o=10;return i?fy({a:i.length>s?Zd(i[Hi.a]):r,h:parseInt(i[Hi.h],o),l:parseInt(i[Hi.l],o),s:parseInt(i[Hi.s],o)}):void 0}}var Wi;(function(n){n[n.r=1]="r",n[n.g=2]="g",n[n.b=3]="b",n[n.a=5]="a"})(Wi||(Wi={}));class Ov{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return i}handleRangeColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return{r:K(i.r),g:K(i.g),b:K(i.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,i=t.exec(e),s=10;return i?{a:i.length>4?Zd(i[Wi.a]):1,b:parseInt(i[Wi.b],s),g:parseInt(i[Wi.g],s),r:parseInt(i[Wi.r],s)}:void 0}}function Vv(){const n=new Ov,e=new Mv;qu(n),qu(e);const t=new Dv;return t.init(),t}class vn{constructor(e){this.type=rs.external,this.container=e}}class Yc{constructor(e){this.type=rs.particles,this.container=e}}var Ot;(function(n){n.clockwise="clockwise",n.counterClockwise="counter-clockwise",n.random="random"})(Ot||(Ot={}));var rh;(function(n){n.linear="linear",n.radial="radial",n.random="random"})(rh||(rh={}));var gi;(function(n){n.easeInBack="ease-in-back",n.easeInCirc="ease-in-circ",n.easeInCubic="ease-in-cubic",n.easeInLinear="ease-in-linear",n.easeInQuad="ease-in-quad",n.easeInQuart="ease-in-quart",n.easeInQuint="ease-in-quint",n.easeInExpo="ease-in-expo",n.easeInSine="ease-in-sine",n.easeOutBack="ease-out-back",n.easeOutCirc="ease-out-circ",n.easeOutCubic="ease-out-cubic",n.easeOutLinear="ease-out-linear",n.easeOutQuad="ease-out-quad",n.easeOutQuart="ease-out-quart",n.easeOutQuint="ease-out-quint",n.easeOutExpo="ease-out-expo",n.easeOutSine="ease-out-sine",n.easeInOutBack="ease-in-out-back",n.easeInOutCirc="ease-in-out-circ",n.easeInOutCubic="ease-in-out-cubic",n.easeInOutLinear="ease-in-out-linear",n.easeInOutQuad="ease-in-out-quad",n.easeInOutQuart="ease-in-out-quart",n.easeInOutQuint="ease-in-out-quint",n.easeInOutExpo="ease-in-out-expo",n.easeInOutSine="ease-in-out-sine"})(gi||(gi={}));const rr=Vv();Ei()||(window.tsParticles=rr);const gf=Eg(!1);var Nv=Fe("<div></div>");function Lv(n,e){zt(e,!1);let t=ci(e,"class",4,""),i=!1,s=!1,r=ci(e,"style",4,""),o=ci(e,"options",12,()=>({})),c=ci(e,"url",4,""),l=ci(e,"id",4,"tsparticles");const u=pg(),d="particlesLoaded";let p=l();function m(){if(p){const k=rr.dom().find(S=>S.id.toString()===p);k&&k.destroy()}}const g=gf.subscribe(k=>{i=k,x()});mg(()=>{g(),m()}),Ar(()=>{s=!0,x()});async function x(){if(m(),!(!i||!s))if(l()){const k=D=>{u(d,{particles:D}),p=l()},S=await rr.load({id:l(),options:o(),url:c()});k(S)}else u(d,{particles:void 0})}gg(async()=>{await x()}),qd();var E=Nv();return Et(()=>{yt(E,"id",l()),_g(E,t()),yt(E,"style",r())}),Ee(n,E),Bt({get class(){return t()},set class(k){t(k),Ns()},get style(){return r()},set style(k){r(k),Ns()},get options(){return o()},set options(k){o(k),Ns()},get url(){return c()},set url(k){c(k),Ns()},get id(){return l()},set id(k){l(k),Ns()}})}async function Fv(n){rr.init(),await n(rr),gf.set(!0)}const vc=.5,fi=0,Kt=1,oh=60,ah=0,zv=.01;function Bv(n){const e=n.initialPosition,{dx:t,dy:i}=vt(e,n.position),s=Math.abs(t),r=Math.abs(i),{maxDistance:o}=n.retina,c=o.horizontal,l=o.vertical;if(!c&&!l)return;const u=(c&&s>=c)??!1,d=(l&&r>=l)??!1;if((u||d)&&!n.misplaced)n.misplaced=!!c&&s>c||!!l&&r>l,c&&(n.velocity.x=n.velocity.y*vc-n.velocity.x),l&&(n.velocity.y=n.velocity.x*vc-n.velocity.y);else if((!c||s<c)&&(!l||r<l)&&n.misplaced)n.misplaced=!1;else if(n.misplaced){const p=n.position,m=n.velocity;c&&(p.x<e.x&&m.x<fi||p.x>e.x&&m.x>fi)&&(m.x*=-we()),l&&(p.y<e.y&&m.y<fi||p.y>e.y&&m.y>fi)&&(m.y*=-we())}}function jv(n,e,t,i,s,r){qv(n,r);const o=n.gravity,c=o!=null&&o.enable&&o.inverse?-Kt:Kt;s&&t&&(n.velocity.x+=s*r.factor/(oh*t)),o!=null&&o.enable&&t&&(n.velocity.y+=c*(o.acceleration*r.factor)/(oh*t));const l=n.moveDecay;n.velocity.multTo(l);const u=n.velocity.mult(t);o!=null&&o.enable&&i>fi&&(!o.inverse&&u.y>=fi&&u.y>=i||o.inverse&&u.y<=fi&&u.y<=-i)&&(u.y=c*i,t&&(n.velocity.y=u.y/t));const d=n.options.zIndex,p=(Kt-n.zIndexFactor)**d.velocityRate;u.multTo(p);const{position:m}=n;m.addTo(u),e.vibrate&&(m.x+=Math.sin(m.x*Math.cos(m.y)),m.y+=Math.cos(m.y*Math.sin(m.x)))}function Uv(n,e){const t=n.container;if(!n.spin)return;const i={x:n.spin.direction===Ot.clockwise?Math.cos:Math.sin,y:n.spin.direction===Ot.clockwise?Math.sin:Math.cos};n.position.x=n.spin.center.x+n.spin.radius*i.x(n.spin.angle),n.position.y=n.spin.center.y+n.spin.radius*i.y(n.spin.angle),n.spin.radius+=n.spin.acceleration;const s=Math.max(t.canvas.size.width,t.canvas.size.height),r=s*vc;n.spin.radius>r?(n.spin.radius=r,n.spin.acceleration*=-Kt):n.spin.radius<ah&&(n.spin.radius=ah,n.spin.acceleration*=-Kt),n.spin.angle+=e*zv*(Kt-n.spin.radius/s)}function qv(n,e){var o;const t=n.options,i=t.move.path;if(!i.enable)return;if(n.lastPathTime<=n.pathDelay){n.lastPathTime+=e.value;return}const r=(o=n.pathGenerator)==null?void 0:o.generate(n,e);r&&n.velocity.addTo(r),i.clamp&&(n.velocity.x=Ft(n.velocity.x,-Kt,Kt),n.velocity.y=Ft(n.velocity.y,-Kt,Kt)),n.lastPathTime-=n.pathDelay}function $v(n){return n.slow.inRange?n.slow.factor:Kt}function Hv(n){const e=n.container,t=n.options,i=t.move.spin;if(!i.enable)return;const s=i.position??{x:50,y:50},r=.01,o={x:s.x*r*e.canvas.size.width,y:s.y*r*e.canvas.size.height},c=n.getPosition(),l=St(c,o),u=K(i.acceleration);n.retina.spinAcceleration=u*e.retina.pixelRatio;const d=0;n.spin={center:o,direction:n.velocity.x>=d?Ot.clockwise:Ot.counterClockwise,angle:n.velocity.angle,radius:l,acceleration:n.retina.spinAcceleration}}const Wv=2,Gv=1,Kv=1;class Zv{init(e){const t=e.options,i=t.move.gravity;e.gravity={enable:i.enable,acceleration:K(i.acceleration),inverse:i.inverse},Hv(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){var E,k;const i=e.options,s=i.move;if(!s.enable)return;const r=e.container,o=r.retina.pixelRatio;(E=e.retina).moveSpeed??(E.moveSpeed=K(s.speed)*o),(k=e.retina).moveDrift??(k.moveDrift=K(e.options.move.drift)*o);const c=$v(e),l=e.retina.moveSpeed*r.retina.reduceFactor,u=e.retina.moveDrift,d=Wt(i.size.value)*o,p=s.size?e.getRadius()/d:Gv,m=t.factor||Kv,g=l*p*c*m/Wv,x=e.retina.maxSpeed??r.retina.maxSpeed;s.spin.enable?Uv(e,g):jv(e,s,g,x,u,t),Bv(e)}}async function Qv(n,e=!0){await n.addMover("base",()=>Promise.resolve(new Zv),e)}const Xv=2,Yv=Math.PI*Xv,Jv=0,ch={x:0,y:0};function e_(n){const{context:e,particle:t,radius:i}=n;t.circleRange||(t.circleRange={min:Jv,max:Yv});const s=t.circleRange;e.arc(ch.x,ch.y,i,s.min,s.max,!1)}const t_=12,n_=360,lh=0;class i_{constructor(){this.validTypes=["circle"]}draw(e){e_(e)}getSidesCount(){return t_}particleInit(e,t){const i=t.shapeData,s=(i==null?void 0:i.angle)??{max:n_,min:lh};t.circleRange=$i(s)?{min:Ln(s.min),max:Ln(s.max)}:{min:lh,max:Ln(s)}}}async function s_(n,e=!0){await n.addShape(new i_,e)}class r_{constructor(e){this.container=e}init(e){const t=tr(e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=af(t,e.options.color.animation,this.container.retina.reduceFactor))}isEnabled(e){const{h:t,s:i,l:s}=e.options.color.animation,{color:r}=e;return!e.destroyed&&!e.spawning&&((r==null?void 0:r.h.value)!==void 0&&t.enable||(r==null?void 0:r.s.value)!==void 0&&i.enable||(r==null?void 0:r.l.value)!==void 0&&s.enable)}update(e,t){cf(e.color,t)}}async function o_(n,e=!0){await n.addParticleUpdater("color",t=>Promise.resolve(new r_(t)),e)}class a_{constructor(e){this.container=e}init(e){const t=e.options.opacity,i=1;e.opacity=ef(t,i);const s=t.animation;s.enable&&(e.opacity.velocity=K(s.speed)/Vn*this.container.retina.reduceFactor,s.sync||(e.opacity.velocity*=we()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){!this.isEnabled(e)||!e.opacity||Kc(e,e.opacity,!0,e.options.opacity.animation.destroy,t)}}async function c_(n,e=!0){await n.addParticleUpdater("opacity",t=>Promise.resolve(new a_(t)),e)}const Ro=0,Yi=0;function l_(n){if(n.outMode!==Ne.bounce&&n.outMode!==Ne.split||n.direction!==re.left&&n.direction!==re.right)return;n.bounds.right<Yi&&n.direction===re.left?n.particle.position.x=n.size+n.offset.x:n.bounds.left>n.canvasSize.width&&n.direction===re.right&&(n.particle.position.x=n.canvasSize.width-n.size-n.offset.x);const e=n.particle.velocity.x;let t=!1;if(n.direction===re.right&&n.bounds.right>=n.canvasSize.width&&e>Ro||n.direction===re.left&&n.bounds.left<=Yi&&e<Ro){const s=K(n.particle.options.bounce.horizontal.value);n.particle.velocity.x*=-s,t=!0}if(!t)return;const i=n.offset.x+n.size;n.bounds.right>=n.canvasSize.width&&n.direction===re.right?n.particle.position.x=n.canvasSize.width-i:n.bounds.left<=Yi&&n.direction===re.left&&(n.particle.position.x=i),n.outMode===Ne.split&&n.particle.destroy()}function u_(n){if(n.outMode!==Ne.bounce&&n.outMode!==Ne.split||n.direction!==re.bottom&&n.direction!==re.top)return;n.bounds.bottom<Yi&&n.direction===re.top?n.particle.position.y=n.size+n.offset.y:n.bounds.top>n.canvasSize.height&&n.direction===re.bottom&&(n.particle.position.y=n.canvasSize.height-n.size-n.offset.y);const e=n.particle.velocity.y;let t=!1;if(n.direction===re.bottom&&n.bounds.bottom>=n.canvasSize.height&&e>Ro||n.direction===re.top&&n.bounds.top<=Yi&&e<Ro){const s=K(n.particle.options.bounce.vertical.value);n.particle.velocity.y*=-s,t=!0}if(!t)return;const i=n.offset.y+n.size;n.bounds.bottom>=n.canvasSize.height&&n.direction===re.bottom?n.particle.position.y=n.canvasSize.height-i:n.bounds.top<=Yi&&n.direction===re.top&&(n.particle.position.y=i),n.outMode===Ne.split&&n.particle.destroy()}class h_{constructor(e){this.container=e,this.modes=[Ne.bounce,Ne.split]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;let o=!1;for(const[,m]of r.plugins)if(m.particleBounce!==void 0&&(o=m.particleBounce(e,i,t)),o)break;if(o)return;const c=e.getPosition(),l=e.offset,u=e.getRadius(),d=Rr(c,u),p=r.canvas.size;l_({particle:e,outMode:s,direction:t,bounds:d,canvasSize:p,offset:l,size:u}),u_({particle:e,outMode:s,direction:t,bounds:d,canvasSize:p,offset:l,size:u})}}const to=0;class d_{constructor(e){this.container=e,this.modes=[Ne.destroy]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case Yt.normal:case Yt.outside:if(Hc(e.position,r.canvas.size,qe.origin,e.getRadius(),t))return;break;case Yt.inside:{const{dx:o,dy:c}=vt(e.position,e.moveCenter),{x:l,y:u}=e.velocity;if(l<to&&o>e.moveCenter.radius||u<to&&c>e.moveCenter.radius||l>=to&&o<-e.moveCenter.radius||u>=to&&c<-e.moveCenter.radius)return;break}}r.particles.remove(e,void 0,!0)}}const no=0;class f_{constructor(e){this.container=e,this.modes=[Ne.none]}update(e,t,i,s){if(!this.modes.includes(s)||((e.options.move.distance.horizontal&&(t===re.left||t===re.right))??(e.options.move.distance.vertical&&(t===re.top||t===re.bottom))))return;const r=e.options.move.gravity,o=this.container,c=o.canvas.size,l=e.getRadius();if(r.enable){const u=e.position;(!r.inverse&&u.y>c.height+l&&t===re.bottom||r.inverse&&u.y<-l&&t===re.top)&&o.particles.remove(e)}else{if(e.velocity.y>no&&e.position.y<=c.height+l||e.velocity.y<no&&e.position.y>=-l||e.velocity.x>no&&e.position.x<=c.width+l||e.velocity.x<no&&e.position.x>=-l)return;Hc(e.position,o.canvas.size,qe.origin,l,t)||o.particles.remove(e)}}}const io=0,so=0;class p_{constructor(e){this.container=e,this.modes=[Ne.out]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case Yt.inside:{const{x:o,y:c}=e.velocity,l=qe.origin;l.length=e.moveCenter.radius,l.angle=e.velocity.angle+Math.PI,l.addTo(qe.create(e.moveCenter));const{dx:u,dy:d}=vt(e.position,l);if(o<=io&&u>=so||c<=io&&d>=so||o>=io&&u<=so||c>=io&&d<=so)return;e.position.x=Math.floor(Rt({min:0,max:r.canvas.size.width})),e.position.y=Math.floor(Rt({min:0,max:r.canvas.size.height}));const{dx:p,dy:m}=vt(e.position,e.moveCenter);e.direction=Math.atan2(-m,-p),e.velocity.angle=e.direction;break}default:{if(Hc(e.position,r.canvas.size,qe.origin,e.getRadius(),t))return;switch(e.outType){case Yt.outside:{e.position.x=Math.floor(Rt({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(Rt({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:o,dy:c}=vt(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(c,o),e.velocity.angle=e.direction);break}case Yt.normal:{const o=e.options.move.warp,c=r.canvas.size,l={bottom:c.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:c.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},u=e.getRadius(),d=Rr(e.position,u);t===re.right&&d.left>c.width+e.offset.x?(e.position.x=l.left,e.initialPosition.x=e.position.x,o||(e.position.y=we()*c.height,e.initialPosition.y=e.position.y)):t===re.left&&d.right<-e.offset.x&&(e.position.x=l.right,e.initialPosition.x=e.position.x,o||(e.position.y=we()*c.height,e.initialPosition.y=e.position.y)),t===re.bottom&&d.top>c.height+e.offset.y?(o||(e.position.x=we()*c.width,e.initialPosition.x=e.position.x),e.position.y=l.top,e.initialPosition.y=e.position.y):t===re.top&&d.bottom<-e.offset.y&&(o||(e.position.x=we()*c.width,e.initialPosition.x=e.position.x),e.position.y=l.bottom,e.initialPosition.y=e.position.y);break}}break}}}}const ro=(n,e)=>n.default===e||n.bottom===e||n.left===e||n.right===e||n.top===e;class m_{constructor(e){this._updateOutMode=(t,i,s,r)=>{for(const o of this.updaters)o.update(t,r,i,s)},this.container=e,this.updaters=[]}init(e){this.updaters=[];const t=e.options.move.outModes;ro(t,Ne.bounce)?this.updaters.push(new h_(this.container)):ro(t,Ne.out)?this.updaters.push(new p_(this.container)):ro(t,Ne.destroy)?this.updaters.push(new d_(this.container)):ro(t,Ne.none)&&this.updaters.push(new f_(this.container))}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){const i=e.options.move.outModes;this._updateOutMode(e,t,i.bottom??i.default,re.bottom),this._updateOutMode(e,t,i.left??i.default,re.left),this._updateOutMode(e,t,i.right??i.default,re.right),this._updateOutMode(e,t,i.top??i.default,re.top)}}async function g_(n,e=!0){await n.addParticleUpdater("outModes",t=>Promise.resolve(new m_(t)),e)}const ii=0;class y_{init(e){const t=e.container,i=e.options.size,s=i.animation;s.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??t.retina.sizeAnimationSpeed)/Vn*t.retina.reduceFactor,s.sync||(e.size.velocity*=we()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??ii)<=ii||(e.size.maxLoops??ii)>ii&&(e.size.loops??ii)<(e.size.maxLoops??ii))}reset(e){e.size.loops=ii}update(e,t){this.isEnabled(e)&&Kc(e,e.size,!0,e.options.size.animation.destroy,t)}}async function v_(n,e=!0){await n.addParticleUpdater("size",()=>Promise.resolve(new y_),e)}async function __(n,e=!0){await Qv(n,!1),await s_(n,!1),await o_(n,!1),await c_(n,!1),await g_(n,!1),await v_(n,!1),await n.refresh(e)}async function w_(){Fa(gi.easeInQuad,n=>n**2),Fa(gi.easeOutQuad,n=>1-(1-n)**2),Fa(gi.easeInOutQuad,n=>n<.5?2*n**2:1-(-2*n+2)**2/2),await Promise.resolve()}function b_(n){const{context:e,particle:t,radius:i,opacity:s}=n,r=t.emojiData,o=2,c=i*o,l=e.globalAlpha;r&&(e.globalAlpha=s,e.drawImage(r,-i,-i,c,c),e.globalAlpha=l)}const uh='"Twemoji Mozilla", Apple Color Emoji, "Segoe UI Emoji", "Noto Color Emoji", "EmojiOne Color"';class E_{constructor(){this.validTypes=["emoji"],this._emojiShapeDict=new Map}destroy(){for(const[e,t]of this._emojiShapeDict)t instanceof ImageBitmap&&(t==null||t.close(),this._emojiShapeDict.delete(e))}draw(e){b_(e)}async init(e){const t=e.actualOptions,{validTypes:i}=this;if(!i.find(o=>De(o,t.particles.shape.type)))return;const s=[Uu(uh)],r=i.map(o=>t.particles.shape.options[o]).find(o=>!!o);r&&jt(r,o=>{o.font&&s.push(Uu(o.font))}),await Promise.all(s)}particleDestroy(e){delete e.emojiData}particleInit(e,t){const s=t.shapeData;if(!(s!=null&&s.value))return;const r=Gt(s.value,t.randomIndexData),o=s.font??uh;if(!r)return;const c=`${r}_${o}`,l=this._emojiShapeDict.get(c);if(l){t.emojiData=l;return}const u=Wt(t.size.value)*2;let d;const p=Wt(t.size.value);if(typeof OffscreenCanvas<"u"){const m=new OffscreenCanvas(u,u),g=m.getContext("2d");if(!g)return;g.font=`400 ${p*2}px ${o}`,g.textBaseline="middle",g.textAlign="center",g.fillText(r,p,p),d=m.transferToImageBitmap()}else{const m=document.createElement("canvas");m.width=u,m.height=u;const g=m.getContext("2d");if(!g)return;g.font=`400 ${p*2}px ${o}`,g.textBaseline="middle",g.textAlign="center",g.fillText(r,p,p),d=m}this._emojiShapeDict.set(c,d),t.emojiData=d}}async function T_(n,e=!0){await n.addShape(new E_,e)}const x_=1,I_=1,yf=0;function vf(n,e,t,i,s){const r=n.actualOptions.interactivity.modes.attract;if(!r)return;const o=n.particles.quadTree.query(i,s);for(const c of o){const{dx:l,dy:u,distance:d}=vt(c.position,e),p=r.speed*r.factor,m=Ft(Kd(r.easing)(I_-d/t)*p,x_,r.maxSpeed),g=qe.create(d?l/d*m:p,d?u/d*m:p);c.position.subFrom(g)}}function C_(n,e){n.attract||(n.attract={particles:[]});const{attract:t}=n;if(t.finish||(t.count||(t.count=0),t.count++,t.count===n.particles.count&&(t.finish=!0)),t.clicking){const i=n.interactivity.mouse.clickPosition,s=n.retina.attractModeDistance;if(!s||s<yf||!i)return;vf(n,i,s,new lt(i.x,i.y,s),r=>e(r))}else t.clicking===!1&&(t.particles=[])}function k_(n,e){const t=n.interactivity.mouse.position,i=n.retina.attractModeDistance;!i||i<yf||!t||vf(n,t,i,new lt(t.x,t.y,i),s=>e(s))}class A_{constructor(){this.distance=200,this.duration=.4,this.easing=gi.easeOutQuad,this.factor=1,this.maxSpeed=50,this.speed=1}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.speed!==void 0&&(this.speed=e.speed))}}const zs="attract";let R_=class extends vn{constructor(e,t){super(t),this._engine=e,t.attract||(t.attract={particles:[]}),this.handleClickMode=i=>{const s=this.container.actualOptions,r=s.interactivity.modes.attract;if(!(!r||i!==zs)){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const o of t.attract.particles)this.isEnabled(o)&&o.velocity.setTo(o.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout(()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)},r.duration*ct)}}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.attract;t&&(e.retina.attractModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=e.interactivity.status===_i,s=t.interactivity.events,{enable:r,mode:o}=s.onHover,{enable:c,mode:l}=s.onClick;i&&r&&De(zs,o)?k_(this.container,u=>this.isEnabled(u)):c&&De(zs,l)&&C_(this.container,u=>this.isEnabled(u))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events;if((!s.position||!r.onHover.enable)&&(!s.clickPosition||!r.onClick.enable))return!1;const o=r.onHover.mode,c=r.onClick.mode;return De(zs,o)||De(zs,c)}loadModeOptions(e,...t){e.attract||(e.attract=new A_);for(const i of t)e.attract.load(i==null?void 0:i.attract)}reset(){}};async function S_(n,e=!0){await n.addInteractor("externalAttract",t=>Promise.resolve(new R_(n,t)),e)}const P_=2,yo=.5,D_=Math.PI*yo,hh=2,_f=10,M_=0;function wf(n,e,t,i,s){const r=n.particles.quadTree.query(i,s);for(const o of r)i instanceof lt?Yd(pc(o),{position:e,radius:t,mass:t**P_*D_,velocity:qe.origin,factor:qe.origin}):i instanceof tn&&cy(o,Rr(e,t))}function O_(n,e,t,i){const s=document.querySelectorAll(e);s.length&&s.forEach(r=>{const o=r,c=n.retina.pixelRatio,l={x:(o.offsetLeft+o.offsetWidth*yo)*c,y:(o.offsetTop+o.offsetHeight*yo)*c},u=o.offsetWidth*yo*c,d=_f*c,p=t.type===ss.circle?new lt(l.x,l.y,u+d):new tn(o.offsetLeft*c-d,o.offsetTop*c-d,o.offsetWidth*c+d*hh,o.offsetHeight*c+d*hh);i(l,u,p)})}function V_(n,e,t,i){Gc(t,e,(s,r)=>O_(n,s,r,(o,c,l)=>wf(n,o,c,l,i)))}function N_(n,e){const t=n.retina.pixelRatio,i=_f*t,s=n.interactivity.mouse.position,r=n.retina.bounceModeDistance;!r||r<M_||!s||wf(n,s,r,new lt(s.x,s.y,r+i),e)}class L_{constructor(){this.distance=200}load(e){e&&e.distance!==void 0&&(this.distance=e.distance)}}const oo="bounce";class F_ extends vn{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=t.interactivity.events,s=e.interactivity.status===_i,r=i.onHover.enable,o=i.onHover.mode,c=i.onDiv;s&&r&&De(oo,o)?N_(this.container,l=>this.isEnabled(l)):V_(this.container,c,oo,l=>this.isEnabled(l))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,o=r.onDiv;return!!s.position&&r.onHover.enable&&De(oo,r.onHover.mode)||Wc(oo,o)}loadModeOptions(e,...t){e.bounce||(e.bounce=new L_);for(const i of t)e.bounce.load(i==null?void 0:i.bounce)}reset(){}}async function z_(n,e=!0){await n.addInteractor("externalBounce",t=>Promise.resolve(new F_(t)),e)}class bf{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(e){if(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.mix!==void 0&&(this.mix=e.mix),e.opacity!==void 0&&(this.opacity=e.opacity),e.color!==void 0){const t=yn(this.color)?void 0:this.color;this.color=jt(e.color,i=>ht.create(t,i))}e.size!==void 0&&(this.size=e.size)}}}class B_ extends bf{constructor(){super(),this.selectors=[]}load(e){super.load(e),e&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class j_ extends bf{load(e){super.load(e),e&&(this.divs=jt(e.divs,t=>{const i=new B_;return i.load(t),i}))}}var on;(function(n){n.color="color",n.opacity="opacity",n.size="size"})(on||(on={}));function dh(n,e,t,i){if(e>=t){const s=n+(e-t)*i;return Ft(s,n,e)}else if(e<t){const s=n-(t-e)*i;return Ft(s,e,n)}}const si="bubble",Ga=0,U_=0,q_=2,fh=1,ph=1,$_=0,H_=0,Ka=.5,Za=1;class W_ extends vn{constructor(e){super(e),this._clickBubble=()=>{var u;const t=this.container,i=t.actualOptions,s=t.interactivity.mouse.clickPosition,r=i.interactivity.modes.bubble;if(!r||!s)return;t.bubble||(t.bubble={});const o=t.retina.bubbleModeDistance;if(!o||o<Ga)return;const c=t.particles.quadTree.queryCircle(s,o,d=>this.isEnabled(d)),{bubble:l}=t;for(const d of c){if(!l.clicking)continue;d.bubble.inRange=!l.durationEnd;const p=d.getPosition(),m=St(p,s),g=(new Date().getTime()-(t.interactivity.mouse.clickTime??U_))/ct;g>r.duration&&(l.durationEnd=!0),g>r.duration*q_&&(l.clicking=!1,l.durationEnd=!1);const x={bubbleObj:{optValue:t.retina.bubbleModeSize,value:d.bubble.radius},particlesObj:{optValue:Wt(d.options.size.value)*t.retina.pixelRatio,value:d.size.value},type:on.size};this._process(d,m,g,x);const E={bubbleObj:{optValue:r.opacity,value:d.bubble.opacity},particlesObj:{optValue:Wt(d.options.opacity.value),value:((u=d.opacity)==null?void 0:u.value)??fh},type:on.opacity};this._process(d,m,g,E),!l.durationEnd&&m<=o?this._hoverBubbleColor(d,m):delete d.bubble.color}},this._hoverBubble=()=>{const t=this.container,i=t.interactivity.mouse.position,s=t.retina.bubbleModeDistance;if(!s||s<Ga||!i)return;const r=t.particles.quadTree.queryCircle(i,s,o=>this.isEnabled(o));for(const o of r){o.bubble.inRange=!0;const c=o.getPosition(),l=St(c,i),u=ph-l/s;l<=s?u>=H_&&t.interactivity.status===_i&&(this._hoverBubbleSize(o,u),this._hoverBubbleOpacity(o,u),this._hoverBubbleColor(o,u)):this.reset(o),t.interactivity.status===dc&&this.reset(o)}},this._hoverBubbleColor=(t,i,s)=>{const r=this.container.actualOptions,o=s??r.interactivity.modes.bubble;if(o){if(!t.bubble.finalColor){const c=o.color;if(!c)return;const l=Gt(c);t.bubble.finalColor=tr(l)}if(t.bubble.finalColor)if(o.mix){t.bubble.color=void 0;const c=t.getFillColor();t.bubble.color=c?sf(Zc(c,t.bubble.finalColor,ph-i,i)):t.bubble.finalColor}else t.bubble.color=t.bubble.finalColor}},this._hoverBubbleOpacity=(t,i,s)=>{var p,m;const r=this.container,o=r.actualOptions,c=(s==null?void 0:s.opacity)??((p=o.interactivity.modes.bubble)==null?void 0:p.opacity);if(!c)return;const l=t.options.opacity.value,u=((m=t.opacity)==null?void 0:m.value)??fh,d=dh(u,c,Wt(l),i);d!==void 0&&(t.bubble.opacity=d)},this._hoverBubbleSize=(t,i,s)=>{const r=this.container,o=s!=null&&s.size?s.size*r.retina.pixelRatio:r.retina.bubbleModeSize;if(o===void 0)return;const c=Wt(t.options.size.value)*r.retina.pixelRatio,l=t.size.value,u=dh(l,o,c,i);u!==void 0&&(t.bubble.radius=u)},this._process=(t,i,s,r)=>{const o=this.container,c=r.bubbleObj.optValue,l=o.actualOptions,u=l.interactivity.modes.bubble;if(!u||c===void 0)return;const d=u.duration,p=o.retina.bubbleModeDistance,m=r.particlesObj.optValue,g=r.bubbleObj.value,x=r.particlesObj.value??$_,E=r.type;if(!(!p||p<Ga||c===m))if(o.bubble||(o.bubble={}),o.bubble.durationEnd)g&&(E===on.size&&delete t.bubble.radius,E===on.opacity&&delete t.bubble.opacity);else if(i<=p){if((g??x)!==c){const S=x-s*(x-c)/d;E===on.size&&(t.bubble.radius=S),E===on.opacity&&(t.bubble.opacity=S)}}else E===on.size&&delete t.bubble.radius,E===on.opacity&&delete t.bubble.opacity},this._singleSelectorHover=(t,i,s)=>{const r=this.container,o=document.querySelectorAll(i),c=r.actualOptions.interactivity.modes.bubble;!c||!o.length||o.forEach(l=>{const u=l,d=r.retina.pixelRatio,p={x:(u.offsetLeft+u.offsetWidth*Ka)*d,y:(u.offsetTop+u.offsetHeight*Ka)*d},m=u.offsetWidth*Ka*d,g=s.type===ss.circle?new lt(p.x,p.y,m):new tn(u.offsetLeft*d,u.offsetTop*d,u.offsetWidth*d,u.offsetHeight*d),x=r.particles.quadTree.query(g,E=>this.isEnabled(E));for(const E of x){if(!g.contains(E.getPosition()))continue;E.bubble.inRange=!0;const k=c.divs,S=Xd(k,u);(!E.bubble.div||E.bubble.div!==u)&&(this.clear(E,t,!0),E.bubble.div=u),this._hoverBubbleSize(E,Za,S),this._hoverBubbleOpacity(E,Za,S),this._hoverBubbleColor(E,Za,S)}})},e.bubble||(e.bubble={}),this.handleClickMode=t=>{t===si&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,i){e.bubble.inRange&&!i||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,t.size!==void 0&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}interact(e){const t=this.container.actualOptions,i=t.interactivity.events,s=i.onHover,r=i.onClick,o=s.enable,c=s.mode,l=r.enable,u=r.mode,d=i.onDiv;o&&De(si,c)?this._hoverBubble():l&&De(si,u)?this._clickBubble():Gc(si,d,(p,m)=>this._singleSelectorHover(e,p,m))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,{onClick:o,onDiv:c,onHover:l}=r,u=Wc(si,c);return u||l.enable&&s.position||o.enable&&s.clickPosition?De(si,l.mode)||De(si,o.mode)||u:!1}loadModeOptions(e,...t){e.bubble||(e.bubble=new j_);for(const i of t)e.bubble.load(i==null?void 0:i.bubble)}reset(e){e.bubble.inRange=!1}}async function G_(n,e=!0){await n.addInteractor("externalBubble",t=>Promise.resolve(new W_(t)),e)}class K_{constructor(){this.opacity=.5}load(e){e&&e.opacity!==void 0&&(this.opacity=e.opacity)}}class Z_{constructor(){this.distance=80,this.links=new K_,this.radius=60}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links),e.radius!==void 0&&(this.radius=e.radius))}}const mh=0,gh=1,Q_=0;function X_(n,e,t,i){const s=Math.floor(t.getRadius()/e.getRadius()),r=e.getFillColor(),o=t.getFillColor();if(!r||!o)return;const c=e.getPosition(),l=t.getPosition(),u=Zc(r,o,e.getRadius(),t.getRadius()),d=n.createLinearGradient(c.x,c.y,l.x,l.y);return d.addColorStop(mh,nr(r,i)),d.addColorStop(Ft(s,mh,gh),xn(u,i)),d.addColorStop(gh,nr(o,i)),d}function Y_(n,e,t,i,s){Gs(n,i,s),n.lineWidth=e,n.strokeStyle=t,n.stroke()}function J_(n,e,t,i){const s=n.actualOptions,r=s.interactivity.modes.connect;if(r)return X_(e,t,i,r.links.opacity)}function ew(n,e,t){n.canvas.draw(i=>{const s=J_(n,i,e,t);if(!s)return;const r=e.getPosition(),o=t.getPosition();Y_(i,e.retina.linksWidth??Q_,s,r,o)})}const tw="connect",yh=0;class nw extends vn{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.connect;t&&(e.retina.connectModeDistance=t.distance*e.retina.pixelRatio,e.retina.connectModeRadius=t.radius*e.retina.pixelRatio)}interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&e.interactivity.status==="pointermove"){const i=e.interactivity.mouse.position,{connectModeDistance:s,connectModeRadius:r}=e.retina;if(!s||s<yh||!r||r<yh||!i)return;const o=Math.abs(r),c=e.particles.quadTree.queryCircle(i,o,l=>this.isEnabled(l));c.forEach((l,u)=>{const d=l.getPosition(),p=1;for(const m of c.slice(u+p)){const g=m.getPosition(),x=Math.abs(s),E=Math.abs(d.x-g.x),k=Math.abs(d.y-g.y);E<x&&k<x&&ew(e,l,m)}})}}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return s.onHover.enable&&i.position?De(tw,s.onHover.mode):!1}loadModeOptions(e,...t){e.connect||(e.connect=new Z_);for(const i of t)e.connect.load(i==null?void 0:i.connect)}reset(){}}async function iw(n,e=!0){await n.addInteractor("externalConnect",t=>Promise.resolve(new nw(t)),e)}class sw{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){e&&(e.blink!==void 0&&(this.blink=e.blink),e.color!==void 0&&(this.color=ht.create(this.color,e.color)),e.consent!==void 0&&(this.consent=e.consent),e.opacity!==void 0&&(this.opacity=e.opacity))}}class rw{constructor(){this.distance=100,this.links=new sw}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links))}}const ow=0;function aw(n,e,t,i,s,r){Gs(n,t,i),n.strokeStyle=xn(s,r),n.lineWidth=e,n.stroke()}function cw(n,e,t,i,s){n.canvas.draw(r=>{const o=e.getPosition();aw(r,e.retina.linksWidth??ow,o,s,t,i)})}const lw="grab",uw=0,hw=0;class dw extends vn{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.grab;t&&(e.retina.grabModeDistance=t.distance*e.retina.pixelRatio)}interact(){var c;const e=this.container,t=e.actualOptions,i=t.interactivity;if(!i.modes.grab||!i.events.onHover.enable||e.interactivity.status!==_i)return;const s=e.interactivity.mouse.position;if(!s)return;const r=e.retina.grabModeDistance;if(!r||r<uw)return;const o=e.particles.quadTree.queryCircle(s,r,l=>this.isEnabled(l));for(const l of o){const u=l.getPosition(),d=St(u,s);if(d>r)continue;const p=i.modes.grab.links,m=p.opacity,g=m-d*m/r;if(g<=hw)continue;const x=p.color??((c=l.options.links)==null?void 0:c.color);if(!e.particles.grabLineColor&&x){const k=i.modes.grab.links;e.particles.grabLineColor=of(x,k.blink,k.consent)}const E=gc(l,void 0,e.particles.grabLineColor);E&&cw(e,l,E,g,s)}}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return s.onHover.enable&&!!i.position&&De(lw,s.onHover.mode)}loadModeOptions(e,...t){e.grab||(e.grab=new rw);for(const i of t)e.grab.load(i==null?void 0:i.grab)}reset(){}}async function fw(n,e=!0){await n.addInteractor("externalGrab",t=>Promise.resolve(new dw(t)),e)}const pw="pause";class mw extends vn{constructor(e){super(e),this.handleClickMode=t=>{if(t!==pw)return;const i=this.container;i.animationStatus?i.pause():i.play()}}clear(){}init(){}interact(){}isEnabled(){return!0}reset(){}}async function gw(n,e=!0){await n.addInteractor("externalPause",t=>Promise.resolve(new mw(t)),e)}class yw{constructor(){this.default=!0,this.groups=[],this.quantity=4}load(e){if(!e)return;e.default!==void 0&&(this.default=e.default),e.groups!==void 0&&(this.groups=e.groups.map(i=>i)),this.groups.length||(this.default=!0);const t=e.quantity;t!==void 0&&(this.quantity=fe(t))}}const vw="push",_w=0;class ww extends vn{constructor(e){super(e),this.handleClickMode=t=>{if(t!==vw)return;const i=this.container,s=i.actualOptions,r=s.interactivity.modes.push;if(!r)return;const o=K(r.quantity);if(o<=_w)return;const c=Xo([void 0,...r.groups]),l=c!==void 0?i.actualOptions.particles.groups[c]:void 0;i.particles.push(o,i.interactivity.mouse,l,c)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.push||(e.push=new yw);for(const i of t)e.push.load(i==null?void 0:i.push)}reset(){}}async function bw(n,e=!0){await n.addInteractor("externalPush",t=>Promise.resolve(new ww(t)),e)}class Ew{constructor(){this.quantity=2}load(e){if(!e)return;const t=e.quantity;t!==void 0&&(this.quantity=fe(t))}}const Tw="remove";class xw extends vn{constructor(e){super(e),this.handleClickMode=t=>{const i=this.container,s=i.actualOptions;if(!s.interactivity.modes.remove||t!==Tw)return;const r=K(s.interactivity.modes.remove.quantity);i.particles.removeQuantity(r)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.remove||(e.remove=new Ew);for(const i of t)e.remove.load(i==null?void 0:i.remove)}reset(){}}async function Iw(n,e=!0){await n.addInteractor("externalRemove",t=>Promise.resolve(new xw(t)),e)}class Ef{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing=gi.easeOutQuad}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed))}}class Cw extends Ef{constructor(){super(),this.selectors=[]}load(e){super.load(e),e&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class kw extends Ef{load(e){super.load(e),e&&(this.divs=jt(e.divs,t=>{const i=new Cw;return i.load(t),i}))}}const ri="repulse",Aw=0,Rw=6,Sw=3,Pw=2,Dw=0,Mw=0,Ow=1,Qa=.5;class Vw extends vn{constructor(e,t){super(t),this._clickRepulse=()=>{const i=this.container,s=i.actualOptions.interactivity.modes.repulse;if(!s)return;const r=i.repulse??{particles:[]};if(r.finish||(r.count||(r.count=0),r.count++,r.count===i.particles.count&&(r.finish=!0)),r.clicking){const o=i.retina.repulseModeDistance;if(!o||o<Aw)return;const c=Math.pow(o/Rw,Sw),l=i.interactivity.mouse.clickPosition;if(l===void 0)return;const u=new lt(l.x,l.y,c),d=i.particles.quadTree.query(u,p=>this.isEnabled(p));for(const p of d){const{dx:m,dy:g,distance:x}=vt(l,p.position),E=x**Pw,k=s.speed,S=-c*k/E;if(E<=c){r.particles.push(p);const D=qe.create(m,g);D.length=S,p.velocity.setTo(D)}}}else if(r.clicking===!1){for(const o of r.particles)o.velocity.setTo(o.initialVelocity);r.particles=[]}},this._hoverRepulse=()=>{const i=this.container,s=i.interactivity.mouse.position,r=i.retina.repulseModeDistance;!r||r<Dw||!s||this._processRepulse(s,r,new lt(s.x,s.y,r))},this._processRepulse=(i,s,r,o)=>{const c=this.container,l=c.particles.quadTree.query(r,k=>this.isEnabled(k)),u=c.actualOptions.interactivity.modes.repulse;if(!u)return;const{easing:d,speed:p,factor:m,maxSpeed:g}=u,x=Kd(d),E=((o==null?void 0:o.speed)??p)*m;for(const k of l){const{dx:S,dy:D,distance:F}=vt(k.position,i),V=Ft(x(Ow-F/s)*E,Mw,g),L=qe.create(F?S/F*V:E,F?D/F*V:E);k.position.addTo(L)}},this._singleSelectorRepulse=(i,s)=>{const r=this.container,o=r.actualOptions.interactivity.modes.repulse;if(!o)return;const c=document.querySelectorAll(i);c.length&&c.forEach(l=>{const u=l,d=r.retina.pixelRatio,p={x:(u.offsetLeft+u.offsetWidth*Qa)*d,y:(u.offsetTop+u.offsetHeight*Qa)*d},m=u.offsetWidth*Qa*d,g=s.type===ss.circle?new lt(p.x,p.y,m):new tn(u.offsetLeft*d,u.offsetTop*d,u.offsetWidth*d,u.offsetHeight*d),x=o.divs,E=Xd(x,u);this._processRepulse(p,m,g,E)})},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=i=>{const s=this.container.actualOptions,r=s.interactivity.modes.repulse;if(!r||i!==ri)return;t.repulse||(t.repulse={particles:[]});const o=t.repulse;o.clicking=!0,o.count=0;for(const c of t.repulse.particles)this.isEnabled(c)&&c.velocity.setTo(c.initialVelocity);o.particles=[],o.finish=!1,setTimeout(()=>{t.destroyed||(o.clicking=!1)},r.duration*ct)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=e.interactivity.status===_i,s=t.interactivity.events,r=s.onHover,o=r.enable,c=r.mode,l=s.onClick,u=l.enable,d=l.mode,p=s.onDiv;i&&o&&De(ri,c)?this._hoverRepulse():u&&De(ri,d)?this._clickRepulse():Gc(ri,p,(m,g)=>this._singleSelectorRepulse(m,g))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,o=r.onDiv,c=r.onHover,l=r.onClick,u=Wc(ri,o);if(!(u||c.enable&&s.position||l.enable&&s.clickPosition))return!1;const d=c.mode,p=l.mode;return De(ri,d)||De(ri,p)||u}loadModeOptions(e,...t){e.repulse||(e.repulse=new kw);for(const i of t)e.repulse.load(i==null?void 0:i.repulse)}reset(){}}async function Nw(n,e=!0){await n.addInteractor("externalRepulse",t=>Promise.resolve(new Vw(n,t)),e)}class Lw{constructor(){this.factor=3,this.radius=200}load(e){e&&(e.factor!==void 0&&(this.factor=e.factor),e.radius!==void 0&&(this.radius=e.radius))}}const Fw="slow",zw=0;class Bw extends vn{constructor(e){super(e)}clear(e,t,i){e.slow.inRange&&!i||(e.slow.factor=1)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.slow;t&&(e.retina.slowModeRadius=t.radius*e.retina.pixelRatio)}interact(){}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return s.onHover.enable&&!!i.position&&De(Fw,s.onHover.mode)}loadModeOptions(e,...t){e.slow||(e.slow=new Lw);for(const i of t)e.slow.load(i==null?void 0:i.slow)}reset(e){e.slow.inRange=!1;const t=this.container,i=t.actualOptions,s=t.interactivity.mouse.position,r=t.retina.slowModeRadius,o=i.interactivity.modes.slow;if(!o||!r||r<zw||!s)return;const c=e.getPosition(),l=St(s,c),u=l/r,d=o.factor,{slow:p}=e;l>r||(p.inRange=!0,p.factor=u/d)}}async function jw(n,e=!0){await n.addInteractor("externalSlow",t=>Promise.resolve(new Bw(t)),e)}const Uw=0,qw=1,$w=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function Hw(n,e,t){const{svgData:i}=n;if(!i)return"";const s=nr(e,t);if(i.includes("fill"))return i.replace($w,()=>s);const r=i.indexOf(">");return`${i.substring(Uw,r)} fill="${s}"${i.substring(r)}`}async function Jo(n){return new Promise(e=>{n.loading=!0;const t=new Image;n.element=t,t.addEventListener("load",()=>{n.loading=!1,e()}),t.addEventListener("error",()=>{n.element=void 0,n.error=!0,n.loading=!1,bi().error(`${Lt} loading image: ${n.source}`),e()}),t.src=n.source})}async function Ww(n){if(n.type!=="svg"){await Jo(n);return}n.loading=!0;const e=await fetch(n.source);e.ok?n.svgData=await e.text():(bi().error(`${Lt} Image not found`),n.error=!0),n.loading=!1}function Gw(n,e,t,i){var o;const s=Hw(n,t,((o=i.opacity)==null?void 0:o.value)??qw),r={color:t,gif:e.gif,data:{...n,svgData:s},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor,source:e.src};return new Promise(c=>{const l=new Blob([s],{type:"image/svg+xml"}),u=URL||window.URL||window.webkitURL||window,d=u.createObjectURL(l),p=new Image;p.addEventListener("load",()=>{r.loaded=!0,r.element=p,c(r),u.revokeObjectURL(d)});const m=async()=>{u.revokeObjectURL(d);const g={...n,error:!1,loading:!0};await Jo(g),r.loaded=!0,r.element=g.element,c(r)};p.addEventListener("error",()=>void m()),p.src=d})}const Xa=[0,4,2,1],vh=[8,8,4,2];class Kw{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const t=this.data.slice(this.pos,this.pos+e);return this.pos+=t.length,t.reduce((i,s)=>i+String.fromCharCode(s),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",t=0;const i=0,s=0;do{t=this.data[this.pos++];for(let r=t;--r>=i;e+=String.fromCharCode(this.data[this.pos++]));}while(t!==s);return e}readSubBlocksBin(){let e=this.data[this.pos],t=0;const i=0,s=1;for(let o=0;e!==i;o+=e+s,e=this.data[this.pos+o])t+=e;const r=new Uint8Array(t);e=this.data[this.pos++];for(let o=0;e!==i;e=this.data[this.pos++])for(let c=e;--c>=i;r[o++]=this.data[this.pos++]);return r}skipSubBlocks(){for(const e=1,t=0;this.data[this.pos]!==t;this.pos+=this.data[this.pos]+e);this.pos++}}var $t;(function(n){n[n.Replace=0]="Replace",n[n.Combine=1]="Combine",n[n.RestoreBackground=2]="RestoreBackground",n[n.RestorePrevious=3]="RestorePrevious",n[n.UndefinedA=4]="UndefinedA",n[n.UndefinedB=5]="UndefinedB",n[n.UndefinedC=6]="UndefinedC",n[n.UndefinedD=7]="UndefinedD"})($t||($t={}));var Tn;(function(n){n[n.Extension=33]="Extension",n[n.ApplicationExtension=255]="ApplicationExtension",n[n.GraphicsControlExtension=249]="GraphicsControlExtension",n[n.PlainTextExtension=1]="PlainTextExtension",n[n.CommentExtension=254]="CommentExtension",n[n.Image=44]="Image",n[n.EndOfFile=59]="EndOfFile"})(Tn||(Tn={}));const wt={x:0,y:0},Zw=0,_h=.5,Qw=0,wh=0,_c=0;function Tf(n,e){const t=[];for(let i=0;i<e;i++)t.push({r:n.data[n.pos],g:n.data[n.pos+1],b:n.data[n.pos+2]}),n.pos+=3;return t}function Xw(n,e,t,i){switch(n.nextByte()){case Tn.GraphicsControlExtension:{const s=e.frames[t(!1)];n.pos++;const r=n.nextByte();s.GCreserved=(r&224)>>>5,s.disposalMethod=(r&28)>>>2,s.userInputDelayFlag=(r&2)===2;const o=(r&1)===1;s.delayTime=n.nextTwoBytes()*10;const c=n.nextByte();o&&i(c),n.pos++;break}case Tn.ApplicationExtension:{n.pos++;const s={identifier:n.getString(8),authenticationCode:n.getString(3),data:n.readSubBlocksBin()};e.applicationExtensions.push(s);break}case Tn.CommentExtension:{e.comments.push([t(!1),n.readSubBlocks()]);break}case Tn.PlainTextExtension:{if(e.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");n.pos++,e.frames[t(!1)].plainTextData={left:n.nextTwoBytes(),top:n.nextTwoBytes(),width:n.nextTwoBytes(),height:n.nextTwoBytes(),charSize:{width:n.nextTwoBytes(),height:n.nextTwoBytes()},foregroundColor:n.nextByte(),backgroundColor:n.nextByte(),text:n.readSubBlocks()};break}default:n.skipSubBlocks();break}}async function Yw(n,e,t,i,s,r){const o=e.frames[i(!0)];o.left=n.nextTwoBytes(),o.top=n.nextTwoBytes(),o.width=n.nextTwoBytes(),o.height=n.nextTwoBytes();const c=n.nextByte(),l=(c&128)===128,u=(c&64)===64;o.sortFlag=(c&32)===32,o.reserved=(c&24)>>>3;const d=1<<(c&7)+1;l&&(o.localColorTable=Tf(n,d));const p=S=>{const{r:D,g:F,b:V}=(l?o.localColorTable:e.globalColorTable)[S];return S!==s(null)?{r:D,g:F,b:V,a:255}:{r:D,g:F,b:V,a:t?~~((D+F+V)/3):0}},m=(()=>{try{return new ImageData(o.width,o.height,{colorSpace:"srgb"})}catch(S){if(S instanceof DOMException&&S.name==="IndexSizeError")return null;throw S}})();if(m==null)throw new EvalError("GIF frame size is to large");const g=n.nextByte(),x=n.readSubBlocksBin(),E=1<<g,k=(S,D)=>{const F=S>>>3,V=S&7;return(x[F]+(x[F+1]<<8)+(x[F+2]<<16)&(1<<D)-1<<V)>>>V};if(u){for(let S=0,D=g+1,F=0,V=[[0]],L=0;L<4;L++)if(Xa[L]<o.height){let N=0,C=0,v=!1;for(;!v;){const w=S;if(S=k(F,D),F+=D+1,S===E){D=g+1,V.length=E+2;for(let I=0;I<V.length;I++)V[I]=I<E?[I]:[]}else{S>=V.length?V.push(V[w].concat(V[w][0])):w!==E&&V.push(V[w].concat(V[S][0]));for(const I of V[S]){const{r:b,g:T,b:_,a:U}=p(I);m.data.set([b,T,_,U],Xa[L]*o.width+vh[L]*C+N%(o.width*4)),N+=4}V.length===1<<D&&D<12&&D++}N===o.width*4*(C+1)&&(C++,Xa[L]+vh[L]*C>=o.height&&(v=!0))}}o.image=m,o.bitmap=await createImageBitmap(m)}else{let S=0,D=g+1,F=0,V=-4,L=!1;const N=[[0]];for(;!L;){const C=S;if(S=k(F,D),F+=D,S===E){D=g+1,N.length=E+2;for(let v=0;v<N.length;v++)N[v]=v<E?[v]:[]}else{if(S===E+1){L=!0;break}S>=N.length?N.push(N[C].concat(N[C][0])):C!==E&&N.push(N[C].concat(N[S][0]));for(const v of N[S]){const{r:w,g:I,b,a:T}=p(v);m.data.set([w,I,b,T],V+=4)}N.length>=1<<D&&D<12&&D++}}o.image=m,o.bitmap=await createImageBitmap(m)}}async function Jw(n,e,t,i,s,r){switch(n.nextByte()){case Tn.EndOfFile:return!0;case Tn.Image:await Yw(n,e,t,i,s);break;case Tn.Extension:Xw(n,e,i,s);break;default:throw new EvalError("undefined block found")}return!1}function eb(n){for(const e of n.applicationExtensions)if(e.identifier+e.authenticationCode==="NETSCAPE2.0")return e.data[1]+(e.data[2]<<8);return NaN}async function tb(n,e,t){t||(t=!1);const i=await fetch(n);if(!i.ok&&i.status===404)throw new EvalError("file not found");const s=await i.arrayBuffer(),r={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},o=new Kw(new Uint8ClampedArray(s));if(o.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");r.width=o.nextTwoBytes(),r.height=o.nextTwoBytes();const c=o.nextByte(),l=(c&128)===128;r.colorRes=(c&112)>>>4,r.sortFlag=(c&8)===8;const u=1<<(c&7)+1,d=o.nextByte();r.pixelAspectRatio=o.nextByte(),r.pixelAspectRatio!==0&&(r.pixelAspectRatio=(r.pixelAspectRatio+15)/64),l&&(r.globalColorTable=Tf(o,u));const p=(()=>{try{return new ImageData(r.width,r.height,{colorSpace:"srgb"})}catch(V){if(V instanceof DOMException&&V.name==="IndexSizeError")return null;throw V}})();if(p==null)throw new Error("GIF frame size is to large");const{r:m,g,b:x}=r.globalColorTable[d];p.data.set(l?[m,g,x,255]:[0,0,0,0]);for(let V=4;V<p.data.length;V*=2)p.data.copyWithin(V,0,V);r.backgroundImage=p;let E=-1,k=!0,S=-1;const D=V=>(V&&(k=!0),E),F=V=>(V!=null&&(S=V),S);try{do k&&(r.frames.push({left:0,top:0,width:0,height:0,disposalMethod:$t.Replace,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),E++,S=-1,k=!1);while(!await Jw(o,r,t,D,F,e));r.frames.length--;for(const V of r.frames){if(V.userInputDelayFlag&&V.delayTime===0){r.totalTime=1/0;break}r.totalTime+=V.delayTime}return r}catch(V){throw V instanceof EvalError?new Error(`error while parsing frame ${E} "${V.message}"`):V}}function nb(n){const{context:e,radius:t,particle:i,delta:s}=n,r=i.image;if(!(r!=null&&r.gifData)||!r.gif)return;const o=new OffscreenCanvas(r.gifData.width,r.gifData.height),c=o.getContext("2d");if(!c)throw new Error("could not create offscreen canvas context");c.imageSmoothingQuality="low",c.imageSmoothingEnabled=!1,c.clearRect(wt.x,wt.y,o.width,o.height),i.gifLoopCount===void 0&&(i.gifLoopCount=r.gifLoopCount??_c);let l=i.gifFrame??Zw;const u={x:-r.gifData.width*_h,y:-r.gifData.height*_h},d=r.gifData.frames[l];if(i.gifTime===void 0&&(i.gifTime=Qw),!!d.bitmap){switch(e.scale(t/r.gifData.width,t/r.gifData.height),d.disposalMethod){case $t.UndefinedA:case $t.UndefinedB:case $t.UndefinedC:case $t.UndefinedD:case $t.Replace:c.drawImage(d.bitmap,d.left,d.top),e.drawImage(o,u.x,u.y),c.clearRect(wt.x,wt.y,o.width,o.height);break;case $t.Combine:c.drawImage(d.bitmap,d.left,d.top),e.drawImage(o,u.x,u.y);break;case $t.RestoreBackground:c.drawImage(d.bitmap,d.left,d.top),e.drawImage(o,u.x,u.y),c.clearRect(wt.x,wt.y,o.width,o.height),r.gifData.globalColorTable.length?c.putImageData(r.gifData.backgroundImage,u.x,u.y):c.putImageData(r.gifData.frames[wh].image,u.x+d.left,u.y+d.top);break;case $t.RestorePrevious:{const p=c.getImageData(wt.x,wt.y,o.width,o.height);c.drawImage(d.bitmap,d.left,d.top),e.drawImage(o,u.x,u.y),c.clearRect(wt.x,wt.y,o.width,o.height),c.putImageData(p,wt.x,wt.y)}break}if(i.gifTime+=s.value,i.gifTime>d.delayTime){if(i.gifTime-=d.delayTime,++l>=r.gifData.frames.length){if(--i.gifLoopCount<=_c)return;l=wh,c.clearRect(wt.x,wt.y,o.width,o.height)}i.gifFrame=l}e.scale(r.gifData.width/t,r.gifData.height/t)}}async function ib(n){if(n.type!=="gif"){await Jo(n);return}n.loading=!0;try{n.gifData=await tb(n.source),n.gifLoopCount=eb(n.gifData)??_c,n.gifLoopCount||(n.gifLoopCount=1/0)}catch{n.error=!0}n.loading=!1}const sb=2,rb=1,ob=12,ab=1;class cb{constructor(e){this.validTypes=["image","images"],this.loadImageShape=async t=>{if(!this._engine.loadImage)throw new Error(`${Lt} image shape not initialized`);await this._engine.loadImage({gif:t.gif,name:t.name,replaceColor:t.replaceColor??!1,src:t.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e){const{context:t,radius:i,particle:s,opacity:r}=e,o=s.image,c=o==null?void 0:o.element;if(o){if(t.globalAlpha=r,o.gif&&o.gifData)nb(e);else if(c){const l=o.ratio,u={x:-i,y:-i},d=i*sb;t.drawImage(c,u.x,u.y,d,d/l)}t.globalAlpha=rb}}getSidesCount(){return ob}async init(e){const t=e.actualOptions;if(!(!t.preload||!this._engine.loadImage))for(const i of t.preload)await this._engine.loadImage(i)}loadShape(e){if(e.shape!=="image"&&e.shape!=="images")return;this._engine.images||(this._engine.images=[]);const t=e.shapeData;if(!t)return;this._engine.images.find(s=>s.name===t.name||s.source===t.src)||this.loadImageShape(t).then(()=>{this.loadShape(e)})}particleInit(e,t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const i=this._engine.images,s=t.shapeData;if(!s)return;const r=t.getFillColor(),o=i.find(l=>l.name===s.name||l.source===s.src);if(!o)return;const c=s.replaceColor??o.replaceColor;if(o.loading){setTimeout(()=>{this.particleInit(e,t)});return}(async()=>{let l;o.svgData&&r?l=await Gw(o,s,r,t):l={color:r,data:o,element:o.element,gif:o.gif,gifData:o.gifData,gifLoopCount:o.gifLoopCount,loaded:!0,ratio:s.width&&s.height?s.width/s.height:o.ratio??ab,replaceColor:c,source:s.src},l.ratio||(l.ratio=1);const u=s.fill??t.shapeFill,d=s.close??t.shapeClose,p={image:l,fill:u,close:d};t.image=p.image,t.shapeFill=p.fill,t.shapeClose=p.close})()}}class lb{constructor(){this.src="",this.gif=!1}load(e){e&&(e.gif!==void 0&&(this.gif=e.gif),e.height!==void 0&&(this.height=e.height),e.name!==void 0&&(this.name=e.name),e.replaceColor!==void 0&&(this.replaceColor=e.replaceColor),e.src!==void 0&&(this.src=e.src),e.width!==void 0&&(this.width=e.width))}}class ub{constructor(e){this.id="imagePreloader",this._engine=e}async getPlugin(){return await Promise.resolve(),{}}loadOptions(e,t){if(!(t!=null&&t.preload))return;e.preload||(e.preload=[]);const i=e.preload;for(const s of t.preload){const r=i.find(o=>o.name===s.name||o.src===s.src);if(r)r.load(s);else{const o=new lb;o.load(s),i.push(o)}}}needsPlugin(){return!0}}const hb=3;function db(n){n.loadImage||(n.loadImage=async e=>{if(!e.name&&!e.src)throw new Error(`${Lt} no image source provided`);if(n.images||(n.images=[]),!n.images.find(t=>t.name===e.name||t.source===e.src))try{const t={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-hb),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};n.images.push(t);let i;e.gif?i=ib:i=e.replaceColor?Ww:Jo,await i(t)}catch{throw new Error(`${Lt} ${e.name??e.src} not found`)}})}async function fb(n,e=!0){db(n);const t=new ub(n);await n.addPlugin(t,e),await n.addShape(new cb(n),e)}class pb extends Si{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class mb extends Si{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class gb{constructor(){this.count=0,this.delay=new pb,this.duration=new mb}load(e){e&&(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}const Fi=0,yb=-1,bh=0,Eh=0;function vb(n,e,t){if(!n.life)return;const i=n.life;let s=!1;if(n.spawning)if(i.delayTime+=e.value,i.delayTime>=n.life.delay)s=!0,n.spawning=!1,i.delayTime=Fi,i.time=Fi;else return;if(i.duration===yb||n.spawning||(s?i.time=Fi:i.time+=e.value,i.time<i.duration))return;if(i.time=Fi,n.life.count>bh&&n.life.count--,n.life.count===bh){n.destroy();return}const r=fe(Eh,t.width),o=fe(Eh,t.width);n.position.x=Rt(r),n.position.y=Rt(o),n.spawning=!0,i.delayTime=Fi,i.time=Fi,n.reset();const c=n.options.life;c&&(i.delay=K(c.delay.value)*ct,i.duration=K(c.duration.value)*ct)}const oi=0,Th=1,xh=-1;class _b{constructor(e){this.container=e}init(e){const t=this.container,i=e.options,s=i.life;s&&(e.life={delay:t.retina.reduceFactor?K(s.delay.value)*(s.delay.sync?Th:we())/t.retina.reduceFactor*ct:oi,delayTime:oi,duration:t.retina.reduceFactor?K(s.duration.value)*(s.duration.sync?Th:we())/t.retina.reduceFactor*ct:oi,time:oi,count:s.count},e.life.duration<=oi&&(e.life.duration=xh),e.life.count<=oi&&(e.life.count=xh),e.life&&(e.spawning=e.life.delay>oi))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new gb);for(const i of t)e.life.load(i==null?void 0:i.life)}update(e,t){!this.isEnabled(e)||!e.life||vb(e,t,this.container.canvas.size)}}async function wb(n,e=!0){await n.addParticleUpdater("life",async t=>Promise.resolve(new _b(t)),e)}function bb(n){const{context:e,particle:t,radius:i}=n,s=t.shapeData,r=0;e.moveTo(-i,r),e.lineTo(i,r),e.lineCap=(s==null?void 0:s.cap)??"butt"}const Eb=1;class Tb{constructor(){this.validTypes=["line"]}draw(e){bb(e)}getSidesCount(){return Eb}}async function xb(n,e=!0){await n.addShape(new Tb,e)}const Ih=.5;class Ib{init(){}isEnabled(e){return!Ei()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const t=e.container,i=t.actualOptions,s=i.interactivity.events.onHover.parallax;if(Ei()||!s.enable)return;const r=s.force,o=t.interactivity.mouse.position;if(!o)return;const c=t.canvas.size,l={x:c.width*Ih,y:c.height*Ih},u=s.smooth,d=e.getRadius()/r,p={x:(o.x-l.x)*d,y:(o.y-l.y)*d},{offset:m}=e;m.x+=(p.x-m.x)/u,m.y+=(p.y-m.y)/u}}async function Cb(n,e=!0){await n.addMover("parallax",()=>Promise.resolve(new Ib),e)}const Ch=1e3,kb=1;class Ab extends Yc{constructor(e){super(e)}clear(){}init(){}interact(e){const t=this.container;e.attractDistance===void 0&&(e.attractDistance=K(e.options.move.attract.distance)*t.retina.pixelRatio);const i=e.attractDistance,s=e.getPosition(),r=t.particles.quadTree.queryCircle(s,i);for(const o of r){if(e===o||!o.options.move.attract.enable||o.destroyed||o.spawning)continue;const c=o.getPosition(),{dx:l,dy:u}=vt(s,c),d=e.options.move.attract.rotate,p=l/(d.x*Ch),m=u/(d.y*Ch),g=o.size.value/e.size.value,x=kb/g;e.velocity.x-=p*g,e.velocity.y-=m*g,o.velocity.x+=p*x,o.velocity.y+=m*x}}isEnabled(e){return e.options.move.attract.enable}reset(){}}async function Rb(n,e=!0){await n.addInteractor("particlesAttract",t=>Promise.resolve(new Ab(t)),e)}const Sb=.5,Pb=10,Db=0;function kh(n,e,t,i,s,r){const o=Ft(n.options.collisions.absorb.speed*s.factor/Pb,Db,i);n.size.value+=o*Sb,t.size.value-=o,i<=r&&(t.size.value=0,t.destroy())}function Mb(n,e,t,i){const s=n.getRadius(),r=e.getRadius();s===void 0&&r!==void 0?n.destroy():s!==void 0&&r===void 0?e.destroy():s!==void 0&&r!==void 0&&(s>=r?kh(n,s,e,r,t,i):kh(e,r,n,s,t,i))}const Ah=n=>{n.collisionMaxSpeed===void 0&&(n.collisionMaxSpeed=K(n.options.collisions.maxSpeed)),n.velocity.length>n.collisionMaxSpeed&&(n.velocity.length=n.collisionMaxSpeed)};function xf(n,e){Yd(pc(n),pc(e)),Ah(n),Ah(e)}function Ob(n,e){!n.unbreakable&&!e.unbreakable&&xf(n,e),n.getRadius()===void 0&&e.getRadius()!==void 0?n.destroy():n.getRadius()!==void 0&&e.getRadius()===void 0?e.destroy():n.getRadius()!==void 0&&e.getRadius()!==void 0&&(n.getRadius()>=e.getRadius()?e:n).destroy()}function Vb(n,e,t,i){switch(n.options.collisions.mode){case Qi.absorb:{Mb(n,e,t,i);break}case Qi.bounce:{xf(n,e);break}case Qi.destroy:{Ob(n,e);break}}}const Nb=2;class Lb extends Yc{constructor(e){super(e)}clear(){}init(){}interact(e,t){if(e.destroyed||e.spawning)return;const i=this.container,s=e.getPosition(),r=e.getRadius(),o=i.particles.quadTree.queryCircle(s,r*Nb);for(const c of o){if(e===c||!c.options.collisions.enable||e.options.collisions.mode!==c.options.collisions.mode||c.destroyed||c.spawning)continue;const l=c.getPosition(),u=c.getRadius();if(Math.abs(Math.round(s.z)-Math.round(l.z))>r+u)continue;const d=St(s,l),p=r+u;d>p||Vb(e,c,t,i.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}async function Fb(n,e=!0){await n.addInteractor("particlesCollisions",t=>Promise.resolve(new Lb(t)),e)}const Ya=2;class zb extends lt{constructor(e,t,i,s){super(e,t,i),this.canvasSize=s,this.canvasSize={...s}}contains(e){const{width:t,height:i}=this.canvasSize,{x:s,y:r}=e;return super.contains(e)||super.contains({x:s-t,y:r})||super.contains({x:s-t,y:r-i})||super.contains({x:s,y:r-i})}intersects(e){if(super.intersects(e))return!0;const t=e,i=e,s={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(i.radius!==void 0){const r=new lt(s.x,s.y,i.radius*Ya);return super.intersects(r)}else if(t.size!==void 0){const r=new tn(s.x,s.y,t.size.width*Ya,t.size.height*Ya);return super.intersects(r)}return!1}}class Bb{constructor(){this.blur=5,this.color=new ht,this.color.value="#000",this.enable=!1}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=ht.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable))}}class jb{constructor(){this.enable=!1,this.frequency=1}load(e){e&&(e.color!==void 0&&(this.color=ht.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Ub{constructor(){this.blink=!1,this.color=new ht,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new Bb,this.triangles=new jb,this.width=1,this.warp=!1}load(e){e&&(e.id!==void 0&&(this.id=e.id),e.blink!==void 0&&(this.blink=e.blink),this.color=ht.create(this.color,e.color),e.consent!==void 0&&(this.consent=e.consent),e.distance!==void 0&&(this.distance=e.distance),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),e.width!==void 0&&(this.width=e.width),e.warp!==void 0&&(this.warp=e.warp))}}const Rh=2,qb=1,ao={x:0,y:0},$b=0;function Hb(n,e,t,i,s){const{dx:r,dy:o,distance:c}=vt(n,e);if(!s||c<=t)return c;const l={x:Math.abs(r),y:Math.abs(o)},u={x:Math.min(l.x,i.width-l.x),y:Math.min(l.y,i.height-l.y)};return Math.sqrt(u.x**Rh+u.y**Rh)}class Wb extends Yc{constructor(e){super(e),this._setColor=t=>{if(!t.options.links)return;const i=this.linkContainer,s=t.options.links;let r=s.id===void 0?i.particles.linksColor:i.particles.linksColors.get(s.id);if(r)return;const o=s.color;r=of(o,s.blink,s.consent),s.id===void 0?i.particles.linksColor=r:i.particles.linksColors.set(s.id,r)},this.linkContainer=e}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}interact(e){if(!e.options.links)return;e.links=[];const t=e.getPosition(),i=this.container,s=i.canvas.size;if(t.x<ao.x||t.y<ao.y||t.x>s.width||t.y>s.height)return;const r=e.options.links,o=r.opacity,c=e.retina.linksDistance??$b,l=r.warp;let u;l?u=new zb(t.x,t.y,c,s):u=new lt(t.x,t.y,c);const d=i.particles.quadTree.query(u);for(const p of d){const m=p.options.links;if(e===p||!(m!=null&&m.enable)||r.id!==m.id||p.spawning||p.destroyed||!p.links||e.links.some(k=>k.destination===p)||p.links.some(k=>k.destination===e))continue;const g=p.getPosition();if(g.x<ao.x||g.y<ao.y||g.x>s.width||g.y>s.height)continue;const x=Hb(t,g,c,s,l&&m.warp);if(x>c)continue;const E=(qb-x/c)*o;this._setColor(e),e.links.push({destination:p,opacity:E})}}isEnabled(e){var t;return!!((t=e.options.links)!=null&&t.enable)}loadParticlesOptions(e,...t){e.links||(e.links=new Ub);for(const i of t)e.links.load(i==null?void 0:i.links)}reset(){}}async function Gb(n,e=!0){await n.addInteractor("particlesLinks",async t=>Promise.resolve(new Wb(t)),e)}function Kb(n,e,t,i){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.lineTo(i.x,i.y),n.closePath()}function Zb(n){let e=!1;const{begin:t,end:i,maxDistance:s,context:r,canvasSize:o,width:c,backgroundMask:l,colorLine:u,opacity:d,links:p}=n;if(St(t,i)<=s)Gs(r,t,i),e=!0;else if(p.warp){let g,x;const E={x:i.x-o.width,y:i.y},k=vt(t,E);if(k.distance<=s){const S=t.y-k.dy/k.dx*t.x;g={x:0,y:S},x={x:o.width,y:S}}else{const S={x:i.x,y:i.y-o.height},D=vt(t,S);if(D.distance<=s){const V=-(t.y-D.dy/D.dx*t.x)/(D.dy/D.dx);g={x:V,y:0},x={x:V,y:o.height}}else{const F={x:i.x-o.width,y:i.y-o.height},V=vt(t,F);if(V.distance<=s){const L=t.y-V.dy/V.dx*t.x;g={x:-L/(V.dy/V.dx),y:L},x={x:g.x+o.width,y:g.y+o.height}}}}g&&x&&(Gs(r,t,g),Gs(r,i,x),e=!0)}if(!e)return;r.lineWidth=c,l.enable&&(r.globalCompositeOperation=l.composite),r.strokeStyle=xn(u,d);const{shadow:m}=p;if(m.enable){const g=Xt(m.color);g&&(r.shadowBlur=m.blur,r.shadowColor=xn(g))}r.stroke()}function Qb(n){const{context:e,pos1:t,pos2:i,pos3:s,backgroundMask:r,colorTriangle:o,opacityTriangle:c}=n;Kb(e,t,i,s),r.enable&&(e.globalCompositeOperation=r.composite),e.fillStyle=xn(o,c),e.fill()}function Xb(n){return n.sort((e,t)=>e-t),n.join("_")}function Sh(n,e){const t=Xb(n.map(s=>s.id));let i=e.get(t);return i===void 0&&(i=we(),e.set(t,i)),i}const Ph=0,Ja=0,Dh=0,Yb=.5,Jb=1;class e0{constructor(e){this.container=e,this._drawLinkLine=(t,i)=>{const s=t.options.links;if(!(s!=null&&s.enable))return;const r=this.container,o=r.actualOptions,c=i.destination,l=t.getPosition(),u=c.getPosition();let d=i.opacity;r.canvas.draw(p=>{var S;let m;const g=(S=t.options.twinkle)==null?void 0:S.lines;if(g!=null&&g.enable){const D=g.frequency,F=Xt(g.color);we()<D&&F&&(m=F,d=K(g.opacity))}if(!m){const D=s.id!==void 0?r.particles.linksColors.get(s.id):r.particles.linksColor;m=gc(t,c,D)}if(!m)return;const x=t.retina.linksWidth??Ja,E=t.retina.linksDistance??Dh,{backgroundMask:k}=o;Zb({context:p,width:x,begin:l,end:u,maxDistance:E,canvasSize:r.canvas.size,links:s,backgroundMask:k,colorLine:m,opacity:d})})},this._drawLinkTriangle=(t,i,s)=>{const r=t.options.links;if(!(r!=null&&r.enable))return;const o=r.triangles;if(!o.enable)return;const c=this.container,l=c.actualOptions,u=i.destination,d=s.destination,p=o.opacity??(i.opacity+s.opacity)*Yb;p<=Ph||c.canvas.draw(m=>{const g=t.getPosition(),x=u.getPosition(),E=d.getPosition(),k=t.retina.linksDistance??Dh;if(St(g,x)>k||St(E,x)>k||St(E,g)>k)return;let S=Xt(o.color);if(!S){const D=r.id!==void 0?c.particles.linksColors.get(r.id):c.particles.linksColor;S=gc(t,u,D)}S&&Qb({context:m,pos1:g,pos2:x,pos3:E,backgroundMask:l.backgroundMask,colorTriangle:S,opacityTriangle:p})})},this._drawTriangles=(t,i,s,r)=>{var l,u,d;const o=s.destination;if(!((l=t.links)!=null&&l.triangles.enable&&((u=o.options.links)!=null&&u.triangles.enable)))return;const c=(d=o.links)==null?void 0:d.filter(p=>{const m=this._getLinkFrequency(o,p.destination);return o.options.links&&m<=o.options.links.frequency&&r.findIndex(x=>x.destination===p.destination)>=0});if(c!=null&&c.length)for(const p of c){const m=p.destination;this._getTriangleFrequency(i,o,m)>t.links.triangles.frequency||this._drawLinkTriangle(i,s,p)}},this._getLinkFrequency=(t,i)=>Sh([t,i],this._freqs.links),this._getTriangleFrequency=(t,i,s)=>Sh([t,i,s],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(e,t){const{links:i,options:s}=t;if(!(i!=null&&i.length))return;const r=i.filter(o=>s.links&&(s.links.frequency>=Jb||this._getLinkFrequency(t,o.destination)<=s.links.frequency));for(const o of r)this._drawTriangles(s,t,o,r),o.opacity>Ph&&(t.retina.linksWidth??Ja)>Ja&&this._drawLinkLine(t,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map,await Promise.resolve()}particleCreated(e){if(e.links=[],!e.options.links)return;const t=this.container.retina.pixelRatio,{retina:i}=e,{distance:s,width:r}=e.options.links;i.linksDistance=s*t,i.linksWidth=r*t}particleDestroyed(e){e.links=[]}}class t0{constructor(){this.id="links"}getPlugin(e){return Promise.resolve(new e0(e))}loadOptions(){}needsPlugin(){return!0}}async function n0(n,e=!0){const t=new t0;await n.addPlugin(t,e)}async function i0(n,e=!0){await Gb(n,e),await n0(n,e)}const s0=180,co={x:0,y:0},r0=2;function o0(n,e,t){const{context:i}=n,s=t.count.numerator*t.count.denominator,r=t.count.numerator/t.count.denominator,o=s0*(r-r0)/r,c=Math.PI-Ln(o);if(i){i.beginPath(),i.translate(e.x,e.y),i.moveTo(co.x,co.y);for(let l=0;l<s;l++)i.lineTo(t.length,co.y),i.translate(t.length,co.y),i.rotate(c)}}const a0=5;class If{draw(e){const{particle:t,radius:i}=e,s=this.getCenter(t,i),r=this.getSidesData(t,i);o0(e,s,r)}getSidesCount(e){const t=e.shapeData;return Math.round(K((t==null?void 0:t.sides)??a0))}}const Mh=3.5,Oh=2.66,c0=3;class l0 extends If{constructor(){super(...arguments),this.validTypes=["polygon"]}getCenter(e,t){return{x:-t/(e.sides/Mh),y:-t/(Oh/Mh)}}getSidesData(e,t){const i=e.sides;return{count:{denominator:1,numerator:i},length:t*Oh/(i/c0)}}}const u0=1.66,h0=3,d0=2;class f0 extends If{constructor(){super(...arguments),this.validTypes=["triangle"]}getCenter(e,t){return{x:-t,y:t/u0}}getSidesCount(){return h0}getSidesData(e,t){const i=t*d0;return{count:{denominator:2,numerator:3},length:i}}}async function p0(n,e=!0){await n.addShape(new l0,e)}async function m0(n,e=!0){await n.addShape(new f0,e)}async function g0(n,e=!0){await p0(n,e),await m0(n,e)}class y0{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=fe(e.speed)),e.decay!==void 0&&(this.decay=fe(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class v0 extends Si{constructor(){super(),this.animation=new y0,this.direction=Ot.clockwise,this.path=!1,this.value=0}load(e){e&&(super.load(e),e.direction!==void 0&&(this.direction=e.direction),this.animation.load(e.animation),e.path!==void 0&&(this.path=e.path))}}const Cf=2,_0=Math.PI*Cf,w0=1,b0=360;class E0{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:Ln(K(t.value)),min:0,max:_0},e.pathRotation=t.path;let i=t.direction;switch(i===Ot.random&&(i=Math.floor(we()*Cf)>0?Ot.counterClockwise:Ot.clockwise),i){case Ot.counterClockwise:case"counterClockwise":e.rotate.status=Ve.decreasing;break;case Ot.clockwise:e.rotate.status=Ve.increasing;break}const s=t.animation;s.enable&&(e.rotate.decay=w0-K(s.decay),e.rotate.velocity=K(s.speed)/b0*this.container.retina.reduceFactor,s.sync||(e.rotate.velocity*=we())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return t?!e.destroyed&&!e.spawning&&(!!t.value||t.animation.enable||t.path):!1}loadOptions(e,...t){e.rotate||(e.rotate=new v0);for(const i of t)e.rotate.load(i==null?void 0:i.rotate)}update(e,t){this.isEnabled(e)&&(e.isRotating=!!e.rotate,e.rotate&&(Kc(e,e.rotate,!1,wi.none,t),e.rotation=e.rotate.value))}}async function T0(n,e=!0){await n.addParticleUpdater("rotate",t=>Promise.resolve(new E0(t)),e)}const x0=2,I0=Math.sqrt(x0),C0=2;function k0(n){const{context:e,radius:t}=n,i=t/I0,s=i*C0;e.rect(-i,-i,s,s)}const A0=4;class R0{constructor(){this.validTypes=["edge","square"]}draw(e){k0(e)}getSidesCount(){return A0}}async function S0(n,e=!0){await n.addShape(new R0,e)}const P0=2,zi={x:0,y:0};function D0(n){const{context:e,particle:t,radius:i}=n,s=t.sides,r=t.starInset??P0;e.moveTo(zi.x,zi.y-i);for(let o=0;o<s;o++)e.rotate(Math.PI/s),e.lineTo(zi.x,zi.y-i*r),e.rotate(Math.PI/s),e.lineTo(zi.x,zi.y-i)}const M0=2,O0=5;class V0{constructor(){this.validTypes=["star"]}draw(e){D0(e)}getSidesCount(e){const t=e.shapeData;return Math.round(K((t==null?void 0:t.sides)??O0))}particleInit(e,t){const i=t.shapeData;t.starInset=K((i==null?void 0:i.inset)??M0)}}async function N0(n,e=!0){await n.addShape(new V0,e)}const L0=1;class F0{constructor(e){this.container=e}init(e){var o;const t=this.container,i=e.options,s=Gt(i.stroke,e.id,i.reduceDuplicates);e.strokeWidth=K(s.width)*t.retina.pixelRatio,e.strokeOpacity=K(s.opacity??L0),e.strokeAnimation=(o=s.color)==null?void 0:o.animation;const r=tr(s.color)??e.getFillColor();r&&(e.strokeColor=af(r,e.strokeAnimation,t.retina.reduceFactor))}isEnabled(e){const t=e.strokeAnimation,{strokeColor:i}=e;return!e.destroyed&&!e.spawning&&!!t&&((i==null?void 0:i.h.value)!==void 0&&i.h.enable||(i==null?void 0:i.s.value)!==void 0&&i.s.enable||(i==null?void 0:i.l.value)!==void 0&&i.l.enable)}update(e,t){this.isEnabled(e)&&cf(e.strokeColor,t)}}async function z0(n,e=!0){await n.addParticleUpdater("strokeColor",t=>Promise.resolve(new F0(t)),e)}async function B0(n,e=!0){await Cb(n,!1),await S_(n,!1),await z_(n,!1),await G_(n,!1),await iw(n,!1),await fw(n,!1),await gw(n,!1),await bw(n,!1),await Iw(n,!1),await Nw(n,!1),await jw(n,!1),await Rb(n,!1),await Fb(n,!1),await i0(n,!1),await w_(),await T_(n,!1),await fb(n,!1),await xb(n,!1),await g0(n,!1),await S0(n,!1),await N0(n,!1),await wb(n,!1),await T0(n,!1),await z0(n,!1),await __(n,e)}var j0=Fe('<footer class="custom_button svelte-17l0vzj"><div class="info svelte-17l0vzj"><div class="message svelte-17l0vzj"><p>감사합니다 :)</p></div> <a href="https://smartstore.cryucompany.com/" target="_blank" rel="noreferrer" class="svelte-17l0vzj"><img src="/cryucard/image/logo/logo-none-background.png" alt="로고" class="svelte-17l0vzj"><span class="copyright svelte-17l0vzj">Copyright © 2024 Cryucard.</span></a></div> <div class="effect-container svelte-17l0vzj"><!></div></footer>');function U0(n,e){zt(e,!1);const t={background:{color:{value:"#000"},opacity:.4},fullScreen:{enable:!1},fpsLimit:120,particles:{number:{density:{enable:!0},value:160},opacity:{value:.5},shape:{type:"circle"},size:{value:{min:1,max:5}},color:{value:"#ffffff"},move:{enable:!0,direction:"none",outModes:{default:"bounce"},random:!0,speed:1,straight:!1},collisions:{enable:!0}},detectRetina:!0,interactivity:{events:{onClick:{enable:!1,mode:"push"},onHover:{enable:!1,mode:"repulse"},resize:{enable:!0}},modes:{push:{quantity:4},repulse:{distance:200,duration:.4}}}};Ar(()=>{Fv(async d=>{await B0(d)})}),qd();var i=j0(),s=O(i),r=O(s);O(r),M(r);var o=R(R(r,!0)),c=O(o);R(c),M(o),M(s);var l=R(R(s,!0)),u=O(l);Lv(u,{id:"thanksAnime",class:"",style:"",options:t,$$events:{particlesLoaded:d=>{d.detail.particles}},$$legacy:!0}),M(l),M(i),Ee(n,i),Bt()}var q0=(n,e,t)=>{var i;return(i=e.onClickImage)==null?void 0:i.call(e,me(t))},$0=Fe('<div class="image-item svelte-zy4rk0"><button class="image-container svelte-zy4rk0"><img class="cryu-lazy-loaded blur-effect svelte-zy4rk0"> <span class="gallery-img-animation"></span></button></div>'),H0=(n,e,t)=>{var i;return(i=e.onClickImage)==null?void 0:i.call(e,me(t))},W0=Fe('<div class="image-item svelte-zy4rk0"><button class="image-container svelte-zy4rk0"><img class="cryu-lazy-loaded blur-effect svelte-zy4rk0"> <span class="gallery-img-animation"></span></button></div>'),G0=Fe('<div class="my-masonry-grid"><div class="my-masonry-grid_column col-2 svelte-zy4rk0"></div> <div class="my-masonry-grid_column col-2 svelte-zy4rk0"></div></div>');function K0(n,e){zt(e,!0);let t=Ht(()=>{const p=[[],[]];for(let m=0;m<e.images.length;m+=1)p[m%2].push(e.images[m]);return p}),i=Ht(()=>{let[p,m]=me(t);return[p,m]}),s=Ht(()=>me(i)[0]),r=Ht(()=>me(i)[1]),o;function c(){return o.getBoundingClientRect()}var l=G0();Co(l,p=>o=p,()=>o);var u=O(l);Js(u,73,()=>me(s),er,(p,m,g)=>{let x=()=>Oe(Oe(m)).src;var E=$0();const k=Ht(()=>g*2);var S=O(E);S.__click=[q0,e,k];var D=O(S);R(R(D,!0)),M(S),M(E),Et(()=>{yt(D,"src",x()),yt(D,"alt",`${me(k)+1}번째 사진`)}),Ee(p,E)}),M(u);var d=R(R(u,!0));return Js(d,73,()=>me(r),er,(p,m,g)=>{let x=()=>Oe(Oe(m)).src;var E=W0();const k=Ht(()=>(g+1)*2-1);var S=O(E);S.__click=[H0,e,k];var D=O(S);R(R(D,!0)),M(S),M(E),Et(()=>{yt(D,"src",x()),yt(D,"alt",`${me(k)+1}번째 사진`)}),Ee(p,E)}),M(d),M(l),Ee(n,l),Bt({getBoundingClientRect:c})}ys(["click"]);var Z0=Ko('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="500px" height="500px" viewBox="0 0 500 500" preserveAspectRatio="xMidYMid slice" style="width: 100%; height: 100%; content-visibility: visible;" class="svelte-fqobuf"><g stroke-linecap="round" stroke-linejoin="round" fill-opacity="0" stroke="rgb(0,0,0)" stroke-opacity="1" stroke-width="18" transform="matrix(1,0,0, 1,0,500)" class="svelte-fqobuf"><g class="arrow-top-group svelte-fqobuf" transform="matrix(1,0,0,-1,180,-247)"><path class="arrow-top svelte-fqobuf" d="M0,53.07699966430664 C0,53.07699966430664 65.38400268554688,0 65.38400268554688,0 C65.38400268554688,0 100.6969985961914,30.08099937438965 100.6969985961914,30.08099937438965 C100.6969985961914,30.08099937438965 127.69200134277344,53.07699966430664 127.69200134277344,53.07699966430664"></path></g><g class="arrow-bottom-group svelte-fqobuf" transform="matrix(1,0,0,-1,180,-171)"><path class="arrow-bottom svelte-fqobuf" d="M0,53.07699966430664 C0,53.07699966430664 65.38400268554688,0 65.38400268554688,0 C65.38400268554688,0 100.6969985961914,30.08099937438965 100.6969985961914,30.08099937438965 C100.6969985961914,30.08099937438965 127.69200134277344,53.07699966430664 127.69200134277344,53.07699966430664"></path></g></g></svg>');function Vh(n){var e=Z0(),t=O(e),i=O(t);O(i),M(i);var s=R(i);O(s),M(s),M(t),M(e),Ee(n,e)}var Q0=Ko('<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M368 368L144 144m224 0L144 368"></path></svg>'),X0=Fe('<div class="gallery-modal modal-swiper svelte-9n7wgn"><button class="close-button"><!></button> <!></div>');function Y0(n,e){zt(e,!0);const t=l=>{var u=Q0();O(u),M(u),Ee(l,u)};var i=X0();Io("keydown",Zo.body,function(...l){var u;return(u=me(s))==null?void 0:u.apply(this,l)},!1);var s=Ht(()=>l=>{l.key==="Escape"&&e.onClose()}),r=O(i);r.__click=function(...l){var u;return(u=e.onClose)==null?void 0:u.apply(this,l)};var o=O(r);t(o),M(r);var c=R(R(r,!0));Tg(c,()=>e.children),M(i),Ee(n,i),Bt()}ys(["click"]);var J0=Fe('<div class="controls svelte-15mxs5j"><div style="height: 40px; background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);"></div> <button class="button svelte-15mxs5j"><span class="button-front svelte-15mxs5j" aria-label="animation" style="margin: 0px 45px 0px 0px;"><!></span> <span class="button-text svelte-15mxs5j">갤러리 더 보기</span> <span class="button-rear svelte-15mxs5j" aria-label="animation" style="margin: 0px 0px 0px 45px;"><!></span></button></div>'),e1=Fe('<swiper-slide><img class="blur-effect" alt=""></swiper-slide>',2),t1=Fe("<swiper-container></swiper-container>",2),n1=Fe('<div class="gallery svelte-15mxs5j"><header class="svelte-15mxs5j"><h2 data-aos="" data-aos-once="true" class="aos-init aos-animate svelte-15mxs5j">GALLERY</h2> <p data-aos="" data-aos-once="true" class="aos-init aos-animate svelte-15mxs5j">갤러리</p></header> <div class="images-container svelte-15mxs5j"><div class="grid-container svelte-15mxs5j"><!></div> <!></div> <!></div>');function i1(n,e){zt(e,!0);let t=En(!1),i=En("500px"),s;function r(){const{height:L}=s.getBoundingClientRect();rt(i,`${L}px`),setTimeout(()=>{rt(i,"none")},1200),rt(t,!0)}let o=En(null),c=Ht(()=>me(o)!==null);function l(L){console.log("image index:",L,e.images[L]),rt(o,Ws(L)),rt(d,1)}function u(){rt(o,null),rt(d,0)}let d=En(0),p=En(void 0),m=Ht(()=>{var L;return(L=me(p))==null?void 0:L.swiper});hg(()=>{me(o)!==null&&me(m)&&me(m).slideTo(me(o))});var g=n1(),x=O(g),E=O(x);R(R(E,!0)),M(x);var k=R(R(x,!0)),S=O(k),D=O(S);Co(K0(D,{get images(){return e.images},onClickImage:l}),L=>s=L,()=>s),M(S);var F=R(R(S,!0));xo(F,()=>!me(t),L=>{var N=J0(),C=O(N),v=R(R(C,!0));v.__click=r;var w=O(v),I=O(w);Vh(I),M(w);var b=R(R(w,!0)),T=R(R(b,!0)),_=O(T);Vh(_),M(T),M(v),M(N),Ee(L,N)}),M(k);var V=R(R(k,!0));xo(V,()=>me(c),L=>{Y0(L,{onClose:()=>u(),children:(N,C)=>{var v=t1();Co(v,w=>rt(p,Ws(w)),()=>me(p)),rn(v,"loop",!0),rn(v,"speed",1200),rn(v,"centered-slides",!0),rn(v,"grab-cursor",!0),rn(v,"slides-per-view","auto"),rn(v,"navigation",!0),rn(v,"pagination",{dynamicBullets:!0}),rn(v,"effect","coverflow"),rn(v,"coverflow-effect",{rotate:0,stretch:0,depth:100,modifier:2,slideShadows:!0}),Js(v,73,()=>e.images,er,(w,I,b)=>{let T=()=>Oe(Oe(I)).src;var _=e1();rn(_,"lazy",!0);var U=O(_);M(_),Et(()=>{yt(U,"src",T()),La(U,"width","100%")}),Ee(w,_)}),M(v),Ee(N,v)},$$slots:{default:!0}})}),M(g),Et(()=>{La(g,"--swiper-container-opacity",me(d)),La(S,"max-height",me(i))}),Ee(n,g),Bt()}ys(["click"]);var Nh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},s1=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],o=n[t++],c=n[t++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=n[t++],o=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},Af={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,c=o?n[s+1]:0,l=s+2<n.length,u=l?n[s+2]:0,d=r>>2,p=(r&3)<<4|c>>4;let m=(c&15)<<2|u>>6,g=u&63;l||(g=64,o||(m=64)),i.push(t[d],t[p],t[m],t[g])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kf(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):s1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const p=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||c==null||u==null||p==null)throw new r1;const m=r<<2|c>>4;if(i.push(m),u!==64){const g=c<<4&240|u>>2;if(i.push(g),p!==64){const x=u<<6&192|p;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class r1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o1=function(n){const e=kf(n);return Af.encodeByteArray(e,!0)},So=function(n){return o1(n).replace(/\./g,"")},a1=function(n){try{return Af.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=()=>c1().__FIREBASE_DEFAULTS__,u1=()=>{if(typeof process>"u"||typeof Nh>"u")return;const n=Nh.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},h1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&a1(n[1]);return e&&JSON.parse(e)},Jc=()=>{try{return l1()||u1()||h1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},d1=n=>{var e,t;return(t=(e=Jc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},f1=n=>{const e=d1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Rf=()=>{var n;return(n=Jc())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n);return[So(JSON.stringify(t)),So(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y1(){var n;const e=(n=Jc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _1(){return!y1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sf(){try{return typeof indexedDB=="object"}catch{return!1}}function Pf(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}function w1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="FirebaseError";class Yn extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=b1,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ea.prototype.create)}}class ea{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?E1(r,i):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Yn(s,c,i)}}function E1(n,e){return n.replace(T1,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const T1=/\{\$([^}]+)}/g;function wc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],o=e[s];if(Lh(r)&&Lh(o)){if(!wc(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Lh(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=1e3,I1=2,C1=4*60*60*1e3,k1=.5;function Fh(n,e=x1,t=I1){const i=e*Math.pow(t,n),s=Math.round(k1*i*(Math.random()-.5)*2);return Math.min(C1,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n){return n&&n._delegate?n._delegate:n}class In{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new p1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S1(e))try{this.getOrInitializeService({instanceIdentifier:ai})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ai){return this.instances.has(e)}getOptions(e=ai){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(r);i===c&&o.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:R1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ai){return this.component?this.component.multipleInstances?e:ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function R1(n){return n===ai?void 0:n}function S1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new A1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(le||(le={}));const D1={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},M1=le.INFO,O1={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},V1=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=O1[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class el{constructor(e){this.name=e,this._logLevel=M1,this._logHandler=V1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const N1=(n,e)=>e.some(t=>n instanceof t);let zh,Bh;function L1(){return zh||(zh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F1(){return Bh||(Bh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Df=new WeakMap,bc=new WeakMap,Mf=new WeakMap,ec=new WeakMap,tl=new WeakMap;function z1(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(Fn(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Df.set(t,n)}).catch(()=>{}),tl.set(e,n),e}function B1(n){if(bc.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});bc.set(n,e)}let Ec={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bc.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Mf.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function j1(n){Ec=n(Ec)}function U1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(tc(this),e,...t);return Mf.set(i,e.sort?e.sort():[e]),Fn(i)}:F1().includes(n)?function(...e){return n.apply(tc(this),e),Fn(Df.get(this))}:function(...e){return Fn(n.apply(tc(this),e))}}function q1(n){return typeof n=="function"?U1(n):(n instanceof IDBTransaction&&B1(n),N1(n,L1())?new Proxy(n,Ec):n)}function Fn(n){if(n instanceof IDBRequest)return z1(n);if(ec.has(n))return ec.get(n);const e=q1(n);return e!==n&&(ec.set(n,e),tl.set(e,n)),e}const tc=n=>tl.get(n);function Of(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,e),c=Fn(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Fn(o.result),l.oldVersion,l.newVersion,Fn(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const $1=["get","getKey","getAll","getAllKeys","count"],H1=["put","add","delete","clear"],nc=new Map;function jh(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nc.get(e))return nc.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=H1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||$1.includes(t)))return;const r=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(c.shift())),(await Promise.all([u[t](...c),s&&l.done]))[0]};return nc.set(e,r),r}j1(n=>({...n,get:(e,t,i)=>jh(e,t)||n.get(e,t,i),has:(e,t)=>!!jh(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(G1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function G1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tc="@firebase/app",Uh="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new el("@firebase/app"),K1="@firebase/app-compat",Z1="@firebase/analytics-compat",Q1="@firebase/analytics",X1="@firebase/app-check-compat",Y1="@firebase/app-check",J1="@firebase/auth",eE="@firebase/auth-compat",tE="@firebase/database",nE="@firebase/database-compat",iE="@firebase/functions",sE="@firebase/functions-compat",rE="@firebase/installations",oE="@firebase/installations-compat",aE="@firebase/messaging",cE="@firebase/messaging-compat",lE="@firebase/performance",uE="@firebase/performance-compat",hE="@firebase/remote-config",dE="@firebase/remote-config-compat",fE="@firebase/storage",pE="@firebase/storage-compat",mE="@firebase/firestore",gE="@firebase/vertexai-preview",yE="@firebase/firestore-compat",vE="firebase",_E="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc="[DEFAULT]",wE={[Tc]:"fire-core",[K1]:"fire-core-compat",[Q1]:"fire-analytics",[Z1]:"fire-analytics-compat",[Y1]:"fire-app-check",[X1]:"fire-app-check-compat",[J1]:"fire-auth",[eE]:"fire-auth-compat",[tE]:"fire-rtdb",[nE]:"fire-rtdb-compat",[iE]:"fire-fn",[sE]:"fire-fn-compat",[rE]:"fire-iid",[oE]:"fire-iid-compat",[aE]:"fire-fcm",[cE]:"fire-fcm-compat",[lE]:"fire-perf",[uE]:"fire-perf-compat",[hE]:"fire-rc",[dE]:"fire-rc-compat",[fE]:"fire-gcs",[pE]:"fire-gcs-compat",[mE]:"fire-fst",[yE]:"fire-fst-compat",[gE]:"fire-vertex","fire-js":"fire-js",[vE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Map,bE=new Map,Ic=new Map;function qh(n,e){try{n.container.addComponent(e)}catch(t){Cn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $n(n){const e=n.name;if(Ic.has(e))return Cn.debug(`There were multiple attempts to register component ${e}.`),!1;Ic.set(e,n);for(const t of Po.values())qh(t,n);for(const t of bE.values())qh(t,n);return!0}function nl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zn=new ea("app","Firebase",EE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new In("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=_E;function Vf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:xc,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw zn.create("bad-app-name",{appName:String(s)});if(t||(t=Rf()),!t)throw zn.create("no-options");const r=Po.get(s);if(r){if(wc(t,r.options)&&wc(i,r.config))return r;throw zn.create("duplicate-app",{appName:s})}const o=new P1(s);for(const l of Ic.values())o.addComponent(l);const c=new TE(t,i,o);return Po.set(s,c),c}function IE(n=xc){const e=Po.get(n);if(!e&&n===xc&&Rf())return Vf();if(!e)throw zn.create("no-app",{appName:n});return e}function cn(n,e,t){var i;let s=(i=wE[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const c=[`Unable to register library "${s}" with version "${e}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cn.warn(c.join(" "));return}$n(new In(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebase-heartbeat-database",kE=1,or="firebase-heartbeat-store";let ic=null;function Nf(){return ic||(ic=Of(CE,kE,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(or)}catch(t){console.warn(t)}}}}).catch(n=>{throw zn.create("idb-open",{originalErrorMessage:n.message})})),ic}async function AE(n){try{const t=(await Nf()).transaction(or),i=await t.objectStore(or).get(Lf(n));return await t.done,i}catch(e){if(e instanceof Yn)Cn.warn(e.message);else{const t=zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cn.warn(t.message)}}}async function $h(n,e){try{const i=(await Nf()).transaction(or,"readwrite");await i.objectStore(or).put(e,Lf(n)),await i.done}catch(t){if(t instanceof Yn)Cn.warn(t.message);else{const i=zn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cn.warn(i.message)}}}function Lf(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=1024,SE=30*24*60*60*1e3;class PE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ME(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t,i;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Hh();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const l=new Date(c.date).valueOf();return Date.now()-l<=SE}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Cn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Hh(),{heartbeatsToSend:i,unsentEntries:s}=DE(this._heartbeatsCache.heartbeats),r=So(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Cn.warn(t),""}}}function Hh(){return new Date().toISOString().substring(0,10)}function DE(n,e=RE){const t=[];let i=n.slice();for(const s of n){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),Wh(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Wh(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class ME{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sf()?Pf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await AE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return $h(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return $h(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Wh(n){return So(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n){$n(new In("platform-logger",e=>new W1(e),"PRIVATE")),$n(new In("heartbeat",e=>new PE(e),"PRIVATE")),cn(Tc,Uh,n),cn(Tc,Uh,"esm2017"),cn("fire-js","")}OE("");var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,Ff;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,v){function w(){}w.prototype=v.prototype,C.D=v.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(I,b,T){for(var _=Array(arguments.length-2),U=2;U<arguments.length;U++)_[U-2]=arguments[U];return v.prototype[b].apply(I,_)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)I[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;16>b;++b)I[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=C.g[0],w=C.g[1],b=C.g[2];var T=C.g[3],_=v+(T^w&(b^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(b^v&(w^b))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=b+(w^T&(v^w))+I[2]+606105819&4294967295,b=T+(_<<17&4294967295|_>>>15),_=w+(v^b&(T^v))+I[3]+3250441966&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(T^w&(b^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(b^v&(w^b))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=b+(w^T&(v^w))+I[6]+2821735955&4294967295,b=T+(_<<17&4294967295|_>>>15),_=w+(v^b&(T^v))+I[7]+4249261313&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(T^w&(b^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(b^v&(w^b))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=b+(w^T&(v^w))+I[10]+4294925233&4294967295,b=T+(_<<17&4294967295|_>>>15),_=w+(v^b&(T^v))+I[11]+2304563134&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(T^w&(b^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(b^v&(w^b))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=b+(w^T&(v^w))+I[14]+2792965006&4294967295,b=T+(_<<17&4294967295|_>>>15),_=w+(v^b&(T^v))+I[15]+1236535329&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(b^T&(w^b))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^b&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(T^v))+I[11]+643717713&4294967295,b=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(b^T))+I[0]+3921069994&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(b^T&(w^b))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^b&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(T^v))+I[15]+3634488961&4294967295,b=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(b^T))+I[4]+3889429448&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(b^T&(w^b))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^b&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(T^v))+I[3]+4107603335&4294967295,b=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(b^T))+I[8]+1163531501&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(b^T&(w^b))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^b&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(T^v))+I[7]+1735328473&4294967295,b=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(b^T))+I[12]+2368359562&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(w^b^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^b)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=b+(T^v^w)+I[11]+1839030562&4294967295,b=T+(_<<16&4294967295|_>>>16),_=w+(b^T^v)+I[14]+4259657740&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(w^b^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^b)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=b+(T^v^w)+I[7]+4139469664&4294967295,b=T+(_<<16&4294967295|_>>>16),_=w+(b^T^v)+I[10]+3200236656&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(w^b^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^b)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=b+(T^v^w)+I[3]+3572445317&4294967295,b=T+(_<<16&4294967295|_>>>16),_=w+(b^T^v)+I[6]+76029189&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(w^b^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^b)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=b+(T^v^w)+I[15]+530742520&4294967295,b=T+(_<<16&4294967295|_>>>16),_=w+(b^T^v)+I[2]+3299628645&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(b^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~b))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=b+(v^(T|~w))+I[14]+2878612391&4294967295,b=T+(_<<15&4294967295|_>>>17),_=w+(T^(b|~v))+I[5]+4237533241&4294967295,w=b+(_<<21&4294967295|_>>>11),_=v+(b^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~b))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=b+(v^(T|~w))+I[10]+4293915773&4294967295,b=T+(_<<15&4294967295|_>>>17),_=w+(T^(b|~v))+I[1]+2240044497&4294967295,w=b+(_<<21&4294967295|_>>>11),_=v+(b^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~b))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=b+(v^(T|~w))+I[6]+2734768916&4294967295,b=T+(_<<15&4294967295|_>>>17),_=w+(T^(b|~v))+I[13]+1309151649&4294967295,w=b+(_<<21&4294967295|_>>>11),_=v+(b^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~b))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=b+(v^(T|~w))+I[2]+718787259&4294967295,b=T+(_<<15&4294967295|_>>>17),_=w+(T^(b|~v))+I[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+T&4294967295}i.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var w=v-this.blockSize,I=this.B,b=this.h,T=0;T<v;){if(b==0)for(;T<=w;)s(this,C,T),T+=this.blockSize;if(typeof C=="string"){for(;T<v;)if(I[b++]=C.charCodeAt(T++),b==this.blockSize){s(this,I),b=0;break}}else for(;T<v;)if(I[b++]=C[T++],b==this.blockSize){s(this,I),b=0;break}}this.h=b,this.o+=v},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var w=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=w&255,w/=256;for(this.u(C),C=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)C[w++]=this.g[v]>>>I&255;return C};function r(C,v){var w=c;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=v(C)}function o(C,v){this.h=v;for(var w=[],I=!0,b=C.length-1;0<=b;b--){var T=C[b]|0;I&&T==v||(w[b]=T,I=!1)}this.g=w}var c={};function l(C){return-128<=C&&128>C?r(C,function(v){return new o([v|0],0>v?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return k(u(-C));for(var v=[],w=1,I=0;C>=w;I++)v[I]=C/w|0,w*=4294967296;return new o(v,0)}function d(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return k(d(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(v,8)),I=p,b=0;b<C.length;b+=8){var T=Math.min(8,C.length-b),_=parseInt(C.substring(b,b+T),v);8>T?(T=u(Math.pow(v,T)),I=I.j(T).add(u(_))):(I=I.j(w),I=I.add(u(_)))}return I}var p=l(0),m=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(E(this))return-k(this).m();for(var C=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);C+=(0<=I?I:4294967296+I)*v,v*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x(this))return"0";if(E(this))return"-"+k(this).toString(C);for(var v=u(Math.pow(C,6)),w=this,I="";;){var b=V(w,v).g;w=S(w,b.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(C);if(w=b,x(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function x(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function E(C){return C.h==-1}n.l=function(C){return C=S(this,C),E(C)?-1:x(C)?0:1};function k(C){for(var v=C.g.length,w=[],I=0;I<v;I++)w[I]=~C.g[I];return new o(w,~C.h).add(m)}n.abs=function(){return E(this)?k(this):this},n.add=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],I=0,b=0;b<=v;b++){var T=I+(this.i(b)&65535)+(C.i(b)&65535),_=(T>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);I=_>>>16,T&=65535,_&=65535,w[b]=_<<16|T}return new o(w,w[w.length-1]&-2147483648?-1:0)};function S(C,v){return C.add(k(v))}n.j=function(C){if(x(this)||x(C))return p;if(E(this))return E(C)?k(this).j(k(C)):k(k(this).j(C));if(E(C))return k(this.j(k(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var v=this.g.length+C.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var b=0;b<C.g.length;b++){var T=this.i(I)>>>16,_=this.i(I)&65535,U=C.i(b)>>>16,ie=C.i(b)&65535;w[2*I+2*b]+=_*ie,D(w,2*I+2*b),w[2*I+2*b+1]+=T*ie,D(w,2*I+2*b+1),w[2*I+2*b+1]+=_*U,D(w,2*I+2*b+1),w[2*I+2*b+2]+=T*U,D(w,2*I+2*b+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new o(w,0)};function D(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function F(C,v){this.g=C,this.h=v}function V(C,v){if(x(v))throw Error("division by zero");if(x(C))return new F(p,p);if(E(C))return v=V(k(C),v),new F(k(v.g),k(v.h));if(E(v))return v=V(C,k(v)),new F(k(v.g),v.h);if(30<C.g.length){if(E(C)||E(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(C);)w=L(w),I=L(I);var b=N(w,1),T=N(I,1);for(I=N(I,2),w=N(w,2);!x(I);){var _=T.add(I);0>=_.l(C)&&(b=b.add(w),T=_),I=N(I,1),w=N(w,1)}return v=S(C,b.j(v)),new F(b,v)}for(b=p;0<=C.l(v);){for(w=Math.max(1,Math.floor(C.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=u(w),_=T.j(v);E(_)||0<_.l(C);)w-=I,T=u(w),_=T.j(v);x(T)&&(T=m),b=b.add(T),C=S(C,_)}return new F(b,C)}n.A=function(C){return V(this,C).h},n.and=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&C.i(I);return new o(w,this.h&C.h)},n.or=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|C.i(I);return new o(w,this.h|C.h)},n.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^C.i(I);return new o(w,this.h^C.h)};function L(C){for(var v=C.g.length+1,w=[],I=0;I<v;I++)w[I]=C.i(I)<<1|C.i(I-1)>>>31;return new o(w,C.h)}function N(C,v){var w=v>>5;v%=32;for(var I=C.g.length-w,b=[],T=0;T<I;T++)b[T]=0<v?C.i(T+w)>>>v|C.i(T+w+1)<<32-v:C.i(T+w);return new o(b,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Ff=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,yi=o}).apply(typeof Gh<"u"?Gh:typeof self<"u"?self:typeof window<"u"?window:{});var lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zf,Bf,js,jf,vo,Cc,Uf,qf,$f;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof lo=="object"&&lo];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=t(this);function s(a,h){if(h)e:{var f=i;a=a.split(".");for(var y=0;y<a.length-1;y++){var A=a[y];if(!(A in f))break e;f=f[A]}a=a[a.length-1],y=f[a],h=h(y),h!=y&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function r(a,h){a instanceof String&&(a+="");var f=0,y=!1,A={next:function(){if(!y&&f<a.length){var P=f++;return{value:h(P,a[P]),done:!1}}return y=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}s("Array.prototype.values",function(a){return a||function(){return r(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function l(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function u(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function d(a,h,f){return a.call.apply(a.bind,arguments)}function p(a,h,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,y),a.apply(h,A)}}return function(){return a.apply(h,arguments)}}function m(a,h,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function g(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function x(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,A,P){for(var q=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)q[ye-2]=arguments[ye];return h.prototype[A].apply(y,q)}}function E(a){const h=a.length;if(0<h){const f=Array(h);for(let y=0;y<h;y++)f[y]=a[y];return f}return[]}function k(a,h){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(l(y)){const A=a.length||0,P=y.length||0;a.length=A+P;for(let q=0;q<P;q++)a[A+q]=y[q]}else a.push(y)}}class S{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function D(a){return/^[\s\xa0]*$/.test(a)}function F(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function V(a){return V[" "](a),a}V[" "]=function(){};var L=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function N(a,h,f){for(const y in a)h.call(f,a[y],y,a)}function C(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function v(a){const h={};for(const f in a)h[f]=a[f];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,h){let f,y;for(let A=1;A<arguments.length;A++){y=arguments[A];for(f in y)a[f]=y[f];for(let P=0;P<w.length;P++)f=w[P],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function b(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function T(a){c.setTimeout(()=>{throw a},0)}function _(){var a=He;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class U{constructor(){this.h=this.g=null}add(h,f){const y=ie.get();y.set(h,f),this.h?this.h.next=y:this.g=y,this.h=y}}var ie=new S(()=>new Re,a=>a.reset());class Re{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,$e=!1,He=new U,Tt=()=>{const a=c.Promise.resolve(void 0);Ie=()=>{a.then(sn)}};var sn=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(f){T(f)}var h=ie;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$e=!1};function We(){this.s=this.s,this.C=this.C}We.prototype.s=!1,We.prototype.ma=function(){this.s||(this.s=!0,this.N())},We.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ge=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return a}();function et(a,h){if(pe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(L){e:{try{V(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Dt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&et.aa.h.call(this)}}x(et,pe);var Dt={2:"touch",3:"pen",4:"mouse"};et.prototype.h=function(){et.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),Se=0;function ft(a,h,f,y,A){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!y,this.ha=A,this.key=++Se,this.da=this.fa=!1}function xt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function It(a){this.src=a,this.g={},this.h=0}It.prototype.add=function(a,h,f,y,A){var P=a.toString();a=this.g[P],a||(a=this.g[P]=[],this.h++);var q=ge(a,h,y,A);return-1<q?(h=a[q],f||(h.fa=!1)):(h=new ft(h,this.src,P,!!y,A),h.fa=f,a.push(h)),h};function Ct(a,h){var f=h.type;if(f in a.g){var y=a.g[f],A=Array.prototype.indexOf.call(y,h,void 0),P;(P=0<=A)&&Array.prototype.splice.call(y,A,1),P&&(xt(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ge(a,h,f,y){for(var A=0;A<a.length;++A){var P=a[A];if(!P.da&&P.listener==h&&P.capture==!!f&&P.ha==y)return A}return-1}var ue="closure_lm_"+(1e6*Math.random()|0),Be={};function Ut(a,h,f,y,A){if(Array.isArray(h)){for(var P=0;P<h.length;P++)Ut(a,h[P],f,y,A);return null}return f=jl(f),a&&a[Ce]?a.K(h,f,u(y)?!!y.capture:!!y,A):Lr(a,h,f,!1,y,A)}function Lr(a,h,f,y,A,P){if(!h)throw Error("Invalid event type");var q=u(A)?!!A.capture:!!A,ye=_a(a);if(ye||(a[ue]=ye=new It(a)),f=ye.add(h,f,y,q,P),f.proxy)return f;if(y=Lm(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)Ge||(A=q),A===void 0&&(A=!1),a.addEventListener(h.toString(),y,A);else if(a.attachEvent)a.attachEvent(Bl(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Lm(){function a(f){return h.call(a.src,a.listener,f)}const h=Fm;return a}function zl(a,h,f,y,A){if(Array.isArray(h))for(var P=0;P<h.length;P++)zl(a,h[P],f,y,A);else y=u(y)?!!y.capture:!!y,f=jl(f),a&&a[Ce]?(a=a.i,h=String(h).toString(),h in a.g&&(P=a.g[h],f=ge(P,f,y,A),-1<f&&(xt(P[f]),Array.prototype.splice.call(P,f,1),P.length==0&&(delete a.g[h],a.h--)))):a&&(a=_a(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ge(h,f,y,A)),(f=-1<a?h[a]:null)&&va(f))}function va(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ce])Ct(h.i,a);else{var f=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(f,y,a.capture):h.detachEvent?h.detachEvent(Bl(f),y):h.addListener&&h.removeListener&&h.removeListener(y),(f=_a(h))?(Ct(f,a),f.h==0&&(f.src=null,h[ue]=null)):xt(a)}}}function Bl(a){return a in Be?Be[a]:Be[a]="on"+a}function Fm(a,h){if(a.da)a=!0;else{h=new et(h,this);var f=a.listener,y=a.ha||a.src;a.fa&&va(a),a=f.call(y,h)}return a}function _a(a){return a=a[ue],a instanceof It?a:null}var wa="__closure_events_fn_"+(1e9*Math.random()>>>0);function jl(a){return typeof a=="function"?a:(a[wa]||(a[wa]=function(h){return a.handleEvent(h)}),a[wa])}function tt(){We.call(this),this.i=new It(this),this.M=this,this.F=null}x(tt,We),tt.prototype[Ce]=!0,tt.prototype.removeEventListener=function(a,h,f,y){zl(this,a,h,f,y)};function pt(a,h){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new pe(h,a);else if(h instanceof pe)h.target=h.target||a;else{var A=h;h=new pe(y,a),I(h,A)}if(A=!0,f)for(var P=f.length-1;0<=P;P--){var q=h.g=f[P];A=Fr(q,y,!0,h)&&A}if(q=h.g=a,A=Fr(q,y,!0,h)&&A,A=Fr(q,y,!1,h)&&A,f)for(P=0;P<f.length;P++)q=h.g=f[P],A=Fr(q,y,!1,h)&&A}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],y=0;y<f.length;y++)xt(f[y]);delete a.g[h],a.h--}}this.F=null},tt.prototype.K=function(a,h,f,y){return this.i.add(String(a),h,!1,f,y)},tt.prototype.L=function(a,h,f,y){return this.i.add(String(a),h,!0,f,y)};function Fr(a,h,f,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,P=0;P<h.length;++P){var q=h[P];if(q&&!q.da&&q.capture==f){var ye=q.listener,Ke=q.ha||q.src;q.fa&&Ct(a.i,q),A=ye.call(Ke,y)!==!1&&A}}return A&&!y.defaultPrevented}function Ul(a,h,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function ql(a){a.g=Ul(()=>{a.g=null,a.i&&(a.i=!1,ql(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class zm extends We{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ql(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(a){We.call(this),this.h=a,this.g={}}x(Es,We);var $l=[];function Hl(a){N(a.g,function(h,f){this.g.hasOwnProperty(f)&&va(h)},a),a.g={}}Es.prototype.N=function(){Es.aa.N.call(this),Hl(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ba=c.JSON.stringify,Bm=c.JSON.parse,jm=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Ea(){}Ea.prototype.h=null;function Wl(a){return a.h||(a.h=a.i())}function Gl(){}var Ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ta(){pe.call(this,"d")}x(Ta,pe);function xa(){pe.call(this,"c")}x(xa,pe);var Jn={},Kl=null;function zr(){return Kl=Kl||new tt}Jn.La="serverreachability";function Zl(a){pe.call(this,Jn.La,a)}x(Zl,pe);function xs(a){const h=zr();pt(h,new Zl(h))}Jn.STAT_EVENT="statevent";function Ql(a,h){pe.call(this,Jn.STAT_EVENT,a),this.stat=h}x(Ql,pe);function mt(a){const h=zr();pt(h,new Ql(h,a))}Jn.Ma="timingevent";function Xl(a,h){pe.call(this,Jn.Ma,a),this.size=h}x(Xl,pe);function Is(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function Cs(){this.g=!0}Cs.prototype.xa=function(){this.g=!1};function Um(a,h,f,y,A,P){a.info(function(){if(a.g)if(P)for(var q="",ye=P.split("&"),Ke=0;Ke<ye.length;Ke++){var he=ye[Ke].split("=");if(1<he.length){var nt=he[0];he=he[1];var it=nt.split("_");q=2<=it.length&&it[1]=="type"?q+(nt+"="+he+"&"):q+(nt+"=redacted&")}}else q=null;else q=P;return"XMLHTTP REQ ("+y+") [attempt "+A+"]: "+h+`
`+f+`
`+q})}function qm(a,h,f,y,A,P,q){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+A+"]: "+h+`
`+f+`
`+P+" "+q})}function Mi(a,h,f,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Hm(a,f)+(y?" "+y:"")})}function $m(a,h){a.info(function(){return"TIMEOUT: "+h})}Cs.prototype.info=function(){};function Hm(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var A=y[1];if(Array.isArray(A)&&!(1>A.length)){var P=A[0];if(P!="noop"&&P!="stop"&&P!="close")for(var q=1;q<A.length;q++)A[q]=""}}}}return ba(f)}catch{return h}}var Br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ia;function jr(){}x(jr,Ea),jr.prototype.g=function(){return new XMLHttpRequest},jr.prototype.i=function(){return{}},Ia=new jr;function Sn(a,h,f,y){this.j=a,this.i=h,this.l=f,this.R=y||1,this.U=new Es(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jl}function Jl(){this.i=null,this.g="",this.h=!1}var eu={},Ca={};function ka(a,h,f){a.L=1,a.v=Hr(_n(h)),a.m=f,a.P=!0,tu(a,null)}function tu(a,h){a.F=Date.now(),Ur(a),a.A=_n(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),mu(f.i,"t",y),a.C=0,f=a.j.J,a.h=new Jl,a.g=Mu(a.j,f?h:null,!a.m),0<a.O&&(a.M=new zm(m(a.Y,a,a.g),a.O)),h=a.U,f=a.g,y=a.ca;var A="readystatechange";Array.isArray(A)||(A&&($l[0]=A.toString()),A=$l);for(var P=0;P<A.length;P++){var q=Ut(f,A[P],y||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),xs(),Um(a.i,a.u,a.A,a.l,a.R,a.m)}Sn.prototype.ca=function(a){a=a.target;const h=this.M;h&&wn(a)==3?h.j():this.Y(a)},Sn.prototype.Y=function(a){try{if(a==this.g)e:{const it=wn(this.g);var h=this.g.Ba();const Ni=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||Eu(this.g)))){this.J||it!=4||h==7||(h==8||0>=Ni?xs(3):xs(2)),Aa(this);var f=this.g.Z();this.X=f;t:if(nu(this)){var y=Eu(this.g);a="";var A=y.length,P=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),ks(this);var q="";break t}this.h.i=new c.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(P&&h==A-1)});y.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,qm(this.i,this.u,this.A,this.l,this.R,it,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Ke=this.g;if((ye=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(ye)){var he=ye;break t}}he=null}if(f=he)Mi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ra(this,f);else{this.o=!1,this.s=3,mt(12),ei(this),ks(this);break e}}if(this.P){f=!0;let qt;for(;!this.J&&this.C<q.length;)if(qt=Wm(this,q),qt==Ca){it==4&&(this.s=4,mt(14),f=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==eu){this.s=4,mt(15),Mi(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else Mi(this.i,this.l,qt,null),Ra(this,qt);if(nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||q.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)Mi(this.i,this.l,q,"[Invalid Chunked Response]"),ei(this),ks(this);else if(0<q.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Va(nt),nt.M=!0,mt(11))}}else Mi(this.i,this.l,q,null),Ra(this,q);it==4&&ei(this),this.o&&!this.J&&(it==4?Ru(this.j,this):(this.o=!1,Ur(this)))}else lg(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),ei(this),ks(this)}}}catch{}finally{}};function nu(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Wm(a,h){var f=a.C,y=h.indexOf(`
`,f);return y==-1?Ca:(f=Number(h.substring(f,y)),isNaN(f)?eu:(y+=1,y+f>h.length?Ca:(h=h.slice(y,y+f),a.C=y+f,h)))}Sn.prototype.cancel=function(){this.J=!0,ei(this)};function Ur(a){a.S=Date.now()+a.I,iu(a,a.I)}function iu(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Is(m(a.ba,a),h)}function Aa(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Sn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?($m(this.i,this.A),this.L!=2&&(xs(),mt(17)),ei(this),this.s=2,ks(this)):iu(this,this.S-a)};function ks(a){a.j.G==0||a.J||Ru(a.j,a)}function ei(a){Aa(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Hl(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Ra(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Sa(f.h,a))){if(!a.K&&Sa(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var A=y;if(A[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Qr(f),Kr(f);else break e;Oa(f),mt(18)}}else f.za=A[1],0<f.za-f.T&&37500>A[2]&&f.F&&f.v==0&&!f.C&&(f.C=Is(m(f.Za,f),6e3));if(1>=ou(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ni(f,11)}else if((a.K||f.g==a)&&Qr(f),!D(h))for(A=f.Da.g.parse(h),h=0;h<A.length;h++){let he=A[h];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];const nt=he[3];nt!=null&&(f.la=nt,f.j.info("VER="+f.la));const it=he[4];it!=null&&(f.Aa=it,f.j.info("SVER="+f.Aa));const Ni=he[5];Ni!=null&&typeof Ni=="number"&&0<Ni&&(y=1.5*Ni,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const qt=a.g;if(qt){const Yr=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yr){var P=y.h;P.g||Yr.indexOf("spdy")==-1&&Yr.indexOf("quic")==-1&&Yr.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Pa(P,P.h),P.h=null))}if(y.D){const Na=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Na&&(y.ya=Na,_e(y.I,y.D,Na))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var q=a;if(y.qa=Du(y,y.J?y.ia:null,y.W),q.K){au(y.h,q);var ye=q,Ke=y.L;Ke&&(ye.I=Ke),ye.B&&(Aa(ye),Ur(ye)),y.g=q}else ku(y);0<f.i.length&&Zr(f)}else he[0]!="stop"&&he[0]!="close"||ni(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?ni(f,7):Ma(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}xs(4)}catch{}}var Gm=class{constructor(a,h){this.g=a,this.map=h}};function su(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ru(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ou(a){return a.h?1:a.g?a.g.size:0}function Sa(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Pa(a,h){a.g?a.g.add(h):a.h=h}function au(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}su.prototype.cancel=function(){if(this.i=cu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function cu(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return E(a.i)}function Km(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var h=[],f=a.length,y=0;y<f;y++)h.push(a[y]);return h}h=[],f=0;for(y in a)h[f++]=a[y];return h}function Zm(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const y in a)h[f++]=y;return h}}}function lu(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=Zm(a),y=Km(a),A=y.length,P=0;P<A;P++)h.call(void 0,y[P],f&&f[P],a)}var uu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qm(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),A=null;if(0<=y){var P=a[f].substring(0,y);A=a[f].substring(y+1)}else P=a[f];h(P,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function ti(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ti){this.h=a.h,qr(this,a.j),this.o=a.o,this.g=a.g,$r(this,a.s),this.l=a.l;var h=a.i,f=new Ss;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),hu(this,f),this.m=a.m}else a&&(h=String(a).match(uu))?(this.h=!1,qr(this,h[1]||"",!0),this.o=As(h[2]||""),this.g=As(h[3]||"",!0),$r(this,h[4]),this.l=As(h[5]||"",!0),hu(this,h[6]||"",!0),this.m=As(h[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}ti.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Rs(h,du,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Rs(h,du,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Rs(f,f.charAt(0)=="/"?Jm:Ym,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Rs(f,tg)),a.join("")};function _n(a){return new ti(a)}function qr(a,h,f){a.j=f?As(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function $r(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function hu(a,h,f){h instanceof Ss?(a.i=h,ng(a.i,a.h)):(f||(h=Rs(h,eg)),a.i=new Ss(h,a.h))}function _e(a,h,f){a.i.set(h,f)}function Hr(a){return _e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function As(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Rs(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,Xm),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xm(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var du=/[#\/\?@]/g,Ym=/[#\?:]/g,Jm=/[#\?]/g,eg=/[#\?@]/g,tg=/#/g;function Ss(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Pn(a){a.g||(a.g=new Map,a.h=0,a.i&&Qm(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}n=Ss.prototype,n.add=function(a,h){Pn(this),this.i=null,a=Oi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function fu(a,h){Pn(a),h=Oi(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function pu(a,h){return Pn(a),h=Oi(a,h),a.g.has(h)}n.forEach=function(a,h){Pn(this),this.g.forEach(function(f,y){f.forEach(function(A){a.call(h,A,y,this)},this)},this)},n.na=function(){Pn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let y=0;y<h.length;y++){const A=a[y];for(let P=0;P<A.length;P++)f.push(h[y])}return f},n.V=function(a){Pn(this);let h=[];if(typeof a=="string")pu(this,a)&&(h=h.concat(this.g.get(Oi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},n.set=function(a,h){return Pn(this),this.i=null,a=Oi(this,a),pu(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},n.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function mu(a,h,f){fu(a,h),0<f.length&&(a.i=null,a.g.set(Oi(a,h),E(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var y=h[f];const P=encodeURIComponent(String(y)),q=this.V(y);for(y=0;y<q.length;y++){var A=P;q[y]!==""&&(A+="="+encodeURIComponent(String(q[y]))),a.push(A)}}return this.i=a.join("&")};function Oi(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function ng(a,h){h&&!a.j&&(Pn(a),a.i=null,a.g.forEach(function(f,y){var A=y.toLowerCase();y!=A&&(fu(this,y),mu(this,A,f))},a)),a.j=h}function ig(a,h){const f=new Cs;if(c.Image){const y=new Image;y.onload=g(Dn,f,"TestLoadImage: loaded",!0,h,y),y.onerror=g(Dn,f,"TestLoadImage: error",!1,h,y),y.onabort=g(Dn,f,"TestLoadImage: abort",!1,h,y),y.ontimeout=g(Dn,f,"TestLoadImage: timeout",!1,h,y),c.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function sg(a,h){const f=new Cs,y=new AbortController,A=setTimeout(()=>{y.abort(),Dn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(P=>{clearTimeout(A),P.ok?Dn(f,"TestPingServer: ok",!0,h):Dn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),Dn(f,"TestPingServer: error",!1,h)})}function Dn(a,h,f,y,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),y(f)}catch{}}function rg(){this.g=new jm}function og(a,h,f){const y=f||"";try{lu(a,function(A,P){let q=A;u(A)&&(q=ba(A)),h.push(y+P+"="+encodeURIComponent(q))})}catch(A){throw h.push(y+"type="+encodeURIComponent("_badmap")),A}}function Ps(a){this.l=a.Ub||null,this.j=a.eb||!1}x(Ps,Ea),Ps.prototype.g=function(){return new Wr(this.l,this.j)},Ps.prototype.i=function(a){return function(){return a}}({});function Wr(a,h){tt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Wr,tt),n=Wr.prototype,n.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ms(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ms(this)),this.g&&(this.readyState=3,Ms(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gu(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function gu(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ds(this):Ms(this),this.readyState==3&&gu(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Ds(this))},n.Qa=function(a){this.g&&(this.response=a,Ds(this))},n.ga=function(){this.g&&Ds(this)};function Ds(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ms(a)}n.setRequestHeader=function(a,h){this.u.append(a,h)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Ms(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function yu(a){let h="";return N(a,function(f,y){h+=y,h+=":",h+=f,h+=`\r
`}),h}function Da(a,h,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=yu(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):_e(a,h,f))}function ke(a){tt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ke,tt);var ag=/^https?$/i,cg=["POST","PUT"];n=ke.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,h,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ia.g(),this.v=this.o?Wl(this.o):Wl(Ia),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(P){vu(this,P);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var A in y)f.set(A,y[A]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const P of y.keys())f.set(P,y.get(P));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(cg,h,void 0))||y||A||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,q]of f)this.g.setRequestHeader(P,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bu(this),this.u=!0,this.g.send(a),this.u=!1}catch(P){vu(this,P)}};function vu(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,_u(a),Gr(a)}function _u(a){a.A||(a.A=!0,pt(a,"complete"),pt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,pt(this,"complete"),pt(this,"abort"),Gr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gr(this,!0)),ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wu(this):this.bb())},n.bb=function(){wu(this)};function wu(a){if(a.h&&typeof o<"u"&&(!a.v[1]||wn(a)!=4||a.Z()!=2)){if(a.u&&wn(a)==4)Ul(a.Ea,0,a);else if(pt(a,"readystatechange"),wn(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var y;if(y=q===0){var A=String(a.D).match(uu)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),y=!ag.test(A?A.toLowerCase():"")}f=y}if(f)pt(a,"complete"),pt(a,"success");else{a.m=6;try{var P=2<wn(a)?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.Z()+"]",_u(a)}}finally{Gr(a)}}}}function Gr(a,h){if(a.g){bu(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||pt(a,"ready");try{f.onreadystatechange=y}catch{}}}function bu(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function wn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Bm(h)}};function Eu(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function lg(a){const h={};a=(a.g&&2<=wn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(D(a[y]))continue;var f=b(a[y]);const A=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const P=h[A]||[];h[A]=P,P.push(f)}C(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function Tu(a){this.Aa=0,this.i=[],this.j=new Cs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,a),this.cb=Os("retryDelaySeedMs",1e4,a),this.Wa=Os("forwardChannelMaxRetries",2,a),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new su(a&&a.concurrentRequestLimit),this.Da=new rg,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Tu.prototype,n.la=8,n.G=1,n.connect=function(a,h,f,y){mt(0),this.W=a,this.H=h||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=Du(this,null,this.W),Zr(this)};function Ma(a){if(xu(a),a.G==3){var h=a.U++,f=_n(a.I);if(_e(f,"SID",a.K),_e(f,"RID",h),_e(f,"TYPE","terminate"),Vs(a,f),h=new Sn(a,a.j,h),h.L=2,h.v=Hr(_n(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=Mu(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ur(h)}Pu(a)}function Kr(a){a.g&&(Va(a),a.g.cancel(),a.g=null)}function xu(a){Kr(a),a.u&&(c.clearTimeout(a.u),a.u=null),Qr(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Zr(a){if(!ru(a.h)&&!a.s){a.s=!0;var h=a.Ga;Ie||Tt(),$e||(Ie(),$e=!0),He.add(h,a),a.B=0}}function ug(a,h){return ou(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Is(m(a.Ga,a,h),Su(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const A=new Sn(this,this.j,a);let P=this.o;if(this.S&&(P?(P=v(P),I(P,this.S)):P=this.S),this.m!==null||this.O||(A.H=P,P=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Cu(this,A,h),f=_n(this.I),_e(f,"RID",a),_e(f,"CVER",22),this.D&&_e(f,"X-HTTP-Session-Id",this.D),Vs(this,f),P&&(this.O?h="headers="+encodeURIComponent(String(yu(P)))+"&"+h:this.m&&Da(f,this.m,P)),Pa(this.h,A),this.Ua&&_e(f,"TYPE","init"),this.P?(_e(f,"$req",h),_e(f,"SID","null"),A.T=!0,ka(A,f,null)):ka(A,f,h),this.G=2}}else this.G==3&&(a?Iu(this,a):this.i.length==0||ru(this.h)||Iu(this))};function Iu(a,h){var f;h?f=h.l:f=a.U++;const y=_n(a.I);_e(y,"SID",a.K),_e(y,"RID",f),_e(y,"AID",a.T),Vs(a,y),a.m&&a.o&&Da(y,a.m,a.o),f=new Sn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Cu(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Pa(a.h,f),ka(f,y,h)}function Vs(a,h){a.H&&N(a.H,function(f,y){_e(h,y,f)}),a.l&&lu({},function(f,y){_e(h,y,f)})}function Cu(a,h,f){f=Math.min(a.i.length,f);var y=a.l?m(a.l.Na,a.l,a):null;e:{var A=a.i;let P=-1;for(;;){const q=["count="+f];P==-1?0<f?(P=A[0].g,q.push("ofs="+P)):P=0:q.push("ofs="+P);let ye=!0;for(let Ke=0;Ke<f;Ke++){let he=A[Ke].g;const nt=A[Ke].map;if(he-=P,0>he)P=Math.max(0,A[Ke].g-100),ye=!1;else try{og(nt,q,"req"+he+"_")}catch{y&&y(nt)}}if(ye){y=q.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,y}function ku(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Ie||Tt(),$e||(Ie(),$e=!0),He.add(h,a),a.v=0}}function Oa(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Is(m(a.Fa,a),Su(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Is(m(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Kr(this),Au(this))};function Va(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Au(a){a.g=new Sn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=_n(a.qa);_e(h,"RID","rpc"),_e(h,"SID",a.K),_e(h,"AID",a.T),_e(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&_e(h,"TO",a.ja),_e(h,"TYPE","xmlhttp"),Vs(a,h),a.m&&a.o&&Da(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Hr(_n(h)),f.m=null,f.P=!0,tu(f,a)}n.Za=function(){this.C!=null&&(this.C=null,Kr(this),Oa(this),mt(19))};function Qr(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Ru(a,h){var f=null;if(a.g==h){Qr(a),Va(a),a.g=null;var y=2}else if(Sa(a.h,h))f=h.D,au(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var A=a.B;y=zr(),pt(y,new Xl(y,f)),Zr(a)}else ku(a);else if(A=h.s,A==3||A==0&&0<h.X||!(y==1&&ug(a,h)||y==2&&Oa(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),A){case 1:ni(a,5);break;case 4:ni(a,10);break;case 3:ni(a,6);break;default:ni(a,2)}}}function Su(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function ni(a,h){if(a.j.info("Error code "+h),h==2){var f=m(a.fb,a),y=a.Xa;const A=!y;y=new ti(y||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qr(y,"https"),Hr(y),A?ig(y.toString(),f):sg(y.toString(),f)}else mt(2);a.G=0,a.l&&a.l.sa(h),Pu(a),xu(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Pu(a){if(a.G=0,a.ka=[],a.l){const h=cu(a.h);(h.length!=0||a.i.length!=0)&&(k(a.ka,h),k(a.ka,a.i),a.h.i.length=0,E(a.i),a.i.length=0),a.l.ra()}}function Du(a,h,f){var y=f instanceof ti?_n(f):new ti(f);if(y.g!="")h&&(y.g=h+"."+y.g),$r(y,y.s);else{var A=c.location;y=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var P=new ti(null);y&&qr(P,y),h&&(P.g=h),A&&$r(P,A),f&&(P.l=f),y=P}return f=a.D,h=a.ya,f&&h&&_e(y,f,h),_e(y,"VER",a.la),Vs(a,y),y}function Mu(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ke(new Ps({eb:f})):new ke(a.pa),h.Ha(a.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ou(){}n=Ou.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xr(){}Xr.prototype.g=function(a,h){return new kt(a,h)};function kt(a,h){tt.call(this),this.g=new Tu(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!D(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!D(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Vi(this)}x(kt,tt),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Ma(this.g)},kt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=ba(a),a=f);h.i.push(new Gm(h.Ya++,a)),h.G==3&&Zr(h)},kt.prototype.N=function(){this.g.l=null,delete this.j,Ma(this.g),delete this.g,kt.aa.N.call(this)};function Vu(a){Ta.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}x(Vu,Ta);function Nu(){xa.call(this),this.status=1}x(Nu,xa);function Vi(a){this.g=a}x(Vi,Ou),Vi.prototype.ua=function(){pt(this.g,"a")},Vi.prototype.ta=function(a){pt(this.g,new Vu(a))},Vi.prototype.sa=function(a){pt(this.g,new Nu)},Vi.prototype.ra=function(){pt(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,$f=function(){return new Xr},qf=function(){return zr()},Uf=Jn,Cc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,vo=Br,Yl.COMPLETE="complete",jf=Yl,Gl.EventType=Ts,Ts.OPEN="a",Ts.CLOSE="b",Ts.ERROR="c",Ts.MESSAGE="d",tt.prototype.listen=tt.prototype.K,js=Gl,Bf=Ps,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,zf=ke}).apply(typeof lo<"u"?lo:typeof self<"u"?self:typeof window<"u"?window:{});const Kh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vs="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new el("@firebase/firestore");function Bs(){return Ti.logLevel}function W(n,...e){if(Ti.logLevel<=le.DEBUG){const t=e.map(il);Ti.debug(`Firestore (${vs}): ${n}`,...t)}}function kn(n,...e){if(Ti.logLevel<=le.ERROR){const t=e.map(il);Ti.error(`Firestore (${vs}): ${n}`,...t)}}function as(n,...e){if(Ti.logLevel<=le.WARN){const t=e.map(il);Ti.warn(`Firestore (${vs}): ${n}`,...t)}}function il(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(n="Unexpected state"){const e=`FIRESTORE (${vs}) INTERNAL ASSERTION FAILED: `+n;throw kn(e),new Error(e)}function ve(n,e){n||J()}function te(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Yn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ot.UNAUTHENTICATED))}shutdown(){}}class NE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class LE{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let r=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Bn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},c=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Bn)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string"),new Hf(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new ot(e)}}class FE{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zE{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new FE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jE{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=r=>{r.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string"),this.R=t.token,new BE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=UE(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%e.length))}return i}}function de(n,e){return n<e?-1:n>e?1:0}function cs(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Le(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Le(0,0))}static max(){return new ee(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,t,i){t===void 0?t=0:t>e.length&&J(),i===void 0?i=e.length-t:i>e.length-t&&J(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=e.get(s),o=t.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class be extends ar{construct(e,t,i){return new be(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Z(B.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new be(t)}static emptyPath(){return new be([])}}const qE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends ar{construct(e,t,i){return new Xe(e,t,i)}static isValidIdentifier(e){return qE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Z(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(i+=c,s++):(r(),s++)}if(r(),o)throw new Z(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(t)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(be.fromString(e))}static fromName(e){return new Q(be.fromString(e).popFirst(5))}static empty(){return new Q(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new be(e.slice()))}}function $E(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(i===1e9?new Le(t+1,0):new Le(t,i));return new Hn(s,Q.empty(),e)}function HE(n){return new Hn(n.readTime,n.key,-1)}class Hn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Hn(ee.min(),Q.empty(),-1)}static max(){return new Hn(ee.max(),Q.empty(),-1)}}function WE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:de(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sr(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==GE)throw n;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):z.reject(t)}static resolve(e){return new z((t,i)=>{t(e)})}static reject(e){return new z((t,i)=>{i(e)})}static waitFor(e){return new z((t,i)=>{let s=0,r=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++r,o&&r===s&&t()},l=>i(l))}),o=!0,r===s&&t()})}static or(e){let t=z.resolve(!1);for(const i of e)t=t.next(s=>s?z.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,r)=>{i.push(t.call(this,s,r))}),this.waitFor(i)}static mapArray(e,t){return new z((i,s)=>{const r=e.length,o=new Array(r);let c=0;for(let l=0;l<r;l++){const u=l;t(e[u]).next(d=>{o[u]=d,++c,c===r&&i(o)},d=>s(d))}})}static doWhile(e,t){return new z((i,s)=>{const r=()=>{e()===!0?t().next(()=>{r()},s):i()};r()})}}function ZE(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Pr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sl.oe=-1;function ta(n){return n==null}function Do(n){return n===0&&1/n==-1/0}function QE(n){return typeof n=="number"&&Number.isInteger(n)&&!Do(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _s(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Gf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,t){this.comparator=e,this.root=t||Qe.EMPTY}insert(e,t){return new xe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uo(this.root,e,this.comparator,!1)}getReverseIterator(){return new uo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uo(this.root,e,this.comparator,!0)}}class uo{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??Qe.RED,this.left=s??Qe.EMPTY,this.right=r??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new Qe(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Qe.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,t,i,s,r){return this}insert(e,t,i){return new Qe(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qh(this.data.getIterator())}getIteratorFrom(e){return new Qh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ye(this.comparator);return t.data=e,t}}class Qh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Zt([])}unionWith(e){let t=new Ye(Xe.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Zt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cs(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Kf("Invalid base64 string: "+r):r}}(e);return new Je(t)}static fromUint8Array(e){const t=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(e);return new Je(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const XE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wn(n){if(ve(!!n),typeof n=="string"){let e=0;const t=XE.exec(n);if(ve(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pe(n.seconds),nanos:Pe(n.nanos)}}function Pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xi(n){return typeof n=="string"?Je.fromBase64String(n):Je.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ol(n){const e=n.mapValue.fields.__previous_value__;return rl(e)?ol(e):e}function cr(n){const e=Wn(n.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t,i,s,r,o,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u}}class lr{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new lr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof lr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ii(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rl(n)?4:eT(n)?9007199254740991:JE(n)?10:11:J()}function fn(n,e){if(n===e)return!0;const t=Ii(n);if(t!==Ii(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cr(n).isEqual(cr(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=Wn(s.timestampValue),c=Wn(r.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,r){return xi(s.bytesValue).isEqual(xi(r.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,r){return Pe(s.geoPointValue.latitude)===Pe(r.geoPointValue.latitude)&&Pe(s.geoPointValue.longitude)===Pe(r.geoPointValue.longitude)}(n,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Pe(s.integerValue)===Pe(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=Pe(s.doubleValue),c=Pe(r.doubleValue);return o===c?Do(o)===Do(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return cs(n.arrayValue.values||[],e.arrayValue.values||[],fn);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},c=r.mapValue.fields||{};if(Zh(o)!==Zh(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!fn(o[l],c[l])))return!1;return!0}(n,e);default:return J()}}function ur(n,e){return(n.values||[]).find(t=>fn(t,e))!==void 0}function ls(n,e){if(n===e)return 0;const t=Ii(n),i=Ii(e);if(t!==i)return de(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return de(n.booleanValue,e.booleanValue);case 2:return function(r,o){const c=Pe(r.integerValue||r.doubleValue),l=Pe(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Xh(n.timestampValue,e.timestampValue);case 4:return Xh(cr(n),cr(e));case 5:return de(n.stringValue,e.stringValue);case 6:return function(r,o){const c=xi(r),l=xi(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(r,o){const c=r.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const d=de(c[u],l[u]);if(d!==0)return d}return de(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,o){const c=de(Pe(r.latitude),Pe(o.latitude));return c!==0?c:de(Pe(r.longitude),Pe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Yh(n.arrayValue,e.arrayValue);case 10:return function(r,o){var c,l,u,d;const p=r.fields||{},m=o.fields||{},g=(c=p.value)===null||c===void 0?void 0:c.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,E=de(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return E!==0?E:Yh(g,x)}(n.mapValue,e.mapValue);case 11:return function(r,o){if(r===ho.mapValue&&o===ho.mapValue)return 0;if(r===ho.mapValue)return 1;if(o===ho.mapValue)return-1;const c=r.fields||{},l=Object.keys(c),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const m=de(l[p],d[p]);if(m!==0)return m;const g=ls(c[l[p]],u[d[p]]);if(g!==0)return g}return de(l.length,d.length)}(n.mapValue,e.mapValue);default:throw J()}}function Xh(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return de(n,e);const t=Wn(n),i=Wn(e),s=de(t.seconds,i.seconds);return s!==0?s:de(t.nanos,i.nanos)}function Yh(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const r=ls(t[s],i[s]);if(r)return r}return de(t.length,i.length)}function us(n){return kc(n)}function kc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Wn(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const r of t.values||[])s?s=!1:i+=",",i+=kc(r);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${kc(t.fields[o])}`;return s+"}"}(n.mapValue):J()}function Ac(n){return!!n&&"integerValue"in n}function al(n){return!!n&&"arrayValue"in n}function Jh(n){return!!n&&"nullValue"in n}function ed(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _o(n){return!!n&&"mapValue"in n}function JE(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ks(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _s(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ks(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ks(n.arrayValue.values[t]);return e}return Object.assign({},n)}function eT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!_o(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ks(t)}setAll(e){let t=Xe.emptyPath(),i={},s=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){const l=this.getFieldsMap(t);this.applyChanges(l,i,s),i={},s=[],t=c.popLast()}o?i[c.lastSegment()]=Ks(o):s.push(c.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());_o(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];_o(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){_s(t,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Vt(Ks(this.value))}}function Zf(n){const e=[];return _s(n.fields,(t,i)=>{const s=new Xe([t]);if(_o(i)){const r=Zf(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t,i,s,r,o,c){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=c}static newInvalidDocument(e){return new at(e,0,ee.min(),ee.min(),ee.min(),Vt.empty(),0)}static newFoundDocument(e,t,i,s){return new at(e,1,t,ee.min(),i,s,0)}static newNoDocument(e,t){return new at(e,2,t,ee.min(),ee.min(),Vt.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,ee.min(),ee.min(),Vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t){this.position=e,this.inclusive=t}}function td(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],o=n.position[s];if(r.field.isKeyField()?i=Q.comparator(Q.fromName(o.referenceValue),t.key):i=ls(o,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function nd(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t="asc"){this.field=e,this.dir=t}}function tT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{}class ze extends Qf{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new iT(e,t,i):t==="array-contains"?new oT(e,i):t==="in"?new aT(e,i):t==="not-in"?new cT(e,i):t==="array-contains-any"?new lT(e,i):new ze(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new sT(e,i):new rT(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ls(t,this.value)):t!==null&&Ii(this.value)===Ii(t)&&this.matchesComparison(ls(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends Qf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new pn(e,t)}matches(e){return Xf(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xf(n){return n.op==="and"}function Yf(n){return nT(n)&&Xf(n)}function nT(n){for(const e of n.filters)if(e instanceof pn)return!1;return!0}function Rc(n){if(n instanceof ze)return n.field.canonicalString()+n.op.toString()+us(n.value);if(Yf(n))return n.filters.map(e=>Rc(e)).join(",");{const e=n.filters.map(t=>Rc(t)).join(",");return`${n.op}(${e})`}}function Jf(n,e){return n instanceof ze?function(i,s){return s instanceof ze&&i.op===s.op&&i.field.isEqual(s.field)&&fn(i.value,s.value)}(n,e):n instanceof pn?function(i,s){return s instanceof pn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,c)=>r&&Jf(o,s.filters[c]),!0):!1}(n,e):void J()}function ep(n){return n instanceof ze?function(t){return`${t.field.canonicalString()} ${t.op} ${us(t.value)}`}(n):n instanceof pn?function(t){return t.op.toString()+" {"+t.getFilters().map(ep).join(" ,")+"}"}(n):"Filter"}class iT extends ze{constructor(e,t,i){super(e,t,i),this.key=Q.fromName(i.referenceValue)}matches(e){const t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}}class sT extends ze{constructor(e,t){super(e,"in",t),this.keys=tp("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class rT extends ze{constructor(e,t){super(e,"not-in",t),this.keys=tp("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tp(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Q.fromName(i.referenceValue))}class oT extends ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return al(t)&&ur(t.arrayValue,this.value)}}class aT extends ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ur(this.value.arrayValue,t)}}class cT extends ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(ur(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ur(this.value.arrayValue,t)}}class lT extends ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!al(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ur(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,t=null,i=[],s=[],r=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=c,this.ue=null}}function id(n,e=null,t=[],i=[],s=null,r=null,o=null){return new uT(n,e,t,i,s,r,o)}function cl(n){const e=te(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Rc(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),ta(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>us(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>us(i)).join(",")),e.ue=t}return e.ue}function ll(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Jf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nd(n.startAt,e.startAt)&&nd(n.endAt,e.endAt)}function Sc(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t=null,i=[],s=[],r=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hT(n,e,t,i,s,r,o,c){return new na(n,e,t,i,s,r,o,c)}function np(n){return new na(n)}function sd(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dT(n){return n.collectionGroup!==null}function Zs(n){const e=te(n);if(e.ce===null){e.ce=[];const t=new Set;for(const r of e.explicitOrderBy)e.ce.push(r),t.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ye(Xe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(r=>{t.has(r.canonicalString())||r.isKeyField()||e.ce.push(new Oo(r,i))}),t.has(Xe.keyField().canonicalString())||e.ce.push(new Oo(Xe.keyField(),i))}return e.ce}function ln(n){const e=te(n);return e.le||(e.le=fT(e,Zs(n))),e.le}function fT(n,e){if(n.limitType==="F")return id(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Oo(s.field,r)});const t=n.endAt?new Mo(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Mo(n.startAt.position,n.startAt.inclusive):null;return id(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Pc(n,e,t){return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ia(n,e){return ll(ln(n),ln(e))&&n.limitType===e.limitType}function ip(n){return`${cl(ln(n))}|lt:${n.limitType}`}function Bi(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>ep(s)).join(", ")}]`),ta(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>us(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>us(s)).join(",")),`Target(${i})`}(ln(n))}; limitType=${n.limitType})`}function sa(n,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Q.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(n,e)&&function(i,s){for(const r of Zs(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(o,c,l){const u=td(o,c,l);return o.inclusive?u<=0:u<0}(i.startAt,Zs(i),s)||i.endAt&&!function(o,c,l){const u=td(o,c,l);return o.inclusive?u>=0:u>0}(i.endAt,Zs(i),s))}(n,e)}function pT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sp(n){return(e,t)=>{let i=!1;for(const s of Zs(n)){const r=mT(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function mT(n,e,t){const i=n.field.isKeyField()?Q.comparator(e.key,t.key):function(r,o,c){const l=o.data.field(r),u=c.data.field(r);return l!==null&&u!==null?ls(l,u):J()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,(t,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return Gf(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new xe(Q.comparator);function An(){return gT}const rp=new xe(Q.comparator);function Us(...n){let e=rp;for(const t of n)e=e.insert(t.key,t);return e}function op(n){let e=rp;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function pi(){return Qs()}function ap(){return Qs()}function Qs(){return new ws(n=>n.toString(),(n,e)=>n.isEqual(e))}const yT=new xe(Q.comparator),vT=new Ye(Q.comparator);function oe(...n){let e=vT;for(const t of n)e=e.add(t);return e}const _T=new Ye(de);function wT(){return _T}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Do(e)?"-0":e}}function cp(n){return{integerValue:""+n}}function bT(n,e){return QE(e)?cp(e):ul(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this._=void 0}}function ET(n,e,t){return n instanceof Vo?function(s,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&rl(r)&&(r=ol(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(t,e):n instanceof hr?up(n,e):n instanceof dr?hp(n,e):function(s,r){const o=lp(s,r),c=rd(o)+rd(s.Pe);return Ac(o)&&Ac(s.Pe)?cp(c):ul(s.serializer,c)}(n,e)}function TT(n,e,t){return n instanceof hr?up(n,e):n instanceof dr?hp(n,e):t}function lp(n,e){return n instanceof No?function(i){return Ac(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class Vo extends ra{}class hr extends ra{constructor(e){super(),this.elements=e}}function up(n,e){const t=dp(e);for(const i of n.elements)t.some(s=>fn(s,i))||t.push(i);return{arrayValue:{values:t}}}class dr extends ra{constructor(e){super(),this.elements=e}}function hp(n,e){let t=dp(e);for(const i of n.elements)t=t.filter(s=>!fn(s,i));return{arrayValue:{values:t}}}class No extends ra{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function rd(n){return Pe(n.integerValue||n.doubleValue)}function dp(n){return al(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function xT(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof hr&&s instanceof hr||i instanceof dr&&s instanceof dr?cs(i.elements,s.elements,fn):i instanceof No&&s instanceof No?fn(i.Pe,s.Pe):i instanceof Vo&&s instanceof Vo}(n.transform,e.transform)}class IT{constructor(e,t){this.version=e,this.transformResults=t}}class un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class oa{}function fp(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hl(n.key,un.none()):new Dr(n.key,n.data,un.none());{const t=n.data,i=Vt.empty();let s=new Ye(Xe.comparator);for(let r of e.fields)if(!s.has(r)){let o=t.field(r);o===null&&r.length>1&&(r=r.popLast(),o=t.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Pi(n.key,i,new Zt(s.toArray()),un.none())}}function CT(n,e,t){n instanceof Dr?function(s,r,o){const c=s.value.clone(),l=ad(s.fieldTransforms,r,o.transformResults);c.setAll(l),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Pi?function(s,r,o){if(!wo(s.precondition,r))return void r.convertToUnknownDocument(o.version);const c=ad(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(pp(s)),l.setAll(c),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Xs(n,e,t,i){return n instanceof Dr?function(r,o,c,l){if(!wo(r.precondition,o))return c;const u=r.value.clone(),d=cd(r.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,i):n instanceof Pi?function(r,o,c,l){if(!wo(r.precondition,o))return c;const u=cd(r.fieldTransforms,l,o),d=o.data;return d.setAll(pp(r)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),c===null?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(p=>p.field))}(n,e,t,i):function(r,o,c){return wo(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function kT(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=lp(i.transform,s||null);r!=null&&(t===null&&(t=Vt.empty()),t.set(i.field,r))}return t||null}function od(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&cs(i,s,(r,o)=>xT(r,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Dr extends oa{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Pi extends oa{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function pp(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function ad(n,e,t){const i=new Map;ve(n.length===t.length);for(let s=0;s<t.length;s++){const r=n[s],o=r.transform,c=e.data.field(r.field);i.set(r.field,TT(o,c,t[s]))}return i}function cd(n,e,t){const i=new Map;for(const s of n){const r=s.transform,o=t.data.field(s.field);i.set(s.field,ET(r,o,e))}return i}class hl extends oa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AT extends oa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&CT(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Xs(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Xs(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=ap();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let c=this.applyToLocalView(o,r.mutatedFields);c=t.has(s.key)?null:c;const l=fp(o,c);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oe())}isEqual(e){return this.batchId===e.batchId&&cs(this.mutations,e.mutations,(t,i)=>od(t,i))&&cs(this.baseMutations,e.baseMutations,(t,i)=>od(t,i))}}class dl{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){ve(e.mutations.length===i.length);let s=function(){return yT}();const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new dl(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,ae;function DT(n){switch(n){default:return J();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function mp(n){if(n===void 0)return kn("GRPC error has no .code"),B.UNKNOWN;switch(n){case Me.OK:return B.OK;case Me.CANCELLED:return B.CANCELLED;case Me.UNKNOWN:return B.UNKNOWN;case Me.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Me.INTERNAL:return B.INTERNAL;case Me.UNAVAILABLE:return B.UNAVAILABLE;case Me.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Me.NOT_FOUND:return B.NOT_FOUND;case Me.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Me.ABORTED:return B.ABORTED;case Me.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Me.DATA_LOSS:return B.DATA_LOSS;default:return J()}}(ae=Me||(Me={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=new yi([4294967295,4294967295],0);function ld(n){const e=MT().encode(n),t=new Ff;return t.update(e),new Uint8Array(t.digest())}function ud(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new yi([t,i],0),new yi([s,r],0)]}class fl{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new qs(`Invalid padding: ${t}`);if(i<0)throw new qs(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qs(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new qs(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=yi.fromNumber(this.Ie)}Ee(e,t,i){let s=e.add(t.multiply(yi.fromNumber(i)));return s.compare(OT)===1&&(s=new yi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=ld(e),[i,s]=ud(t);for(let r=0;r<this.hashCount;r++){const o=this.Ee(i,s,r);if(!this.de(o))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new fl(r,s,t);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const t=ld(e),[i,s]=ud(t);for(let r=0;r<this.hashCount;r++){const o=this.Ee(i,s,r);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class qs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Mr.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new aa(ee.min(),s,new xe(de),An(),oe())}}class Mr{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Mr(i,t,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t,i,s){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=s}}class gp{constructor(e,t){this.targetId=e,this.me=t}}class yp{constructor(e,t,i=Je.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class hd{constructor(){this.fe=0,this.ge=fd(),this.pe=Je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),t=oe(),i=oe();return this.ge.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:J()}}),new Mr(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=fd()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VT{constructor(e){this.Le=e,this.Be=new Map,this.ke=An(),this.qe=dd(),this.Qe=new xe(de)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:J()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,s)=>{this.ze(s)&&t(s)})}He(e){const t=e.targetId,i=e.me.count,s=this.Je(t);if(s){const r=s.target;if(Sc(r))if(i===0){const o=new Q(r.path);this.Ue(t,o,at.newNoDocument(o,ee.min()))}else ve(i===1);else{const o=this.Ye(t);if(o!==i){const c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=t;let o,c;try{o=xi(i).toUint8Array()}catch(l){if(l instanceof Kf)return as("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new fl(o,s,r)}catch(l){return as(l instanceof qs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let s=0;return i.forEach(r=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,r,null),s++)}),s}rt(e){const t=new Map;this.Be.forEach((r,o)=>{const c=this.Je(o);if(c){if(r.current&&Sc(c.target)){const l=new Q(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,at.newNoDocument(l,e))}r.be&&(t.set(o,r.ve()),r.Ce())}});let i=oe();this.qe.forEach((r,o)=>{let c=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(r))}),this.ke.forEach((r,o)=>o.setReadTime(e));const s=new aa(e,t,this.Qe,this.ke,i);return this.ke=An(),this.qe=dd(),this.Qe=new xe(de),s}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new hd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ye(de),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function dd(){return new xe(Q.comparator)}function fd(){return new xe(Q.comparator)}const NT={asc:"ASCENDING",desc:"DESCENDING"},LT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FT={and:"AND",or:"OR"};class zT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dc(n,e){return n.useProto3Json||ta(e)?e:{value:e}}function Lo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vp(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function BT(n,e){return Lo(n,e.toTimestamp())}function hn(n){return ve(!!n),ee.fromTimestamp(function(t){const i=Wn(t);return new Le(i.seconds,i.nanos)}(n))}function pl(n,e){return Mc(n,e).canonicalString()}function Mc(n,e){const t=function(s){return new be(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function _p(n){const e=be.fromString(n);return ve(xp(e)),e}function Oc(n,e){return pl(n.databaseId,e.path)}function sc(n,e){const t=_p(e);if(t.get(1)!==n.databaseId.projectId)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(bp(t))}function wp(n,e){return pl(n.databaseId,e)}function jT(n){const e=_p(n);return e.length===4?be.emptyPath():bp(e)}function Vc(n){return new be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bp(n){return ve(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function pd(n,e,t){return{name:Oc(n,e),fields:t.value.mapValue.fields}}function UT(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(u,d){return u.useProto3Json?(ve(d===void 0||typeof d=="string"),Je.fromBase64String(d||"")):(ve(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Je.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(u){const d=u.code===void 0?B.UNKNOWN:mp(u.code);return new Z(d,u.message||"")}(o);t=new yp(i,s,r,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=sc(n,i.document.name),r=hn(i.document.updateTime),o=i.document.createTime?hn(i.document.createTime):ee.min(),c=new Vt({mapValue:{fields:i.document.fields}}),l=at.newFoundDocument(s,r,o,c),u=i.targetIds||[],d=i.removedTargetIds||[];t=new bo(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=sc(n,i.document),r=i.readTime?hn(i.readTime):ee.min(),o=at.newNoDocument(s,r),c=i.removedTargetIds||[];t=new bo([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=sc(n,i.document),r=i.removedTargetIds||[];t=new bo([],r,s,null)}else{if(!("filter"in e))return J();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new PT(s,r),c=i.targetId;t=new gp(c,o)}}return t}function qT(n,e){let t;if(e instanceof Dr)t={update:pd(n,e.key,e.value)};else if(e instanceof hl)t={delete:Oc(n,e.key)};else if(e instanceof Pi)t={update:pd(n,e.key,e.data),updateMask:YT(e.fieldMask)};else{if(!(e instanceof AT))return J();t={verify:Oc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const c=o.transform;if(c instanceof Vo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof hr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof dr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof No)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw J()}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:BT(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:J()}(n,e.precondition)),t}function $T(n,e){return n&&n.length>0?(ve(e!==void 0),n.map(t=>function(s,r){let o=s.updateTime?hn(s.updateTime):hn(r);return o.isEqual(ee.min())&&(o=hn(r)),new IT(o,s.transformResults||[])}(t,e))):[]}function HT(n,e){return{documents:[wp(n,e.path)]}}function WT(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=wp(n,s);const r=function(u){if(u.length!==0)return Tp(pn.create(u,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:ji(m.field),direction:ZT(m.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=Dc(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:s}}function GT(n){let e=jT(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){ve(i===1);const d=t.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let r=[];t.where&&(r=function(p){const m=Ep(p);return m instanceof pn&&Yf(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(m=>function(x){return new Oo(Ui(x.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(t.orderBy));let c=null;t.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,ta(m)?null:m}(t.limit));let l=null;t.startAt&&(l=function(p){const m=!!p.before,g=p.values||[];return new Mo(g,m)}(t.startAt));let u=null;return t.endAt&&(u=function(p){const m=!p.before,g=p.values||[];return new Mo(g,m)}(t.endAt)),hT(e,s,o,r,c,"F",l,u)}function KT(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ep(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ui(t.unaryFilter.field);return ze.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ui(t.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ui(t.unaryFilter.field);return ze.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ui(t.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(n):n.fieldFilter!==void 0?function(t){return ze.create(Ui(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return pn.create(t.compositeFilter.filters.map(i=>Ep(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J()}}(t.compositeFilter.op))}(n):J()}function ZT(n){return NT[n]}function QT(n){return LT[n]}function XT(n){return FT[n]}function ji(n){return{fieldPath:n.canonicalString()}}function Ui(n){return Xe.fromServerFormat(n.fieldPath)}function Tp(n){return n instanceof ze?function(t){if(t.op==="=="){if(ed(t.value))return{unaryFilter:{field:ji(t.field),op:"IS_NAN"}};if(Jh(t.value))return{unaryFilter:{field:ji(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ed(t.value))return{unaryFilter:{field:ji(t.field),op:"IS_NOT_NAN"}};if(Jh(t.value))return{unaryFilter:{field:ji(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ji(t.field),op:QT(t.op),value:t.value}}}(n):n instanceof pn?function(t){const i=t.getFilters().map(s=>Tp(s));return i.length===1?i[0]:{compositeFilter:{op:XT(t.op),filters:i}}}(n):J()}function YT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xp(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,t,i,s,r=ee.min(),o=ee.min(),c=Je.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new Nn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.ct=e}}function ex(n){const e=GT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Pc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.un=new nx}addToCollectionParentIndex(e,t){return this.un.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Hn.min())}updateCollectionGroup(e,t,i){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class nx{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Ye(be.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ye(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hs(0)}static kn(){return new hs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.changes=new ws(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?z.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&Xs(i.mutation,s,Zt.empty(),Le.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,oe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=oe()){const s=pi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(r=>{let o=Us();return r.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=pi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,oe()))}populateOverlays(e,t,i){const s=[];return i.forEach(r=>{t.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,i,s){let r=An();const o=Qs(),c=function(){return Qs()}();return t.forEach((l,u)=>{const d=i.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Pi)?r=r.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Xs(d.mutation,u,d.mutation.getFieldMask(),Le.now())):o.set(u.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var p;return c.set(u,new sx(d,(p=o.get(u))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){const i=Qs();let s=new xe((o,c)=>o-c),r=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const c of o)c.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let d=i.get(l)||Zt.empty();d=c.applyToLocalView(u,d),i.set(l,d);const p=(s.get(c.batchId)||oe()).add(l);s=s.insert(c.batchId,p)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,d=l.value,p=ap();d.forEach(m=>{if(!r.has(m)){const g=fp(t.get(m),i.get(m));g!==null&&p.set(m,g),r=r.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return z.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):z.resolve(pi());let c=-1,l=r;return o.next(u=>z.forEach(u,(d,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),r.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,r)).next(()=>this.computeViews(e,l,u,oe())).next(d=>({batchId:c,changes:op(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(i=>{let s=Us();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const r=t.collectionGroup;let o=Us();return this.indexManager.getCollectionParents(e,r).next(c=>z.forEach(c,l=>{const u=function(p,m){return new na(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,u,i,s).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r,s))).next(o=>{r.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,at.newInvalidDocument(d)))});let c=Us();return o.forEach((l,u)=>{const d=r.get(l);d!==void 0&&Xs(d.mutation,u,Zt.empty(),Le.now()),sa(t,u)&&(c=c.insert(l,u))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return z.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:hn(s.createTime)}}(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(s){return{name:s.name,query:ex(s.bundledQuery),readTime:hn(s.readTime)}}(t)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.overlays=new xe(Q.comparator),this.Ir=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const i=pi();return z.forEach(t,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,r)=>{this.ht(e,t,r)}),z.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Ir.delete(i)),z.resolve()}getOverlaysForCollection(e,t,i){const s=pi(),r=t.length+1,o=new Q(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return z.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new xe((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>i){let d=r.get(u.largestBatchId);d===null&&(d=pi(),r=r.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const c=pi(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>c.set(u,d)),!(c.size()>=s)););return z.resolve(c)}ht(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new ST(t,i));let r=this.Ir.get(t);r===void 0&&(r=oe(),this.Ir.set(t,r)),this.Ir.set(t,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.Tr=new Ye(je.Er),this.dr=new Ye(je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new je(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new je(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){const t=new Q(new be([])),i=new je(t,e),s=new je(t,e+1),r=[];return this.dr.forEachInRange([i,s],o=>{this.Vr(o),r.push(o.key)}),r}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Q(new be([])),i=new je(t,e),s=new je(t,e+1);let r=oe();return this.dr.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const t=new je(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class je{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Q.comparator(e.key,t.key)||de(e.wr,t.wr)}static Ar(e,t){return de(e.wr,t.wr)||Q.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ye(je.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RT(r,t,i,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new je(c.key,r)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,t){return z.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.vr(i),r=s<0?0:s;return z.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new je(t,0),s=new je(t,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([i,s],o=>{const c=this.Dr(o.wr);r.push(c)}),z.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ye(de);return t.forEach(s=>{const r=new je(s,0),o=new je(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([r,o],c=>{i=i.add(c.wr)})}),z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;Q.isDocumentKey(r)||(r=r.child(""));const o=new je(new Q(r),0);let c=new Ye(de);return this.br.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.wr)),!0)},o),z.resolve(this.Cr(c))}Cr(e){const t=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ve(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return z.forEach(t.mutations,s=>{const r=new je(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){const i=new je(t,0),s=this.br.firstAfterOrEqual(i);return z.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.Mr=e,this.docs=function(){return new xe(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return z.resolve(i?i.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let i=An();return t.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():at.newInvalidDocument(s))}),z.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=An();const o=t.path,c=new Q(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||WE(HE(d),i)<=0||(s.has(d.key)||sa(t,d))&&(r=r.insert(d.key,d.mutableCopy()))}return z.resolve(r)}getAllFromCollectionGroup(e,t,i,s){J()}Or(e,t){return z.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new hx(this)}getSize(e){return z.resolve(this.size)}}class hx extends ix{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),z.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.persistence=e,this.Nr=new ws(t=>cl(t),ll),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ml,this.targetCount=0,this.kr=hs.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,s)=>t(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),z.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new hs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Kn(t),z.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),z.waitFor(r).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return z.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),z.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return z.resolve(i)}containsKey(e,t){return z.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t){this.qr={},this.overlays={},this.Qr=new sl(0),this.Kr=!1,this.Kr=!0,this.$r=new cx,this.referenceDelegate=e(this),this.Ur=new dx(this),this.indexManager=new tx,this.remoteDocumentCache=function(s){return new ux(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new JT(t),this.Gr=new ox(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ax,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new lx(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){W("MemoryPersistence","Starting transaction:",e);const s=new px(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(r=>this.referenceDelegate.jr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Hr(e,t){return z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}}class px extends KE{constructor(e){super(),this.currentSequenceNumber=e}}class gl{constructor(e){this.persistence=e,this.Jr=new ml,this.Yr=null}static Zr(e){return new gl(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),z.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),z.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.Xr.add(r.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,i=>{const s=Q.fromPath(i);return this.ei(e,s).next(r=>{r||t.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return z.or([()=>z.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=s}static Wi(e,t){let i=oe(),s=oe();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new yl(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _1()?8:ZE(g1())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,s){const r={result:null};return this.Yi(e,t).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Zi(e,t,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new mx;return this.Xi(e,t,o).next(c=>{if(r.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>r.result)}es(e,t,i,s){return i.documentReadCount<this.ji?(Bs()<=le.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Bi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Bs()<=le.DEBUG&&W("QueryEngine","Query:",Bi(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(Bs()<=le.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Bi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ln(t))):z.resolve())}Yi(e,t){if(sd(t))return z.resolve(null);let i=ln(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Pc(t,null,"F"),i=ln(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=oe(...r);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ts(t,c);return this.ns(t,u,o,l.readTime)?this.Yi(e,Pc(t,null,"F")):this.rs(e,u,t,l)}))})))}Zi(e,t,i,s){return sd(t)||s.isEqual(ee.min())?z.resolve(null):this.Ji.getDocuments(e,i).next(r=>{const o=this.ts(t,r);return this.ns(t,o,i,s)?z.resolve(null):(Bs()<=le.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bi(t)),this.rs(e,o,t,$E(s,-1)).next(c=>c))})}ts(e,t){let i=new Ye(sp(e));return t.forEach((s,r)=>{sa(e,r)&&(i=i.add(r))}),i}ns(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Xi(e,t,i){return Bs()<=le.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Bi(t)),this.Ji.getDocumentsMatchingQuery(e,t,Hn.min(),i)}rs(e,t,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(r=>(t.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t,i,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new xe(de),this._s=new ws(r=>cl(r),ll),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rx(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function vx(n,e,t,i){return new yx(n,e,t,i)}async function Ip(n,e){const t=te(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],c=[];let l=oe();for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of r){c.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:c}))})})}function _x(n,e){const t=te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,u,d){const p=u.batch,m=p.keys();let g=z.resolve();return m.forEach(x=>{g=g.next(()=>d.getEntry(l,x)).next(E=>{const k=u.docVersions.get(x);ve(k!==null),E.version.compareTo(k)<0&&(p.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),d.addEntry(E)))})}),g.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(t,i,e,r).next(()=>r.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=oe();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function Cp(n){const e=te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function wx(n,e){const t=te(n),i=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const c=[];e.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;c.push(t.Ur.removeMatchingKeys(r,d.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(r,d.addedDocuments,p)));let g=m.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(Je.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,i)),s=s.insert(p,g),function(E,k,S){return E.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,g,d)&&c.push(t.Ur.updateTargetData(r,g))});let l=An(),u=oe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(r,d))}),c.push(bx(r,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!i.isEqual(ee.min())){const d=t.Ur.getLastRemoteSnapshotVersion(r).next(p=>t.Ur.setTargetsMetadata(r,r.currentSequenceNumber,i));c.push(d)}return z.waitFor(c).next(()=>o.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,l,u)).next(()=>l)}).then(r=>(t.os=s,r))}function bx(n,e,t){let i=oe(),s=oe();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let o=An();return t.forEach((c,l)=>{const u=r.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):W("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function Ex(n,e){const t=te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Tx(n,e){const t=te(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Ur.getTargetData(i,e).next(r=>r?(s=r,z.resolve(s)):t.Ur.allocateTargetId(i).next(o=>(s=new Nn(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}async function Nc(n,e,t){const i=te(n),s=i.os.get(e),r=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Pr(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function md(n,e,t){const i=te(n);let s=ee.min(),r=oe();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const p=te(l),m=p._s.get(d);return m!==void 0?z.resolve(p.os.get(m)):p.Ur.getTargetData(u,d)}(i,o,ln(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{r=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?s:ee.min(),t?r:oe())).next(c=>(xx(i,pT(e),c),{documents:c,Ts:r})))}function xx(n,e,t){let i=n.us.get(e)||ee.min();t.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.us.set(e,i)}class gd{constructor(){this.activeTargetIds=wT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ix{constructor(){this.so=new gd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gd,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo=null;function rc(){return fo===null?fo=function(){return 268435456+Math.round(2147483648*Math.random())}():fo++,"0x"+fo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class Rx extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${s}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${r}`}get Fo(){return!1}Mo(t,i,s,r,o){const c=rc(),l=this.xo(t,i.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${c}:`,l,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,r,o),this.No(t,l,u,s).then(d=>(W("RestConnection",`Received RPC '${t}' ${c}: `,d),d),d=>{throw as("RestConnection",`RPC '${t}' ${c} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(t,i,s,r,o,c){return this.Mo(t,i,s,r,o)}Oo(t,i,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((r,o)=>t[o]=r),s&&s.headers.forEach((r,o)=>t[o]=r)}xo(t,i){const s=kx[t];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,s){const r=rc();return new Promise((o,c)=>{const l=new zf;l.setWithCredentials(!0),l.listenOnce(jf.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vo.NO_ERROR:const d=l.getResponseJson();W(st,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(d)),o(d);break;case vo.TIMEOUT:W(st,`RPC '${e}' ${r} timed out`),c(new Z(B.DEADLINE_EXCEEDED,"Request time out"));break;case vo.HTTP_ERROR:const p=l.getStatus();if(W(st,`RPC '${e}' ${r} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(k){const S=k.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(S)>=0?S:B.UNKNOWN}(g.status);c(new Z(x,g.message))}else c(new Z(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Z(B.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{W(st,`RPC '${e}' ${r} completed.`)}});const u=JSON.stringify(s);W(st,`RPC '${e}' ${r} sending request:`,s),l.send(t,"POST",u,i,15)})}Bo(e,t,i){const s=rc(),r=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$f(),c=qf(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new Bf({})),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const d=r.join("");W(st,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=o.createWebChannel(d,l);let m=!1,g=!1;const x=new Ax({Io:k=>{g?W(st,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(m||(W(st,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),W(st,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},To:()=>p.close()}),E=(k,S,D)=>{k.listen(S,F=>{try{D(F)}catch(V){setTimeout(()=>{throw V},0)}})};return E(p,js.EventType.OPEN,()=>{g||(W(st,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),E(p,js.EventType.CLOSE,()=>{g||(g=!0,W(st,`RPC '${e}' stream ${s} transport closed`),x.So())}),E(p,js.EventType.ERROR,k=>{g||(g=!0,as(st,`RPC '${e}' stream ${s} transport errored:`,k),x.So(new Z(B.UNAVAILABLE,"The operation could not be completed")))}),E(p,js.EventType.MESSAGE,k=>{var S;if(!g){const D=k.data[0];ve(!!D);const F=D,V=F.error||((S=F[0])===null||S===void 0?void 0:S.error);if(V){W(st,`RPC '${e}' stream ${s} received error:`,V);const L=V.status;let N=function(w){const I=Me[w];if(I!==void 0)return mp(I)}(L),C=V.message;N===void 0&&(N=B.INTERNAL,C="Unknown error status: "+L+" with message "+V.message),g=!0,x.So(new Z(N,C)),p.close()}else W(st,`RPC '${e}' stream ${s} received:`,D),x.bo(D)}}),E(c,Uf.STAT_EVENT,k=>{k.stat===Cc.PROXY?W(st,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Cc.NOPROXY&&W(st,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function oc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(n){return new zT(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t,i=1e3,s=1.5,r=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=s,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-i);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t,i,s,r,o,c,l){this.ui=e,this.Ho=i,this.Jo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kp(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(kn(t.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===t&&this.P_(i,s)},i=>{e(()=>{const s=new Z(B.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sx extends Ap{constructor(e,t,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=UT(this.serializer,e),i=function(r){if(!("targetChange"in r))return ee.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?hn(o.readTime):ee.min()}(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=Vc(this.serializer),t.addTarget=function(r,o){let c;const l=o.target;if(c=Sc(l)?{documents:HT(r,l)}:{query:WT(r,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=vp(r,o.resumeToken);const u=Dc(r,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(ee.min())>0){c.readTime=Lo(r,o.snapshotVersion.toTimestamp());const u=Dc(r,o.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);const i=KT(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=Vc(this.serializer),t.removeTarget=e,this.a_(t)}}class Px extends Ap{constructor(e,t,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=$T(e.writeResults,e.commitTime),i=hn(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=Vc(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>qT(this.serializer,i))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx extends class{}{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Mo(e,Mc(t,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Z(B.UNKNOWN,r.toString())})}Lo(e,t,i,s,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Mc(t,i),s,o,c,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Mx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(kn(t),this.D_=!1):W("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o(o=>{i.enqueueAndForget(async()=>{Di(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=te(l);u.L_.add(4),await Or(u),u.q_.set("Unknown"),u.L_.delete(4),await la(u)}(this))})}),this.q_=new Mx(i,s)}}async function la(n){if(Di(n))for(const e of n.B_)await e(!0)}async function Or(n){for(const e of n.B_)await e(!1)}function Rp(n,e){const t=te(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),bl(t)?wl(t):bs(t).r_()&&_l(t,e))}function vl(n,e){const t=te(n),i=bs(t);t.N_.delete(e),i.r_()&&Sp(t,e),t.N_.size===0&&(i.r_()?i.o_():Di(t)&&t.q_.set("Unknown"))}function _l(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bs(n).A_(e)}function Sp(n,e){n.Q_.xe(e),bs(n).R_(e)}function wl(n){n.Q_=new VT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),bs(n).start(),n.q_.v_()}function bl(n){return Di(n)&&!bs(n).n_()&&n.N_.size>0}function Di(n){return te(n).L_.size===0}function Pp(n){n.Q_=void 0}async function Vx(n){n.q_.set("Online")}async function Nx(n){n.N_.forEach((e,t)=>{_l(n,e)})}async function Lx(n,e){Pp(n),bl(n)?(n.q_.M_(e),wl(n)):n.q_.set("Unknown")}async function Fx(n,e,t){if(n.q_.set("Online"),e instanceof yp&&e.state===2&&e.cause)try{await async function(s,r){const o=r.cause;for(const c of r.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(n,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fo(n,i)}else if(e instanceof bo?n.Q_.Ke(e):e instanceof gp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ee.min()))try{const i=await Cp(n.localStore);t.compareTo(i)>=0&&await function(r,o){const c=r.Q_.rt(o);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=r.N_.get(u);d&&r.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,u)=>{const d=r.N_.get(l);if(!d)return;r.N_.set(l,d.withResumeToken(Je.EMPTY_BYTE_STRING,d.snapshotVersion)),Sp(r,l);const p=new Nn(d.target,l,u,d.sequenceNumber);_l(r,p)}),r.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(i){W("RemoteStore","Failed to raise snapshot:",i),await Fo(n,i)}}async function Fo(n,e,t){if(!Pr(e))throw e;n.L_.add(1),await Or(n),n.q_.set("Offline"),t||(t=()=>Cp(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await la(n)})}function Dp(n,e){return e().catch(t=>Fo(n,t,e))}async function ua(n){const e=te(n),t=Gn(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zx(e);)try{const s=await Ex(e.localStore,i);if(s===null){e.O_.length===0&&t.o_();break}i=s.batchId,Bx(e,s)}catch(s){await Fo(e,s)}Mp(e)&&Op(e)}function zx(n){return Di(n)&&n.O_.length<10}function Bx(n,e){n.O_.push(e);const t=Gn(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Mp(n){return Di(n)&&!Gn(n).n_()&&n.O_.length>0}function Op(n){Gn(n).start()}async function jx(n){Gn(n).p_()}async function Ux(n){const e=Gn(n);for(const t of n.O_)e.m_(t.mutations)}async function qx(n,e,t){const i=n.O_.shift(),s=dl.from(i,e,t);await Dp(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await ua(n)}async function $x(n,e){e&&Gn(n).V_&&await async function(i,s){if(function(o){return DT(o)&&o!==B.ABORTED}(s.code)){const r=i.O_.shift();Gn(i).s_(),await Dp(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await ua(i)}}(n,e),Mp(n)&&Op(n)}async function vd(n,e){const t=te(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const i=Di(t);t.L_.add(3),await Or(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await la(t)}async function Hx(n,e){const t=te(n);e?(t.L_.delete(2),await la(t)):e||(t.L_.add(2),await Or(t),t.q_.set("Unknown"))}function bs(n){return n.K_||(n.K_=function(t,i,s){const r=te(t);return r.w_(),new Sx(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{Eo:Vx.bind(null,n),Ro:Nx.bind(null,n),mo:Lx.bind(null,n),d_:Fx.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),bl(n)?wl(n):n.q_.set("Unknown")):(await n.K_.stop(),Pp(n))})),n.K_}function Gn(n){return n.U_||(n.U_=function(t,i,s){const r=te(t);return r.w_(),new Px(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jx.bind(null,n),mo:$x.bind(null,n),f_:Ux.bind(null,n),g_:qx.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await ua(n)):(await n.U_.stop(),n.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,r){const o=Date.now()+i,c=new El(e,t,o,s,r);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tl(n,e){if(kn("AsyncQueue",`${e}: ${n}`),Pr(n))return new Z(B.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Q.comparator(t.key,i.key):(t,i)=>Q.comparator(t.key,i.key),this.keyedMap=Us(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new Ji(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ji)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ji;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this.W_=new xe(Q.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}}class ds{constructor(e,t,i,s,r,o,c,l,u){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,i,s,r){const o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new ds(e,t,Ji.emptySet(t),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ia(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Gx{constructor(){this.queries=wd(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const s=te(t),r=s.queries;s.queries=wd(),r.forEach((o,c)=>{for(const l of c.j_)l.onError(i)})})(this,new Z(B.ABORTED,"Firestore shutting down"))}}function wd(){return new ws(n=>ip(n),ia)}async function Kx(n,e){const t=te(n);let i=3;const s=e.query;let r=t.queries.get(s);r?!r.H_()&&e.J_()&&(i=2):(r=new Wx,i=e.J_()?0:1);try{switch(i){case 0:r.z_=await t.onListen(s,!0);break;case 1:r.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const c=Tl(o,`Initialization of query '${Bi(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,r),r.j_.push(e),e.Z_(t.onlineState),r.z_&&e.X_(r.z_)&&xl(t)}async function Zx(n,e){const t=te(n),i=e.query;let s=3;const r=t.queries.get(i);if(r){const o=r.j_.indexOf(e);o>=0&&(r.j_.splice(o,1),r.j_.length===0?s=e.J_()?0:1:!r.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Qx(n,e){const t=te(n);let i=!1;for(const s of e){const r=s.query,o=t.queries.get(r);if(o){for(const c of o.j_)c.X_(s)&&(i=!0);o.z_=s}}i&&xl(t)}function Xx(n,e,t){const i=te(n),s=i.queries.get(e);if(s)for(const r of s.j_)r.onError(t);i.queries.delete(e)}function xl(n){n.Y_.forEach(e=>{e.next()})}var Lc,bd;(bd=Lc||(Lc={})).ea="default",bd.Cache="cache";class Yx{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ds(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ds.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Lc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.key=e}}class Np{constructor(e){this.key=e}}class Jx{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=sp(e),this.Ra=new Ji(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new _d,s=t?t.Ra:this.Ra;let r=t?t.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const m=s.get(d),g=sa(this.query,p)?p:null,x=!!m&&this.mutatedKeys.has(m.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;m&&g?m.data.isEqual(g.data)?x!==E&&(i.track({type:3,doc:g}),k=!0):this.ga(m,g)||(i.track({type:2,doc:g}),k=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(c=!0)):!m&&g?(i.track({type:0,doc:g}),k=!0):m&&!g&&(i.track({type:1,doc:m}),k=!0,(l||u)&&(c=!0)),k&&(g?(o=o.add(g),r=E?r.add(d):r.delete(d)):(o=o.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{Ra:o,fa:i,ns:c,mutatedKeys:r}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const r=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(g,x){const E=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return E(g)-E(x)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(i),s=s!=null&&s;const c=t&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new ds(this.query,e.Ra,r,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _d,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const t=[];return e.forEach(i=>{this.da.has(i)||t.push(new Np(i))}),this.da.forEach(i=>{e.has(i)||t.push(new Vp(i))}),t}ba(e){this.Ta=e.Ts,this.da=oe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ds.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class eI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class tI{constructor(e){this.key=e,this.va=!1}}class nI{constructor(e,t,i,s,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ws(c=>ip(c),ia),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(Q.comparator),this.Na=new Map,this.La=new ml,this.Ba={},this.ka=new Map,this.qa=hs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function iI(n,e,t=!0){const i=Up(n);let s;const r=i.Fa.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Da()):s=await Lp(i,e,t,!0),s}async function sI(n,e){const t=Up(n);await Lp(t,e,!0,!1)}async function Lp(n,e,t,i){const s=await Tx(n.localStore,ln(e)),r=s.targetId,o=t?n.sharedClientState.addLocalQueryTarget(r):"not-current";let c;return i&&(c=await rI(n,e,r,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&Rp(n.remoteStore,s),c}async function rI(n,e,t,i,s){n.Ka=(p,m,g)=>async function(E,k,S,D){let F=k.view.ma(S);F.ns&&(F=await md(E.localStore,k.query,!1).then(({documents:C})=>k.view.ma(C,F)));const V=D&&D.targetChanges.get(k.targetId),L=D&&D.targetMismatches.get(k.targetId)!=null,N=k.view.applyChanges(F,E.isPrimaryClient,V,L);return Td(E,k.targetId,N.wa),N.snapshot}(n,p,m,g);const r=await md(n.localStore,e,!0),o=new Jx(e,r.Ts),c=o.ma(r.documents),l=Mr.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),u=o.applyChanges(c,n.isPrimaryClient,l);Td(n,t,u.wa);const d=new eI(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot}async function oI(n,e,t){const i=te(n),s=i.Fa.get(e),r=i.Ma.get(s.targetId);if(r.length>1)return i.Ma.set(s.targetId,r.filter(o=>!ia(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Nc(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&vl(i.remoteStore,s.targetId),Fc(i,s.targetId)}).catch(Sr)):(Fc(i,s.targetId),await Nc(i.localStore,s.targetId,!0))}async function aI(n,e){const t=te(n),i=t.Fa.get(e),s=t.Ma.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),vl(t.remoteStore,i.targetId))}async function cI(n,e,t){const i=mI(n);try{const s=await function(o,c){const l=te(o),u=Le.now(),d=c.reduce((g,x)=>g.add(x.key),oe());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=An(),E=oe();return l.cs.getEntries(g,d).next(k=>{x=k,x.forEach((S,D)=>{D.isValidDocument()||(E=E.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,x)).next(k=>{p=k;const S=[];for(const D of c){const F=kT(D,p.get(D.key).overlayedDocument);F!=null&&S.push(new Pi(D.key,F,Zf(F.value.mapValue),un.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,S,c)}).next(k=>{m=k;const S=k.applyToLocalDocumentSet(p,E);return l.documentOverlayCache.saveOverlays(g,k.batchId,S)})}).then(()=>({batchId:m.batchId,changes:op(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,c,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new xe(de)),u=u.insert(c,l),o.Ba[o.currentUser.toKey()]=u}(i,s.batchId,t),await Vr(i,s.changes),await ua(i.remoteStore)}catch(s){const r=Tl(s,"Failed to persist write");t.reject(r)}}async function Fp(n,e){const t=te(n);try{const i=await wx(t.localStore,e);e.targetChanges.forEach((s,r)=>{const o=t.Na.get(r);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ve(o.va):s.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),await Vr(t,i,e)}catch(i){await Sr(i)}}function Ed(n,e,t){const i=te(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Fa.forEach((r,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const l=te(o);l.onlineState=c;let u=!1;l.queries.forEach((d,p)=>{for(const m of p.j_)m.Z_(c)&&(u=!0)}),u&&xl(l)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function lI(n,e,t){const i=te(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Na.get(e),r=s&&s.key;if(r){let o=new xe(Q.comparator);o=o.insert(r,at.newNoDocument(r,ee.min()));const c=oe().add(r),l=new aa(ee.min(),new Map,new xe(de),o,c);await Fp(i,l),i.Oa=i.Oa.remove(r),i.Na.delete(e),Il(i)}else await Nc(i.localStore,e,!1).then(()=>Fc(i,e,t)).catch(Sr)}async function uI(n,e){const t=te(n),i=e.batch.batchId;try{const s=await _x(t.localStore,e);Bp(t,i,null),zp(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Vr(t,s)}catch(s){await Sr(s)}}async function hI(n,e,t){const i=te(n);try{const s=await function(o,c){const l=te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,c).next(p=>(ve(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(i.localStore,e);Bp(i,e,t),zp(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Vr(i,s)}catch(s){await Sr(s)}}function zp(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Bp(n,e,t){const i=te(n);let s=i.Ba[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function Fc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||jp(n,i)})}function jp(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(vl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Il(n))}function Td(n,e,t){for(const i of t)i instanceof Vp?(n.La.addReference(i.key,e),dI(n,i)):i instanceof Np?(W("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||jp(n,i.key)):J()}function dI(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(W("SyncEngine","New document in limbo: "+t),n.xa.add(i),Il(n))}function Il(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Q(be.fromString(e)),i=n.qa.next();n.Na.set(i,new tI(t)),n.Oa=n.Oa.insert(t,i),Rp(n.remoteStore,new Nn(ln(np(t.path)),i,"TargetPurposeLimboResolution",sl.oe))}}async function Vr(n,e,t){const i=te(n),s=[],r=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((c,l)=>{o.push(i.Ka(l,e,t).then(u=>{var d;if((u||t)&&i.isPrimaryClient){const p=u?!u.fromCache:(d=t==null?void 0:t.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){s.push(u);const p=yl.Wi(l.targetId,u);r.push(p)}}))}),await Promise.all(o),i.Ca.d_(s),await async function(l,u){const d=te(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>z.forEach(u,m=>z.forEach(m.$i,g=>d.persistence.referenceDelegate.addReference(p,m.targetId,g)).next(()=>z.forEach(m.Ui,g=>d.persistence.referenceDelegate.removeReference(p,m.targetId,g)))))}catch(p){if(!Pr(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const g=d.os.get(m),x=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(x);d.os=d.os.insert(m,E)}}}(i.localStore,r))}async function fI(n,e){const t=te(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const i=await Ip(t.localStore,e);t.currentUser=e,function(r,o){r.ka.forEach(c=>{c.forEach(l=>{l.reject(new Z(B.CANCELLED,o))})}),r.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vr(t,i.hs)}}function pI(n,e){const t=te(n),i=t.Na.get(e);if(i&&i.va)return oe().add(i.key);{let s=oe();const r=t.Ma.get(e);if(!r)return s;for(const o of r){const c=t.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function Up(n){const e=te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lI.bind(null,e),e.Ca.d_=Qx.bind(null,e.eventManager),e.Ca.$a=Xx.bind(null,e.eventManager),e}function mI(n){const e=te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hI.bind(null,e),e}class xd{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ca(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return vx(this.persistence,new gx,e.initialUser,this.serializer)}createPersistence(e){return new fx(gl.Zr,this.serializer)}createSharedClientState(e){return new Ix}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class gI{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ed(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fI.bind(null,this.syncEngine),await Hx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Gx}()}createDatastore(e){const t=ca(e.databaseInfo.databaseId),i=function(r){return new Rx(r)}(e.databaseInfo);return function(r,o,c,l){return new Dx(r,o,c,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,r,o,c){return new Ox(i,s,r,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>Ed(this.syncEngine,t,0),function(){return yd.D()?new yd:new Cx}())}createSyncEngine(e,t){return function(s,r,o,c,l,u,d){const p=new nI(s,r,o,c,l,u);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const r=te(s);W("RemoteStore","RemoteStore shutting down."),r.L_.add(5),await Or(r),r.k_.shutdown(),r.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,t,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=ot.UNAUTHENTICATED,this.clientId=Wf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async r=>{W("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(W("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Tl(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ac(n,e){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Ip(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Id(n,e){n.asyncQueue.verifyOperationInProgress();const t=await wI(n);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>vd(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>vd(e.remoteStore,s)),n._onlineComponents=e}function _I(n){return n.name==="FirebaseError"?n.code===B.FAILED_PRECONDITION||n.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function wI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await ac(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!_I(t))throw t;as("Error using user provided cache. Falling back to memory cache: "+t),await ac(n,new xd)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await ac(n,new xd);return n._offlineComponents}async function qp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Id(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Id(n,new gI))),n._onlineComponents}function bI(n){return qp(n).then(e=>e.syncEngine)}async function EI(n){const e=await qp(n),t=e.eventManager;return t.onListen=iI.bind(null,e.syncEngine),t.onUnlisten=oI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aI.bind(null,e.syncEngine),t}function TI(n,e,t={}){const i=new Bn;return n.asyncQueue.enqueueAndForget(async()=>function(r,o,c,l,u){const d=new yI({next:m=>{o.enqueueAndForget(()=>Zx(r,p)),m.fromCache&&l.source==="server"?u.reject(new Z(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new Yx(c,d,{includeMetadataChanges:!0,_a:!0});return Kx(r,p)}(await EI(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(n,e,t){if(!t)throw new Z(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xI(n,e,t,i){if(e===!0&&i===!0)throw new Z(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kd(n){if(!Q.isDocumentKey(n))throw new Z(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ad(n){if(Q.isDocumentKey(n))throw new Z(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":J()}function fr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Z(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cl(n);throw new Z(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$p((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ha{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Z(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Z(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rd(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new VE;switch(i.type){case"firstParty":return new zE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Z(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Cd.get(t);i&&(W("ComponentProvider","Removing Datastore"),Cd.delete(t),i.terminate())}(this),Promise.resolve()}}function II(n,e,t,i={}){var s;const r=(n=fr(n,ha))._getSettings(),o=`${e}:${t}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&as("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=ot.MOCK_USER;else{c=m1(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Z(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ot(u)}n._authCredentials=new NE(new Hf(c,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new da(this.firestore,e,this._query)}}class Jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class jn extends da{constructor(e,t,i){super(e,t,np(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new Q(e))}withConverter(e){return new jn(this.firestore,e,this._path)}}function Wp(n,e,...t){if(n=os(n),Hp("collection","path",e),n instanceof ha){const i=be.fromString(e,...t);return Ad(i),new jn(n,null,i)}{if(!(n instanceof Jt||n instanceof jn))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(be.fromString(e,...t));return Ad(i),new jn(n.firestore,null,i)}}function fa(n,e,...t){if(n=os(n),arguments.length===1&&(e=Wf.newId()),Hp("doc","path",e),n instanceof ha){const i=be.fromString(e,...t);return kd(i),new Jt(n,null,new Q(i))}{if(!(n instanceof Jt||n instanceof jn))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(be.fromString(e,...t));return kd(i),new Jt(n.firestore,n instanceof jn?n.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new kp(this,"async_queue_retry"),this.Eu=()=>{const t=oc();t&&W("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};const e=oc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const t=oc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const t=new Bn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Pr(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const t=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw kn("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Pu=!1,i))));return this.au=t,t}enqueueAfterDelay(e,t,i){this.du(),this.Tu.indexOf(e)>-1&&(t=0);const s=El.createAndSchedule(this,e,t,i,r=>this.Vu(r));return this.lu.push(s),s}du(){this.hu&&J()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const t=this.lu.indexOf(e);this.lu.splice(t,1)}}class pa extends ha{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=function(){return new CI}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Kp(this),this._firestoreClient.terminate()}}function kI(n,e){const t=IE(),i="(default)",s=nl(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=f1("firestore");r&&II(s,...r)}return s}function Gp(n){return n._firestoreClient||Kp(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Kp(n){var e,t,i;const s=n._freezeSettings(),r=function(c,l,u,d){return new YE(c,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,$p(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._firestoreClient=new vI(n._authCredentials,n._appCheckCredentials,n._queue,r),!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fs(Je.fromBase64String(e))}catch(t){throw new Z(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fs(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Z(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Z(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Z(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=/^__.*__$/;class RI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Pi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dr(e,this.data,t,this.fieldTransforms)}}function Qp(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class Sl{constructor(e,t,i,s,r,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.yu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Sl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Su({path:i,Du:!1});return s.vu(e),s}Cu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Su({path:i,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return zo(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Qp(this.wu)&&AI.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class SI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ca(e)}Nu(e,t,i,s=!1){return new Sl({wu:e,methodName:t,Ou:i,path:Xe.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PI(n){const e=n._freezeSettings(),t=ca(n._databaseId);return new SI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DI(n,e,t,i,s,r={}){const o=n.Nu(r.merge||r.mergeFields?2:0,e,t,s);em("Data must be an object, but it was:",o,i);const c=Yp(i,o);let l,u;if(r.merge)l=new Zt(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const d=[];for(const p of r.mergeFields){const m=MI(e,p,t);if(!o.contains(m))throw new Z(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);VI(d,m)||d.push(m)}l=new Zt(d),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new RI(new Vt(c),l,u)}function Xp(n,e){if(Jp(n=os(n)))return em("Unsupported field value:",e,n),Yp(n,e);if(n instanceof Zp)return function(i,s){if(!Qp(s.wu))throw s.Mu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const c of i){let l=Xp(c,s.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(n,e)}return function(i,s){if((i=os(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return bT(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Le.fromDate(i);return{timestampValue:Lo(s.serializer,r)}}if(i instanceof Le){const r=new Le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Lo(s.serializer,r)}}if(i instanceof Al)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fs)return{bytesValue:vp(s.serializer,i._byteString)};if(i instanceof Jt){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:pl(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Rl)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Mu("VectorValues must only contain numeric values.");return ul(c.serializer,l)})}}}}}}(i,s);throw s.Mu(`Unsupported field value: ${Cl(i)}`)}(n,e)}function Yp(n,e){const t={};return Gf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(n,(i,s)=>{const r=Xp(s,e.bu(i));r!=null&&(t[i]=r)}),{mapValue:{fields:t}}}function Jp(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Le||n instanceof Al||n instanceof fs||n instanceof Jt||n instanceof Zp||n instanceof Rl)}function em(n,e,t){if(!Jp(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const i=Cl(t);throw i==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+i)}}function MI(n,e,t){if((e=os(e))instanceof kl)return e._internalPath;if(typeof e=="string")return tm(n,e);throw zo("Field path arguments must be of type string or ",n,!1,void 0,t)}const OI=new RegExp("[~\\*/\\[\\]]");function tm(n,e,t){if(e.search(OI)>=0)throw zo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kl(...e.split("."))._internalPath}catch{throw zo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zo(n,e,t,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new Z(B.INVALID_ARGUMENT,c+n+l)}function VI(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(im("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class NI extends nm{data(){return super.data()}}function im(n,e){return typeof e=="string"?tm(n,e):e instanceof kl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Z(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FI{convertValue(e,t="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return _s(e,(s,r)=>{i[s]=this.convertValue(r,t)}),i}convertVectorValue(e){var t,i,s;const r=(s=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>Pe(o.doubleValue));return new Rl(r)}convertGeoPoint(e){return new Al(Pe(e.latitude),Pe(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ol(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(cr(e));default:return null}}convertTimestamp(e){const t=Wn(e);return new Le(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=be.fromString(e);ve(xp(i));const s=new lr(i.get(1),i.get(3)),r=new Q(i.popFirst(5));return s.isEqual(t)||kn(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class BI extends nm{constructor(e,t,i,s,r,o){super(e,t,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Eo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(im("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Eo extends BI{data(e={}){return super.data(e)}}class jI{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new po(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Eo(this._firestore,this._userDataWriter,i.key,i,new po(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const l=new Eo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new po(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>r||c.type!==3).map(c=>{const l=new Eo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new po(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),d=o.indexOf(c.doc.key)),{type:UI(c.type),doc:l,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function UI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}class qI extends FI{constructor(e){super(),this.firestore=e}convertBytes(e){return new fs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function $I(n){n=fr(n,da);const e=fr(n.firestore,pa),t=Gp(e),i=new qI(e);return LI(n._query),TI(t,n._query).then(s=>new jI(e,i,n,s))}function HI(n){return sm(fr(n.firestore,pa),[new hl(n._key,un.none())])}function WI(n,e){const t=fr(n.firestore,pa),i=fa(n),s=zI(n.converter,e);return sm(t,[DI(PI(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,un.exists(!1))]).then(()=>i)}function sm(n,e){return function(i,s){const r=new Bn;return i.asyncQueue.enqueueAndForget(async()=>cI(await bI(i),s,r)),r.promise}(Gp(n),e)}(function(e,t=!0){(function(s){vs=s})(xE),$n(new In("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),c=new pa(new LE(i.getProvider("auth-internal")),new jE(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Z(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lr(u.options.projectId,d)}(o,s),o);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),cn(Kh,"4.7.0",e),cn(Kh,"4.7.0","esm2017")})();var ce;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const r={};for(const o of s)r[o]=o;return r},n.getValidEnumValues=s=>{const r=n.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),o={};for(const c of r)o[c]=s[c];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(r){return s[r]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const r=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&r.push(o);return r},n.find=(s,r)=>{for(const o of s)if(r(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function i(s,r=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(r)}n.joinValues=i,n.jsonStringifyReplacer=(s,r)=>typeof r=="bigint"?r.toString():r})(ce||(ce={}));var zc;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(zc||(zc={}));const H=ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),On=n=>{switch(typeof n){case"undefined":return H.undefined;case"string":return H.string;case"number":return isNaN(n)?H.nan:H.number;case"boolean":return H.boolean;case"function":return H.function;case"bigint":return H.bigint;case"symbol":return H.symbol;case"object":return Array.isArray(n)?H.array:n===null?H.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?H.promise:typeof Map<"u"&&n instanceof Map?H.map:typeof Set<"u"&&n instanceof Set?H.set:typeof Date<"u"&&n instanceof Date?H.date:H.object;default:return H.unknown}},j=ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),GI=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Pt extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(r){return r.message},i={_errors:[]},s=r=>{for(const o of r.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)i._errors.push(t(o));else{let c=i,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(t(o))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}};return s(this),i}static assert(e){if(!(e instanceof Pt))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},i=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):i.push(e(s));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}Pt.create=n=>new Pt(n);const ps=(n,e)=>{let t;switch(n.code){case j.invalid_type:n.received===H.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case j.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,ce.jsonStringifyReplacer)}`;break;case j.unrecognized_keys:t=`Unrecognized key(s) in object: ${ce.joinValues(n.keys,", ")}`;break;case j.invalid_union:t="Invalid input";break;case j.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ce.joinValues(n.options)}`;break;case j.invalid_enum_value:t=`Invalid enum value. Expected ${ce.joinValues(n.options)}, received '${n.received}'`;break;case j.invalid_arguments:t="Invalid function arguments";break;case j.invalid_return_type:t="Invalid function return type";break;case j.invalid_date:t="Invalid date";break;case j.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:ce.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case j.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case j.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case j.custom:t="Invalid input";break;case j.invalid_intersection_types:t="Intersection results could not be merged";break;case j.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case j.not_finite:t="Number must be finite";break;default:t=e.defaultError,ce.assertNever(n)}return{message:t}};let rm=ps;function KI(n){rm=n}function Bo(){return rm}const jo=n=>{const{data:e,path:t,errorMaps:i,issueData:s}=n,r=[...t,...s.path||[]],o={...s,path:r};if(s.message!==void 0)return{...s,path:r,message:s.message};let c="";const l=i.filter(u=>!!u).slice().reverse();for(const u of l)c=u(o,{data:e,defaultError:c}).message;return{...s,path:r,message:c}},ZI=[];function $(n,e){const t=Bo(),i=jo({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===ps?void 0:ps].filter(s=>!!s)});n.common.issues.push(i)}class dt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const s of t){if(s.status==="aborted")return Y;s.status==="dirty"&&e.dirty(),i.push(s.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const s of t){const r=await s.key,o=await s.value;i.push({key:r,value:o})}return dt.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const s of t){const{key:r,value:o}=s;if(r.status==="aborted"||o.status==="aborted")return Y;r.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(i[r.value]=o.value)}return{status:e.value,value:i}}}const Y=Object.freeze({status:"aborted"}),Gi=n=>({status:"dirty",value:n}),_t=n=>({status:"valid",value:n}),Bc=n=>n.status==="aborted",jc=n=>n.status==="dirty",pr=n=>n.status==="valid",mr=n=>typeof Promise<"u"&&n instanceof Promise;function Uo(n,e,t,i){if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function om(n,e,t,i,s){if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var G;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(G||(G={}));var $s,Hs;class mn{constructor(e,t,i,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sd=(n,e)=>{if(pr(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Pt(n.common.issues);return this._error=t,this._error}}};function ne(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:i,description:s}=n;if(e&&(t||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,c)=>{var l,u;const{message:d}=n;return o.code==="invalid_enum_value"?{message:d??c.defaultError}:typeof c.data>"u"?{message:(l=d??i)!==null&&l!==void 0?l:c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:(u=d??t)!==null&&u!==void 0?u:c.defaultError}},description:s}}class se{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return On(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:On(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new dt,ctx:{common:e.parent.common,data:e.data,parsedType:On(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(mr(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){var i;const s={common:{issues:[],async:(i=t==null?void 0:t.async)!==null&&i!==void 0?i:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:On(e)},r=this._parseSync({data:e,path:s.path,parent:s});return Sd(s,r)}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:On(e)},s=this._parse({data:e,path:i.path,parent:i}),r=await(mr(s)?s:Promise.resolve(s));return Sd(i,r)}refine(e,t){const i=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,r)=>{const o=e(s),c=()=>r.addIssue({code:j.custom,...i(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,t){return this._refinement((i,s)=>e(i)?!0:(s.addIssue(typeof t=="function"?t(i,s):t),!1))}_refinement(e){return new nn({schema:this,typeName:X.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return dn.create(this,this._def)}nullable(){return Xn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return en.create(this,this._def)}promise(){return gs.create(this,this._def)}or(e){return _r.create([this,e],this._def)}and(e){return wr.create(this,e,this._def)}transform(e){return new nn({...ne(this._def),schema:this,typeName:X.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Ir({...ne(this._def),innerType:this,defaultValue:t,typeName:X.ZodDefault})}brand(){return new Pl({typeName:X.ZodBranded,type:this,...ne(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Cr({...ne(this._def),innerType:this,catchValue:t,typeName:X.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Nr.create(this,e)}readonly(){return kr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const QI=/^c[^\s-]{8,}$/i,XI=/^[0-9a-z]+$/,YI=/^[0-9A-HJKMNP-TV-Z]{26}$/,JI=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,eC=/^[a-z0-9_-]{21}$/i,tC=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,nC=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iC="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let cc;const sC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rC=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,oC=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,am="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",aC=new RegExp(`^${am}$`);function cm(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function cC(n){return new RegExp(`^${cm(n)}$`)}function lm(n){let e=`${am}T${cm(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function lC(n,e){return!!((e==="v4"||!e)&&sC.test(n)||(e==="v6"||!e)&&rC.test(n))}class Qt extends se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==H.string){const r=this._getOrReturnCtx(e);return $(r,{code:j.invalid_type,expected:H.string,received:r.parsedType}),Y}const i=new dt;let s;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:j.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="max")e.data.length>r.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:j.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="length"){const o=e.data.length>r.value,c=e.data.length<r.value;(o||c)&&(s=this._getOrReturnCtx(e,s),o?$(s,{code:j.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):c&&$(s,{code:j.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),i.dirty())}else if(r.kind==="email")nC.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"email",code:j.invalid_string,message:r.message}),i.dirty());else if(r.kind==="emoji")cc||(cc=new RegExp(iC,"u")),cc.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"emoji",code:j.invalid_string,message:r.message}),i.dirty());else if(r.kind==="uuid")JI.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"uuid",code:j.invalid_string,message:r.message}),i.dirty());else if(r.kind==="nanoid")eC.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"nanoid",code:j.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid")QI.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"cuid",code:j.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid2")XI.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"cuid2",code:j.invalid_string,message:r.message}),i.dirty());else if(r.kind==="ulid")YI.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"ulid",code:j.invalid_string,message:r.message}),i.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),$(s,{validation:"url",code:j.invalid_string,message:r.message}),i.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"regex",code:j.invalid_string,message:r.message}),i.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(s=this._getOrReturnCtx(e,s),$(s,{code:j.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),i.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(s=this._getOrReturnCtx(e,s),$(s,{code:j.invalid_string,validation:{startsWith:r.value},message:r.message}),i.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(s=this._getOrReturnCtx(e,s),$(s,{code:j.invalid_string,validation:{endsWith:r.value},message:r.message}),i.dirty()):r.kind==="datetime"?lm(r).test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{code:j.invalid_string,validation:"datetime",message:r.message}),i.dirty()):r.kind==="date"?aC.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{code:j.invalid_string,validation:"date",message:r.message}),i.dirty()):r.kind==="time"?cC(r).test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{code:j.invalid_string,validation:"time",message:r.message}),i.dirty()):r.kind==="duration"?tC.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"duration",code:j.invalid_string,message:r.message}),i.dirty()):r.kind==="ip"?lC(e.data,r.version)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"ip",code:j.invalid_string,message:r.message}),i.dirty()):r.kind==="base64"?oC.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"base64",code:j.invalid_string,message:r.message}),i.dirty()):ce.assertNever(r);return{status:i.value,value:e.data}}_regex(e,t,i){return this.refinement(s=>e.test(s),{validation:t,code:j.invalid_string,...G.errToObj(i)})}_addCheck(e){return new Qt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...G.errToObj(e)})}url(e){return this._addCheck({kind:"url",...G.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...G.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...G.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...G.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...G.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...G.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...G.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...G.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...G.errToObj(e)})}datetime(e){var t,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(i=e==null?void 0:e.local)!==null&&i!==void 0?i:!1,...G.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...G.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...G.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...G.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...G.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...G.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...G.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...G.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...G.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...G.errToObj(t)})}nonempty(e){return this.min(1,G.errToObj(e))}trim(){return new Qt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Qt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Qt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Qt.create=n=>{var e;return new Qt({checks:[],typeName:X.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...ne(n)})};function uC(n,e){const t=(n.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,s=t>i?t:i,r=parseInt(n.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return r%o/Math.pow(10,s)}class Kn extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==H.number){const r=this._getOrReturnCtx(e);return $(r,{code:j.invalid_type,expected:H.number,received:r.parsedType}),Y}let i;const s=new dt;for(const r of this._def.checks)r.kind==="int"?ce.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),$(i,{code:j.invalid_type,expected:"integer",received:"float",message:r.message}),s.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(i=this._getOrReturnCtx(e,i),$(i,{code:j.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(i=this._getOrReturnCtx(e,i),$(i,{code:j.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):r.kind==="multipleOf"?uC(e.data,r.value)!==0&&(i=this._getOrReturnCtx(e,i),$(i,{code:j.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),$(i,{code:j.not_finite,message:r.message}),s.dirty()):ce.assertNever(r);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,G.toString(t))}gt(e,t){return this.setLimit("min",e,!1,G.toString(t))}lte(e,t){return this.setLimit("max",e,!0,G.toString(t))}lt(e,t){return this.setLimit("max",e,!1,G.toString(t))}setLimit(e,t,i,s){return new Kn({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:G.toString(s)}]})}_addCheck(e){return new Kn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:G.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:G.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:G.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:G.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:G.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ce.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(t===null||i.value>t)&&(t=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Kn.create=n=>new Kn({checks:[],typeName:X.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...ne(n)});class Zn extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==H.bigint){const r=this._getOrReturnCtx(e);return $(r,{code:j.invalid_type,expected:H.bigint,received:r.parsedType}),Y}let i;const s=new dt;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(i=this._getOrReturnCtx(e,i),$(i,{code:j.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(i=this._getOrReturnCtx(e,i),$(i,{code:j.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),$(i,{code:j.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):ce.assertNever(r);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,G.toString(t))}gt(e,t){return this.setLimit("min",e,!1,G.toString(t))}lte(e,t){return this.setLimit("max",e,!0,G.toString(t))}lt(e,t){return this.setLimit("max",e,!1,G.toString(t))}setLimit(e,t,i,s){return new Zn({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:G.toString(s)}]})}_addCheck(e){return new Zn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:G.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Zn.create=n=>{var e;return new Zn({checks:[],typeName:X.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...ne(n)})};class gr extends se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==H.boolean){const i=this._getOrReturnCtx(e);return $(i,{code:j.invalid_type,expected:H.boolean,received:i.parsedType}),Y}return _t(e.data)}}gr.create=n=>new gr({typeName:X.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...ne(n)});class Ci extends se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==H.date){const r=this._getOrReturnCtx(e);return $(r,{code:j.invalid_type,expected:H.date,received:r.parsedType}),Y}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return $(r,{code:j.invalid_date}),Y}const i=new dt;let s;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:j.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),i.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:j.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),i.dirty()):ce.assertNever(r);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ci({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:G.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:G.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ci.create=n=>new Ci({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:X.ZodDate,...ne(n)});class qo extends se{_parse(e){if(this._getType(e)!==H.symbol){const i=this._getOrReturnCtx(e);return $(i,{code:j.invalid_type,expected:H.symbol,received:i.parsedType}),Y}return _t(e.data)}}qo.create=n=>new qo({typeName:X.ZodSymbol,...ne(n)});class yr extends se{_parse(e){if(this._getType(e)!==H.undefined){const i=this._getOrReturnCtx(e);return $(i,{code:j.invalid_type,expected:H.undefined,received:i.parsedType}),Y}return _t(e.data)}}yr.create=n=>new yr({typeName:X.ZodUndefined,...ne(n)});class vr extends se{_parse(e){if(this._getType(e)!==H.null){const i=this._getOrReturnCtx(e);return $(i,{code:j.invalid_type,expected:H.null,received:i.parsedType}),Y}return _t(e.data)}}vr.create=n=>new vr({typeName:X.ZodNull,...ne(n)});class ms extends se{constructor(){super(...arguments),this._any=!0}_parse(e){return _t(e.data)}}ms.create=n=>new ms({typeName:X.ZodAny,...ne(n)});class vi extends se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _t(e.data)}}vi.create=n=>new vi({typeName:X.ZodUnknown,...ne(n)});class Rn extends se{_parse(e){const t=this._getOrReturnCtx(e);return $(t,{code:j.invalid_type,expected:H.never,received:t.parsedType}),Y}}Rn.create=n=>new Rn({typeName:X.ZodNever,...ne(n)});class $o extends se{_parse(e){if(this._getType(e)!==H.undefined){const i=this._getOrReturnCtx(e);return $(i,{code:j.invalid_type,expected:H.void,received:i.parsedType}),Y}return _t(e.data)}}$o.create=n=>new $o({typeName:X.ZodVoid,...ne(n)});class en extends se{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),s=this._def;if(t.parsedType!==H.array)return $(t,{code:j.invalid_type,expected:H.array,received:t.parsedType}),Y;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,c=t.data.length<s.exactLength.value;(o||c)&&($(t,{code:o?j.too_big:j.too_small,minimum:c?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),i.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&($(t,{code:j.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),i.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&($(t,{code:j.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((o,c)=>s.type._parseAsync(new mn(t,o,t.path,c)))).then(o=>dt.mergeArray(i,o));const r=[...t.data].map((o,c)=>s.type._parseSync(new mn(t,o,t.path,c)));return dt.mergeArray(i,r)}get element(){return this._def.type}min(e,t){return new en({...this._def,minLength:{value:e,message:G.toString(t)}})}max(e,t){return new en({...this._def,maxLength:{value:e,message:G.toString(t)}})}length(e,t){return new en({...this._def,exactLength:{value:e,message:G.toString(t)}})}nonempty(e){return this.min(1,e)}}en.create=(n,e)=>new en({type:n,minLength:null,maxLength:null,exactLength:null,typeName:X.ZodArray,...ne(e)});function qi(n){if(n instanceof Te){const e={};for(const t in n.shape){const i=n.shape[t];e[t]=dn.create(qi(i))}return new Te({...n._def,shape:()=>e})}else return n instanceof en?new en({...n._def,type:qi(n.element)}):n instanceof dn?dn.create(qi(n.unwrap())):n instanceof Xn?Xn.create(qi(n.unwrap())):n instanceof gn?gn.create(n.items.map(e=>qi(e))):n}class Te extends se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=ce.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==H.object){const u=this._getOrReturnCtx(e);return $(u,{code:j.invalid_type,expected:H.object,received:u.parsedType}),Y}const{status:i,ctx:s}=this._processInputParams(e),{shape:r,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Rn&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||c.push(u);const l=[];for(const u of o){const d=r[u],p=s.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new mn(s,p,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Rn){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of c)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")c.length>0&&($(s,{code:j.unrecognized_keys,keys:c}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of c){const p=s.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new mn(s,p,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const p=await d.key,m=await d.value;u.push({key:p,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>dt.mergeObjectSync(i,u)):dt.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return G.errToObj,new Te({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,i)=>{var s,r,o,c;const l=(o=(r=(s=this._def).errorMap)===null||r===void 0?void 0:r.call(s,t,i).message)!==null&&o!==void 0?o:i.defaultError;return t.code==="unrecognized_keys"?{message:(c=G.errToObj(e).message)!==null&&c!==void 0?c:l}:{message:l}}}:{}})}strip(){return new Te({...this._def,unknownKeys:"strip"})}passthrough(){return new Te({...this._def,unknownKeys:"passthrough"})}extend(e){return new Te({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Te({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:X.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Te({...this._def,catchall:e})}pick(e){const t={};return ce.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(t[i]=this.shape[i])}),new Te({...this._def,shape:()=>t})}omit(e){const t={};return ce.objectKeys(this.shape).forEach(i=>{e[i]||(t[i]=this.shape[i])}),new Te({...this._def,shape:()=>t})}deepPartial(){return qi(this)}partial(e){const t={};return ce.objectKeys(this.shape).forEach(i=>{const s=this.shape[i];e&&!e[i]?t[i]=s:t[i]=s.optional()}),new Te({...this._def,shape:()=>t})}required(e){const t={};return ce.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])t[i]=this.shape[i];else{let r=this.shape[i];for(;r instanceof dn;)r=r._def.innerType;t[i]=r}}),new Te({...this._def,shape:()=>t})}keyof(){return um(ce.objectKeys(this.shape))}}Te.create=(n,e)=>new Te({shape:()=>n,unknownKeys:"strip",catchall:Rn.create(),typeName:X.ZodObject,...ne(e)});Te.strictCreate=(n,e)=>new Te({shape:()=>n,unknownKeys:"strict",catchall:Rn.create(),typeName:X.ZodObject,...ne(e)});Te.lazycreate=(n,e)=>new Te({shape:n,unknownKeys:"strip",catchall:Rn.create(),typeName:X.ZodObject,...ne(e)});class _r extends se{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;function s(r){for(const c of r)if(c.result.status==="valid")return c.result;for(const c of r)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const o=r.map(c=>new Pt(c.ctx.common.issues));return $(t,{code:j.invalid_union,unionErrors:o}),Y}if(t.common.async)return Promise.all(i.map(async r=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let r;const o=[];for(const l of i){const u={...t,common:{...t.common,issues:[]},parent:null},d=l._parseSync({data:t.data,path:t.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!r&&(r={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const c=o.map(l=>new Pt(l));return $(t,{code:j.invalid_union,unionErrors:c}),Y}}get options(){return this._def.options}}_r.create=(n,e)=>new _r({options:n,typeName:X.ZodUnion,...ne(e)});const bn=n=>n instanceof Er?bn(n.schema):n instanceof nn?bn(n.innerType()):n instanceof Tr?[n.value]:n instanceof Qn?n.options:n instanceof xr?ce.objectValues(n.enum):n instanceof Ir?bn(n._def.innerType):n instanceof yr?[void 0]:n instanceof vr?[null]:n instanceof dn?[void 0,...bn(n.unwrap())]:n instanceof Xn?[null,...bn(n.unwrap())]:n instanceof Pl||n instanceof kr?bn(n.unwrap()):n instanceof Cr?bn(n._def.innerType):[];class ma extends se{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==H.object)return $(t,{code:j.invalid_type,expected:H.object,received:t.parsedType}),Y;const i=this.discriminator,s=t.data[i],r=this.optionsMap.get(s);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):($(t,{code:j.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,i){const s=new Map;for(const r of t){const o=bn(r.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of o){if(s.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);s.set(c,r)}}return new ma({typeName:X.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ne(i)})}}function Uc(n,e){const t=On(n),i=On(e);if(n===e)return{valid:!0,data:n};if(t===H.object&&i===H.object){const s=ce.objectKeys(e),r=ce.objectKeys(n).filter(c=>s.indexOf(c)!==-1),o={...n,...e};for(const c of r){const l=Uc(n[c],e[c]);if(!l.valid)return{valid:!1};o[c]=l.data}return{valid:!0,data:o}}else if(t===H.array&&i===H.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let r=0;r<n.length;r++){const o=n[r],c=e[r],l=Uc(o,c);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===H.date&&i===H.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class wr extends se{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=(r,o)=>{if(Bc(r)||Bc(o))return Y;const c=Uc(r.value,o.value);return c.valid?((jc(r)||jc(o))&&t.dirty(),{status:t.value,value:c.data}):($(i,{code:j.invalid_intersection_types}),Y)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([r,o])=>s(r,o)):s(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}wr.create=(n,e,t)=>new wr({left:n,right:e,typeName:X.ZodIntersection,...ne(t)});class gn extends se{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==H.array)return $(i,{code:j.invalid_type,expected:H.array,received:i.parsedType}),Y;if(i.data.length<this._def.items.length)return $(i,{code:j.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&i.data.length>this._def.items.length&&($(i,{code:j.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...i.data].map((o,c)=>{const l=this._def.items[c]||this._def.rest;return l?l._parse(new mn(i,o,i.path,c)):null}).filter(o=>!!o);return i.common.async?Promise.all(r).then(o=>dt.mergeArray(t,o)):dt.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new gn({...this._def,rest:e})}}gn.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new gn({items:n,typeName:X.ZodTuple,rest:null,...ne(e)})};class br extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==H.object)return $(i,{code:j.invalid_type,expected:H.object,received:i.parsedType}),Y;const s=[],r=this._def.keyType,o=this._def.valueType;for(const c in i.data)s.push({key:r._parse(new mn(i,c,i.path,c)),value:o._parse(new mn(i,i.data[c],i.path,c)),alwaysSet:c in i.data});return i.common.async?dt.mergeObjectAsync(t,s):dt.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,i){return t instanceof se?new br({keyType:e,valueType:t,typeName:X.ZodRecord,...ne(i)}):new br({keyType:Qt.create(),valueType:e,typeName:X.ZodRecord,...ne(t)})}}class Ho extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==H.map)return $(i,{code:j.invalid_type,expected:H.map,received:i.parsedType}),Y;const s=this._def.keyType,r=this._def.valueType,o=[...i.data.entries()].map(([c,l],u)=>({key:s._parse(new mn(i,c,i.path,[u,"key"])),value:r._parse(new mn(i,l,i.path,[u,"value"]))}));if(i.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return Y;(u.status==="dirty"||d.status==="dirty")&&t.dirty(),c.set(u.value,d.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const l of o){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return Y;(u.status==="dirty"||d.status==="dirty")&&t.dirty(),c.set(u.value,d.value)}return{status:t.value,value:c}}}}Ho.create=(n,e,t)=>new Ho({valueType:e,keyType:n,typeName:X.ZodMap,...ne(t)});class ki extends se{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==H.set)return $(i,{code:j.invalid_type,expected:H.set,received:i.parsedType}),Y;const s=this._def;s.minSize!==null&&i.data.size<s.minSize.value&&($(i,{code:j.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&i.data.size>s.maxSize.value&&($(i,{code:j.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const r=this._def.valueType;function o(l){const u=new Set;for(const d of l){if(d.status==="aborted")return Y;d.status==="dirty"&&t.dirty(),u.add(d.value)}return{status:t.value,value:u}}const c=[...i.data.values()].map((l,u)=>r._parse(new mn(i,l,i.path,u)));return i.common.async?Promise.all(c).then(l=>o(l)):o(c)}min(e,t){return new ki({...this._def,minSize:{value:e,message:G.toString(t)}})}max(e,t){return new ki({...this._def,maxSize:{value:e,message:G.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ki.create=(n,e)=>new ki({valueType:n,minSize:null,maxSize:null,typeName:X.ZodSet,...ne(e)});class es extends se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==H.function)return $(t,{code:j.invalid_type,expected:H.function,received:t.parsedType}),Y;function i(c,l){return jo({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Bo(),ps].filter(u=>!!u),issueData:{code:j.invalid_arguments,argumentsError:l}})}function s(c,l){return jo({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Bo(),ps].filter(u=>!!u),issueData:{code:j.invalid_return_type,returnTypeError:l}})}const r={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof gs){const c=this;return _t(async function(...l){const u=new Pt([]),d=await c._def.args.parseAsync(l,r).catch(g=>{throw u.addIssue(i(l,g)),u}),p=await Reflect.apply(o,this,d);return await c._def.returns._def.type.parseAsync(p,r).catch(g=>{throw u.addIssue(s(p,g)),u})})}else{const c=this;return _t(function(...l){const u=c._def.args.safeParse(l,r);if(!u.success)throw new Pt([i(l,u.error)]);const d=Reflect.apply(o,this,u.data),p=c._def.returns.safeParse(d,r);if(!p.success)throw new Pt([s(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new es({...this._def,args:gn.create(e).rest(vi.create())})}returns(e){return new es({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,i){return new es({args:e||gn.create([]).rest(vi.create()),returns:t||vi.create(),typeName:X.ZodFunction,...ne(i)})}}class Er extends se{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Er.create=(n,e)=>new Er({getter:n,typeName:X.ZodLazy,...ne(e)});class Tr extends se{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return $(t,{received:t.data,code:j.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:e.data}}get value(){return this._def.value}}Tr.create=(n,e)=>new Tr({value:n,typeName:X.ZodLiteral,...ne(e)});function um(n,e){return new Qn({values:n,typeName:X.ZodEnum,...ne(e)})}class Qn extends se{constructor(){super(...arguments),$s.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),i=this._def.values;return $(t,{expected:ce.joinValues(i),received:t.parsedType,code:j.invalid_type}),Y}if(Uo(this,$s)||om(this,$s,new Set(this._def.values)),!Uo(this,$s).has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return $(t,{received:t.data,code:j.invalid_enum_value,options:i}),Y}return _t(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Qn.create(e,{...this._def,...t})}exclude(e,t=this._def){return Qn.create(this.options.filter(i=>!e.includes(i)),{...this._def,...t})}}$s=new WeakMap;Qn.create=um;class xr extends se{constructor(){super(...arguments),Hs.set(this,void 0)}_parse(e){const t=ce.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==H.string&&i.parsedType!==H.number){const s=ce.objectValues(t);return $(i,{expected:ce.joinValues(s),received:i.parsedType,code:j.invalid_type}),Y}if(Uo(this,Hs)||om(this,Hs,new Set(ce.getValidEnumValues(this._def.values))),!Uo(this,Hs).has(e.data)){const s=ce.objectValues(t);return $(i,{received:i.data,code:j.invalid_enum_value,options:s}),Y}return _t(e.data)}get enum(){return this._def.values}}Hs=new WeakMap;xr.create=(n,e)=>new xr({values:n,typeName:X.ZodNativeEnum,...ne(e)});class gs extends se{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==H.promise&&t.common.async===!1)return $(t,{code:j.invalid_type,expected:H.promise,received:t.parsedType}),Y;const i=t.parsedType===H.promise?t.data:Promise.resolve(t.data);return _t(i.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}gs.create=(n,e)=>new gs({type:n,typeName:X.ZodPromise,...ne(e)});class nn extends se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===X.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=this._def.effect||null,r={addIssue:o=>{$(i,o),o.fatal?t.abort():t.dirty()},get path(){return i.path}};if(r.addIssue=r.addIssue.bind(r),s.type==="preprocess"){const o=s.transform(i.data,r);if(i.common.async)return Promise.resolve(o).then(async c=>{if(t.value==="aborted")return Y;const l=await this._def.schema._parseAsync({data:c,path:i.path,parent:i});return l.status==="aborted"?Y:l.status==="dirty"||t.value==="dirty"?Gi(l.value):l});{if(t.value==="aborted")return Y;const c=this._def.schema._parseSync({data:o,path:i.path,parent:i});return c.status==="aborted"?Y:c.status==="dirty"||t.value==="dirty"?Gi(c.value):c}}if(s.type==="refinement"){const o=c=>{const l=s.refinement(c,r);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(i.common.async===!1){const c=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return c.status==="aborted"?Y:(c.status==="dirty"&&t.dirty(),o(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(c=>c.status==="aborted"?Y:(c.status==="dirty"&&t.dirty(),o(c.value).then(()=>({status:t.value,value:c.value}))))}if(s.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!pr(o))return o;const c=s.transform(o.value,r);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>pr(o)?Promise.resolve(s.transform(o.value,r)).then(c=>({status:t.value,value:c})):o);ce.assertNever(s)}}nn.create=(n,e,t)=>new nn({schema:n,typeName:X.ZodEffects,effect:e,...ne(t)});nn.createWithPreprocess=(n,e,t)=>new nn({schema:e,effect:{type:"preprocess",transform:n},typeName:X.ZodEffects,...ne(t)});class dn extends se{_parse(e){return this._getType(e)===H.undefined?_t(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}dn.create=(n,e)=>new dn({innerType:n,typeName:X.ZodOptional,...ne(e)});class Xn extends se{_parse(e){return this._getType(e)===H.null?_t(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xn.create=(n,e)=>new Xn({innerType:n,typeName:X.ZodNullable,...ne(e)});class Ir extends se{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===H.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ir.create=(n,e)=>new Ir({innerType:n,typeName:X.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ne(e)});class Cr extends se{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return mr(s)?s.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Pt(i.common.issues)},input:i.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Pt(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Cr.create=(n,e)=>new Cr({innerType:n,typeName:X.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ne(e)});class Wo extends se{_parse(e){if(this._getType(e)!==H.nan){const i=this._getOrReturnCtx(e);return $(i,{code:j.invalid_type,expected:H.nan,received:i.parsedType}),Y}return{status:"valid",value:e.data}}}Wo.create=n=>new Wo({typeName:X.ZodNaN,...ne(n)});const hC=Symbol("zod_brand");class Pl extends se{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class Nr extends se{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Y:r.status==="dirty"?(t.dirty(),Gi(r.value)):this._def.out._parseAsync({data:r.value,path:i.path,parent:i})})();{const s=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Y:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:i.path,parent:i})}}static create(e,t){return new Nr({in:e,out:t,typeName:X.ZodPipeline})}}class kr extends se{_parse(e){const t=this._def.innerType._parse(e),i=s=>(pr(s)&&(s.value=Object.freeze(s.value)),s);return mr(t)?t.then(s=>i(s)):i(t)}unwrap(){return this._def.innerType}}kr.create=(n,e)=>new kr({innerType:n,typeName:X.ZodReadonly,...ne(e)});function hm(n,e={},t){return n?ms.create().superRefine((i,s)=>{var r,o;if(!n(i)){const c=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(r=c.fatal)!==null&&r!==void 0?r:t)!==null&&o!==void 0?o:!0,u=typeof c=="string"?{message:c}:c;s.addIssue({code:"custom",...u,fatal:l})}}):ms.create()}const dC={object:Te.lazycreate};var X;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(X||(X={}));const fC=(n,e={message:`Input not instance of ${n.name}`})=>hm(t=>t instanceof n,e),dm=Qt.create,fm=Kn.create,pC=Wo.create,mC=Zn.create,pm=gr.create,gC=Ci.create,yC=qo.create,vC=yr.create,_C=vr.create,wC=ms.create,bC=vi.create,EC=Rn.create,TC=$o.create,xC=en.create,IC=Te.create,CC=Te.strictCreate,kC=_r.create,AC=ma.create,RC=wr.create,SC=gn.create,PC=br.create,DC=Ho.create,MC=ki.create,OC=es.create,VC=Er.create,NC=Tr.create,LC=Qn.create,FC=xr.create,zC=gs.create,Pd=nn.create,BC=dn.create,jC=Xn.create,UC=nn.createWithPreprocess,qC=Nr.create,$C=()=>dm().optional(),HC=()=>fm().optional(),WC=()=>pm().optional(),GC={string:n=>Qt.create({...n,coerce:!0}),number:n=>Kn.create({...n,coerce:!0}),boolean:n=>gr.create({...n,coerce:!0}),bigint:n=>Zn.create({...n,coerce:!0}),date:n=>Ci.create({...n,coerce:!0})},KC=Y;var mo=Object.freeze({__proto__:null,defaultErrorMap:ps,setErrorMap:KI,getErrorMap:Bo,makeIssue:jo,EMPTY_PATH:ZI,addIssueToContext:$,ParseStatus:dt,INVALID:Y,DIRTY:Gi,OK:_t,isAborted:Bc,isDirty:jc,isValid:pr,isAsync:mr,get util(){return ce},get objectUtil(){return zc},ZodParsedType:H,getParsedType:On,ZodType:se,datetimeRegex:lm,ZodString:Qt,ZodNumber:Kn,ZodBigInt:Zn,ZodBoolean:gr,ZodDate:Ci,ZodSymbol:qo,ZodUndefined:yr,ZodNull:vr,ZodAny:ms,ZodUnknown:vi,ZodNever:Rn,ZodVoid:$o,ZodArray:en,ZodObject:Te,ZodUnion:_r,ZodDiscriminatedUnion:ma,ZodIntersection:wr,ZodTuple:gn,ZodRecord:br,ZodMap:Ho,ZodSet:ki,ZodFunction:es,ZodLazy:Er,ZodLiteral:Tr,ZodEnum:Qn,ZodNativeEnum:xr,ZodPromise:gs,ZodEffects:nn,ZodTransformer:nn,ZodOptional:dn,ZodNullable:Xn,ZodDefault:Ir,ZodCatch:Cr,ZodNaN:Wo,BRAND:hC,ZodBranded:Pl,ZodPipeline:Nr,ZodReadonly:kr,custom:hm,Schema:se,ZodSchema:se,late:dC,get ZodFirstPartyTypeKind(){return X},coerce:GC,any:wC,array:xC,bigint:mC,boolean:pm,date:gC,discriminatedUnion:AC,effect:Pd,enum:LC,function:OC,instanceof:fC,intersection:RC,lazy:VC,literal:NC,map:DC,nan:pC,nativeEnum:FC,never:EC,null:_C,nullable:jC,number:fm,object:IC,oboolean:WC,onumber:HC,optional:BC,ostring:$C,pipeline:qC,preprocess:UC,promise:zC,record:PC,set:MC,strictObject:CC,string:dm,symbol:yC,transformer:Pd,tuple:SC,undefined:vC,union:kC,unknown:bC,void:TC,NEVER:KC,ZodIssueCode:j,quotelessJson:GI,ZodError:Pt}),ZC="firebase",QC="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn(ZC,QC,"app");const mm="@firebase/installations",Dl="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=1e4,ym=`w:${Dl}`,vm="FIS_v2",XC="https://firebaseinstallations.googleapis.com/v1",YC=60*60*1e3,JC="installations",ek="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ai=new ea(JC,ek,tk);function _m(n){return n instanceof Yn&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm({projectId:n}){return`${XC}/projects/${n}/installations`}function bm(n){return{token:n.token,requestStatus:2,expiresIn:ik(n.expiresIn),creationTime:Date.now()}}async function Em(n,e){const i=(await e.json()).error;return Ai.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Tm({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function nk(n,{refreshToken:e}){const t=Tm(n);return t.append("Authorization",sk(e)),t}async function xm(n){const e=await n();return e.status>=500&&e.status<600?n():e}function ik(n){return Number(n.replace("s","000"))}function sk(n){return`${vm} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=wm(n),s=Tm(n),r=e.getImmediate({optional:!0});if(r){const u=await r.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:t,authVersion:vm,appId:n.appId,sdkVersion:ym},c={method:"POST",headers:s,body:JSON.stringify(o)},l=await xm(()=>fetch(i,c));if(l.ok){const u=await l.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:bm(u.authToken)}}else throw await Em("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=/^[cdef][\w-]{21}$/,qc="";function ck(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=lk(n);return ak.test(t)?t:qc}catch{return qc}}function lk(n){return ok(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm=new Map;function km(n,e){const t=ga(n);Am(t,e),uk(t,e)}function Am(n,e){const t=Cm.get(n);if(t)for(const i of t)i(e)}function uk(n,e){const t=hk();t&&t.postMessage({key:n,fid:e}),dk()}let mi=null;function hk(){return!mi&&"BroadcastChannel"in self&&(mi=new BroadcastChannel("[Firebase] FID Change"),mi.onmessage=n=>{Am(n.data.key,n.data.fid)}),mi}function dk(){Cm.size===0&&mi&&(mi.close(),mi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="firebase-installations-database",pk=1,Ri="firebase-installations-store";let lc=null;function Ml(){return lc||(lc=Of(fk,pk,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ri)}}})),lc}async function Go(n,e){const t=ga(n),s=(await Ml()).transaction(Ri,"readwrite"),r=s.objectStore(Ri),o=await r.get(t);return await r.put(e,t),await s.done,(!o||o.fid!==e.fid)&&km(n,e.fid),e}async function Rm(n){const e=ga(n),i=(await Ml()).transaction(Ri,"readwrite");await i.objectStore(Ri).delete(e),await i.done}async function ya(n,e){const t=ga(n),s=(await Ml()).transaction(Ri,"readwrite"),r=s.objectStore(Ri),o=await r.get(t),c=e(o);return c===void 0?await r.delete(t):await r.put(c,t),await s.done,c&&(!o||o.fid!==c.fid)&&km(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(n){let e;const t=await ya(n.appConfig,i=>{const s=mk(i),r=gk(n,s);return e=r.registrationPromise,r.installationEntry});return t.fid===qc?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function mk(n){const e=n||{fid:ck(),registrationStatus:0};return Sm(e)}function gk(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ai.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=yk(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vk(n)}:{installationEntry:e}}async function yk(n,e){try{const t=await rk(n,e);return Go(n.appConfig,t)}catch(t){throw _m(t)&&t.customData.serverCode===409?await Rm(n.appConfig):await Go(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function vk(n){let e=await Dd(n.appConfig);for(;e.registrationStatus===1;)await Im(100),e=await Dd(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await Ol(n);return i||t}return e}function Dd(n){return ya(n,e=>{if(!e)throw Ai.create("installation-not-found");return Sm(e)})}function Sm(n){return _k(n)?{fid:n.fid,registrationStatus:0}:n}function _k(n){return n.registrationStatus===1&&n.registrationTime+gm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk({appConfig:n,heartbeatServiceProvider:e},t){const i=bk(n,t),s=nk(n,t),r=e.getImmediate({optional:!0});if(r){const u=await r.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:ym,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(o)},l=await xm(()=>fetch(i,c));if(l.ok){const u=await l.json();return bm(u)}else throw await Em("Generate Auth Token",l)}function bk(n,{fid:e}){return`${wm(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(n,e=!1){let t;const i=await ya(n.appConfig,r=>{if(!Pm(r))throw Ai.create("not-registered");const o=r.authToken;if(!e&&xk(o))return r;if(o.requestStatus===1)return t=Ek(n,e),r;{if(!navigator.onLine)throw Ai.create("app-offline");const c=Ck(r);return t=Tk(n,c),c}});return t?await t:i.authToken}async function Ek(n,e){let t=await Md(n.appConfig);for(;t.authToken.requestStatus===1;)await Im(100),t=await Md(n.appConfig);const i=t.authToken;return i.requestStatus===0?Vl(n,e):i}function Md(n){return ya(n,e=>{if(!Pm(e))throw Ai.create("not-registered");const t=e.authToken;return kk(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Tk(n,e){try{const t=await wk(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await Go(n.appConfig,i),t}catch(t){if(_m(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Rm(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Go(n.appConfig,i)}throw t}}function Pm(n){return n!==void 0&&n.registrationStatus===2}function xk(n){return n.requestStatus===2&&!Ik(n)}function Ik(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+YC}function Ck(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function kk(n){return n.requestStatus===1&&n.requestTime+gm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(n){const e=n,{installationEntry:t,registrationPromise:i}=await Ol(e);return i?i.catch(console.error):Vl(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(n,e=!1){const t=n;return await Sk(t),(await Vl(t,e)).token}async function Sk(n){const{registrationPromise:e}=await Ol(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n){if(!n||!n.options)throw uc("App Configuration");if(!n.name)throw uc("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw uc(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function uc(n){return Ai.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="installations",Dk="installations-internal",Mk=n=>{const e=n.getProvider("app").getImmediate(),t=Pk(e),i=nl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Ok=n=>{const e=n.getProvider("app").getImmediate(),t=nl(e,Dm).getImmediate();return{getId:()=>Ak(t),getToken:s=>Rk(t,s)}};function Vk(){$n(new In(Dm,Mk,"PUBLIC")),$n(new In(Dk,Ok,"PRIVATE"))}Vk();cn(mm,Dl);cn(mm,Dl,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="analytics",Nk="firebase_id",Lk="origin",Fk=60*1e3,zk="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nl="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt=new el("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Nt=new ea("analytics","Analytics",Bk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(n){if(!n.startsWith(Nl)){const e=Nt.create("invalid-gtag-resource",{gtagURL:n});return bt.warn(e.message),""}return n}function Mm(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Uk(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function qk(n,e){const t=Uk("firebase-js-sdk-policy",{createScriptURL:jk}),i=document.createElement("script"),s=`${Nl}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function $k(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Hk(n,e,t,i,s,r){const o=i[s];try{if(o)await e[o];else{const l=(await Mm(t)).find(u=>u.measurementId===s);l&&await e[l.appId]}}catch(c){bt.error(c)}n("config",s,r)}async function Wk(n,e,t,i,s){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const c=await Mm(t);for(const l of o){const u=c.find(p=>p.measurementId===l),d=u&&e[u.appId];if(d)r.push(d);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),n("event",i,s||{})}catch(r){bt.error(r)}}function Gk(n,e,t,i){async function s(r,...o){try{if(r==="event"){const[c,l]=o;await Wk(n,e,t,c,l)}else if(r==="config"){const[c,l]=o;await Hk(n,e,t,i,c,l)}else if(r==="consent"){const[c,l]=o;n("consent",c,l)}else if(r==="get"){const[c,l,u]=o;n("get",c,l,u)}else if(r==="set"){const[c]=o;n("set",c)}else n(r,...o)}catch(c){bt.error(c)}}return s}function Kk(n,e,t,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=Gk(r,n,e,t),{gtagCore:r,wrappedGtag:window[s]}}function Zk(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Nl)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=30,Xk=1e3;class Yk{constructor(e={},t=Xk){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Om=new Yk;function Jk(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function eA(n){var e;const{appId:t,apiKey:i}=n,s={method:"GET",headers:Jk(i)},r=zk.replace("{app-id}",t),o=await fetch(r,s);if(o.status!==200&&o.status!==304){let c="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(c=l.error.message)}catch{}throw Nt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function tA(n,e=Om,t){const{appId:i,apiKey:s,measurementId:r}=n.options;if(!i)throw Nt.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw Nt.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new sA;return setTimeout(async()=>{c.abort()},Fk),Vm({appId:i,apiKey:s,measurementId:r},o,c,e)}async function Vm(n,{throttleEndTimeMillis:e,backoffCount:t},i,s=Om){var r;const{appId:o,measurementId:c}=n;try{await nA(i,e)}catch(l){if(c)return bt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:c};throw l}try{const l=await eA(n);return s.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!iA(u)){if(s.deleteThrottleMetadata(o),c)return bt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:c};throw l}const d=Number((r=u==null?void 0:u.customData)===null||r===void 0?void 0:r.httpStatus)===503?Fh(t,s.intervalMillis,Qk):Fh(t,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return s.setThrottleMetadata(o,p),bt.debug(`Calling attemptFetch again in ${d} millis`),Vm(n,p,i,s)}}function nA(n,e){return new Promise((t,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(r),i(Nt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function iA(n){if(!(n instanceof Yn)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class sA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function rA(n,e,t,i,s){if(s&&s.global){n("event",t,i);return}else{const r=await e,o=Object.assign(Object.assign({},i),{send_to:r});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(){if(Sf())try{await Pf()}catch(n){return bt.warn(Nt.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return bt.warn(Nt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function aA(n,e,t,i,s,r,o){var c;const l=tA(n);l.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&bt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>bt.error(g)),e.push(l);const u=oA().then(g=>{if(g)return i.getId()}),[d,p]=await Promise.all([l,u]);Zk(r)||qk(r,d.measurementId),s("js",new Date);const m=(c=o==null?void 0:o.config)!==null&&c!==void 0?c:{};return m[Lk]="firebase",m.update=!0,p!=null&&(m[Nk]=p),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.app=e}_delete(){return delete Ys[this.app.options.appId],Promise.resolve()}}let Ys={},Vd=[];const Nd={};let hc="dataLayer",lA="gtag",Ld,Nm,Fd=!1;function uA(){const n=[];if(v1()&&n.push("This is a browser extension environment."),w1()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),t=Nt.create("invalid-analytics-context",{errorInfo:e});bt.warn(t.message)}}function hA(n,e,t){uA();const i=n.options.appId;if(!i)throw Nt.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)bt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Nt.create("no-api-key");if(Ys[i]!=null)throw Nt.create("already-exists",{id:i});if(!Fd){$k(hc);const{wrappedGtag:r,gtagCore:o}=Kk(Ys,Vd,Nd,hc,lA);Nm=r,Ld=o,Fd=!0}return Ys[i]=aA(n,Vd,Nd,e,Ld,hc,t),new cA(n)}function dA(n,e,t,i){n=os(n),rA(Nm,Ys[n.app.options.appId],e,t,i).catch(s=>bt.error(s))}const zd="@firebase/analytics",Bd="0.10.7";function fA(){$n(new In(Od,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return hA(i,s,t)},"PUBLIC")),$n(new In("analytics-internal",n,"PRIVATE")),cn(zd,Bd),cn(zd,Bd,"esm2017");function n(e){try{const t=e.getProvider(Od).getImmediate();return{logEvent:(i,s,r)=>dA(t,i,s,r)}}catch(t){throw Nt.create("interop-component-reg-failed",{reason:t})}}}fA();const pA={appId:xg,apiKey:Ig,authDomain:Cg,projectId:kg,storageBucket:Ag,messagingSenderId:Rg,measurementId:Sg};Vf(pA);const Ll=kI(),mA=mo.object({name:mo.string(),password:mo.string(),content:mo.string()});async function jd(n){const e=fa(Ll,"wedding",Fl(n)),t=Wp(e,"guestbook"),i=await $I(t);return[i.docs.reduce((r,o)=>{const c=o.data(),l=c.createdTimestamp.toDate(),u=$c(l,"yyyy-M-d HH:mm"),d={...wg(c,"createdTimestamp"),id:o.id,date:l,dateStr:u};return r.push(d),r},[]),i]}async function gA(n,e){const t=fa(Ll,"wedding",Fl(n)),i=Wp(t,"guestbook");try{const s=Le.now(),r=await WI(i,{...e,createdTimestamp:s});return console.log("Document written with ID: ",r.id),r}catch(s){console.error("Error adding document: ",s)}}async function yA(n,e){const t=fa(Ll,"wedding",Fl(n),"guestbook",e);try{await HI(t),console.log("Document deleted successfully!")}catch(i){console.error("Error deleting document:",i)}}function Fl(n){return n.replace(/[^-_a-zA-Z0-9/]/g,"-").replace(/-{2,}/g,"-").replaceAll("/","--")}var vA=Ko('<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M368 368L144 144m224 0L144 368"></path></svg>'),_A=(n,e,t)=>e(t()),wA=Fe('<div class="letter-item ver4_guestbook_bg_white svelte-1bvv4qy"><div class="author-info svelte-1bvv4qy"><div><span>from.</span><span class="author-name svelte-1bvv4qy"> </span></div> <button name="delete-letter" class="svelte-1bvv4qy"><!></button></div> <div class="message-info svelte-1bvv4qy"><div class="message-content ver4-guestbook-font-color svelte-1bvv4qy"> </div> <time class="post-time svelte-1bvv4qy"> </time></div></div>'),bA=Fe('<div class="guestbook-all-posts svelte-1bvv4qy"><div class="modal"><button class="modal-background svelte-1bvv4qy"></button> <div class="modal-box ver4-bg svelte-1bvv4qy"><header style="padding-top: 15px;" class="svelte-1bvv4qy"><p class="line-1">방명록 전체보기</p></header> <div style="text-align: left; margin-top: 40px;"></div></div></div></div>');function EA(n,e){zt(e,!0);const t=m=>{var g=vA();O(g),M(g),Ee(m,g)};let i=ci(e,"container",3,"main");function s(m){m.key==="Escape"&&e.onClose()}function r(m){confirm("정말 삭제하시겠습니까?")&&e.deleteLetter(m)}var o=bA();Io("keydown",Zo,s,!1);var c=O(o),l=O(c);l.__click=function(...m){var g;return(g=e.onClose)==null?void 0:g.apply(this,m)};var u=R(R(l,!0)),d=O(u);O(d),M(d);var p=R(R(d,!0));Js(p,73,()=>e.letters,er,(m,g,x)=>{let E=()=>Oe(Oe(g)).id,k=()=>Oe(Oe(g)).content,S=()=>Oe(Oe(g)).name,D=()=>Oe(Oe(g)).dateStr;var F=wA(),V=O(F),L=O(V),N=O(L),C=R(N),v=O(C);M(C),M(L);var w=R(R(L,!0));w.__click=[_A,r,E];var I=O(w);t(I),M(w),M(V);var b=R(R(V,!0)),T=O(b),_=O(T);M(T);var U=R(R(T,!0)),ie=O(U);M(U),M(b),M(F),Et(()=>{Ue(v,S()),Ue(_,k()),yt(U,"datetime",D()),Ue(ie,D())}),Ee(m,F)}),M(p),M(u),M(c),M(o),Ud(c,(m,g)=>$d(m,g),i),Ee(n,o),Bt()}ys(["click"]);var TA=(n,e)=>e.onClose(),xA=Fe('<div class="guestbook-new-post"><div class="modal"><button class="modal-background svelte-1sf2rfx"></button> <div class="modal-box svelte-1sf2rfx"><header class="svelte-1sf2rfx"><p class="line-1 svelte-1sf2rfx">방명록 작성하기</p> <p class="line-2 svelte-1sf2rfx">신랑신부의 결혼을 축하해주세요</p></header> <form class="svelte-1sf2rfx"><div class="row"><p class="input-title">작성자 성함<span class="required svelte-1sf2rfx">*</span></p> <div class="input-wrap"><input name="name" placeholder="성함을 입력해주세요" class="input-content svelte-1sf2rfx" value=""></div></div> <div class="row"><p class="input-title">비밀번호<span class="required svelte-1sf2rfx">*</span></p> <div class="input-wrap"><input name="password" placeholder="작성하신 방명록을 삭제할 때 사용됩니다." class="input-content svelte-1sf2rfx" value=""></div></div> <div class="row"><p class="input-title">방명록 내용<span class="required svelte-1sf2rfx">*</span></p> <div class="textarea-wrap svelte-1sf2rfx"><textarea name="content" placeholder="내용을 작성해주세요" class="input-content svelte-1sf2rfx"></textarea></div></div> <button type="submit" class="submit-button custom_button svelte-1sf2rfx" style="margin-top: 30px;">작성하기</button></form></div></div></div>');function IA(n,e){zt(e,!0);let t=ci(e,"container",3,"main"),i=En(!1);function s(N){N.key==="Escape"&&e.onClose()}async function r(N){N.preventDefault();const C=N.target,v=new FormData(C),w=Object.fromEntries(v.entries());console.log(N.type,N,{formEl:C,formData:v,formDataObj:w});try{rt(i,!0);const I=await e.insertData(w);console.log("insert data done.",I),C.reset(),I!==null&&e.onClose()}finally{rt(i,!1)}}var o=xA();Io("keydown",Zo,s,!1);var c=O(o),l=O(c);l.__click=[TA,e];var u=R(R(l,!0)),d=O(u),p=O(d);R(R(p,!0)),M(d);var m=R(R(d,!0)),g=O(m),x=O(g);R(O(x)),M(x);var E=R(R(x,!0));O(E),M(E),M(g);var k=R(R(g,!0)),S=O(k);R(O(S)),M(S);var D=R(R(S,!0));O(D),M(D),M(k);var F=R(R(k,!0)),V=O(F);R(O(V)),M(V);var L=R(R(V,!0));O(L),M(L),M(F),R(R(F,!0)),M(m),M(u),M(c),M(o),Et(()=>m.inert=me(i)),Ud(c,(N,C)=>$d(N,C),t),Io("submit",m,r,!1),Ee(n,o),Bt()}ys(["click"]);var CA=Fe('<div class="message-item ver4_guestbook_bg_white svelte-h0ugko"><div class="author-info svelte-h0ugko"><span>from.</span><span class="writer svelte-h0ugko"> </span></div> <div class="content-info svelte-h0ugko"><div class="ver4-guestbook-font-color message-content svelte-h0ugko"> </div> <div class="post-time svelte-h0ugko"> </div></div></div>'),kA=(n,e)=>rt(e,!0),AA=(n,e)=>rt(e,!0),RA=Fe('<div class="guestbook svelte-h0ugko"><header class="svelte-h0ugko"><h2 class="aos-init aos-animate svelte-h0ugko" data-aos="" data-aos-once="true">GUEST BOOK</h2> <p class="aos-init aos-animate svelte-h0ugko" data-aos="" data-aos-once="true">따뜻한 마음을<br>축하의 글로 남겨주세요.</p></header> <div class="messages-container aos-init aos-animate svelte-h0ugko" data-aos="" data-aos-once="true"><div></div></div> <div class="controls svelte-h0ugko"><button class="custom_button svelte-h0ugko">전체보기</button> <button class="custom_button svelte-h0ugko">작성하기</button></div></div> <!> <!>',1);function SA(n,e){zt(e,!0);let t=En(Ws([])),i=Ht(()=>me(t).slice().sort((L,N)=>-L.dateStr.localeCompare(N.dateStr)));Ar(async()=>{const[L,N]=await jd(e.weddingId);me(t).push(...L),console.log("🚀 ~ file: GuestBook.svelte:24 ~ onMount ~ guestbookLetters:",L)});let s=En(!1),r=En(!1),o="main";async function c(L){const N=mA.parse(L),C=await gA(e.weddingId,N);return jd(e.weddingId).then(([v])=>{rt(t,Ws(v))}),C}async function l(L){const N=await yA(e.weddingId,L);return rt(t,Ws(me(t).filter(({id:C})=>C!==L))),N}var u=RA(),d=To(u),p=O(d),m=O(p),g=R(R(m,!0));R(O(g)),dg(),M(g),M(p);var x=R(R(p,!0)),E=O(x);Js(E,73,()=>me(i).slice(0,3),er,(L,N,C)=>{let v=()=>Oe(Oe(N)).content,w=()=>Oe(Oe(N)).name,I=()=>Oe(Oe(N)).dateStr;var b=CA(),T=O(b),_=O(T),U=R(_),ie=O(U);M(U),M(T);var Re=R(R(T,!0)),Ie=O(Re),$e=O(Ie);M(Ie);var He=R(R(Ie,!0)),Tt=O(He);M(He),M(Re),M(b),Et(()=>{Ue(ie,w()),Ue($e,v()),Ue(Tt,I())}),Ee(L,b)}),M(E),M(x);var k=R(R(x,!0)),S=O(k);S.__click=[kA,r];var D=R(R(S,!0));D.__click=[AA,s],M(k),M(d);var F=R(R(d,!0));xo(F,()=>me(r),L=>{EA(L,{get letters(){return me(i)},container:o,onClose:()=>rt(r,!1),deleteLetter:l})});var V=R(R(F,!0));xo(V,()=>me(s),L=>{IA(L,{container:o,onClose:()=>rt(s,!1),insertData:c})}),Ee(n,u),Bt()}ys(["click"]);var PA=Fe('<div class="location svelte-1podymu"><header class="svelte-1podymu"><h2 data-aos="" data-aos-once="true" class="aos-init aos-animate svelte-1podymu">LOCATION</h2> <p data-aos="" data-aos-once="true" class="aos-init aos-animate svelte-1podymu">오시는 길</p></header> <div class="location-info svelte-1podymu"><p> </p> <p class="address svelte-1podymu"> </p></div> <div class="location-map svelte-1podymu"><div data-aos="" data-aos-once="true" data-aos-anchor-placement="top-bottom" class="aos-init aos-animate"><div class="map-container svelte-1podymu"><div id="map" tabindex="0" class="svelte-1podymu"></div></div></div></div> <div class="controls svelte-1podymu"><div data-aos="" data-aos-once="true" data-aos-anchor-placement="top-bottom" style="padding: 16px 0; border-bottom: " class="aos-init aos-animate"><div class="buttons-container svelte-1podymu"><a class="map-button svelte-1podymu" target="_blank"><img src="/cryucard/image/icon/navermapIcon.png" alt="네이버지도 아이콘" class="svelte-1podymu"><span class="svelte-1podymu">네이버지도</span></a> <a class="map-button svelte-1podymu" target="_blank"><img src="/cryucard/image/icon/kakaomapIcon.png" alt="카카오맵 아이콘" class="svelte-1podymu"><span class="svelte-1podymu">카카오맵</span></a> <a class="map-button svelte-1podymu" target="_blank"><img src="/cryucard/image/icon/tmapIcon.png" alt="티맵 아이콘" class="svelte-1podymu"><span class="svelte-1podymu">티맵</span></a></div></div></div></div>');function DA(n,e){zt(e,!0);let t=17,i;Ar(()=>{Pg(i,e.mapPos,{zoomLevel:t})});var s=PA(),r=O(s),o=O(r);R(R(o,!0)),M(r);var c=R(R(r,!0)),l=O(c),u=O(l);M(l);var d=R(R(l,!0)),p=O(d);M(d),M(c);var m=R(R(c,!0)),g=O(m),x=O(g),E=O(x);Co(E,w=>i=w,()=>i),M(x),M(g),M(m);var k=R(R(m,!0)),S=O(k),D=O(S),F=O(D),V=O(F);R(V),M(F);var L=R(R(F,!0)),N=O(L);R(N),M(L);var C=R(R(L,!0)),v=O(C);R(v),M(C),M(D),M(S),M(k),M(s),Et(()=>{Ue(u,e.location),Ue(p,e.locationAddress),yt(F,"href",e.mapLinks.naverMap),yt(L,"href",e.mapLinks.kakaoMap),yt(C,"href",e.mapLinks.tMap)}),Ee(n,s),Bt()}var MA=Ko(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300" style="
                        position: absolute;
                        left: calc(50% - 23px);
                        z-index: 10;
                        bottom: 0;
                      " xml:space="preserve" width="46" height="46" fill="#6d6d6d"><path class="flower1_svg__st0" fill="current" d="m115.1 91.1 1.6.18c1.87.22 3.76.44 5.49.44 1.76 0 3.33-.24 4.55-.93 3.6 7.33 5.95 15.62 7.06 24.85-.1-.08-.2-.16-.29-.24-6.3-5.06-13.19-8.62-20.46-10.59-8.41-2.28-17.2-2.3-25.45-.08-6.17 1.66-10.77 4.43-14.06 8.46-.89 1.08-1.16 2.66-.69 4.01.4 1.17 1.32 2.03 2.46 2.28 1.8.41 4.68 1.37 6.77 2.08 1.29.43 2.3.76 2.67.85 3.96.91 8.01 1.68 12.02 2.3 8.14 1.26 16.44 1.94 24.63 2.01.91.01 1.95.11 3.04.21 1.44.13 2.96.27 4.46.27 1.97 0 3.9-.23 5.59-1.04.01-.01.02-.02.04-.02.14 7.53-.44 15.59-1.76 24.16-.35 2.31-.76 4.62-1.19 6.93-2.27-3.5-6.78-5.98-10.17-7.82l-1.65-.92c-8.34-4.82-17.44-7.34-26.47-7.13-7.07.13-12.16 2.37-15.56 6.87-.56.75-1.23 1.79-1.36 3.19-.21 2.29 1.06 4.32 3.48 5.58 14.19 7.37 29.36 8.67 44.03 9.93.69.06 1.54.13 2.46.13 1.09 0 2.26-.1 3.33-.46-1.05 4.86-2.18 9.69-3.29 14.44-.66 2.81-1.32 5.63-1.97 8.48-1.28-1.06-2.63-2-3.86-2.85l-.55-.38c-13.04-9.01-29.52-7.65-41.97 3.43-.65.58-.95 1.44-.81 2.3.15.85.72 1.57 1.52 1.9 5.48 2.25 8.29 2.8 10.14 3.17.42.08.77.15 1.1.23 4.48 1.15 8.45 1.88 12.14 2.23l.5.05c2.02.2 4.96.48 8.13.48 4.08 0 8.51-.51 11.83-2.26-1.55 7.38-2.9 14.84-3.71 22.35-3.1 28.51 3 53.01 17.17 68.99.49.56 1.19.85 1.88.85.21 0 .41-.06.61-.11.13.02.25.07.38.07.14 0 .27-.01.41-.03a2.51 2.51 0 0 0 2.07-2.88c-1.39-8.5-.07-18.17 4.03-29.53 5.01-13.9 12.47-26.6 22.17-37.75 3.57-4.1 7.5-8.04 11.31-11.85 3.98-3.99 8.1-8.12 11.88-12.49 6.74-7.81 12.44-16.45 16.97-25.71.72.62 1.66 1.12 2.78 1.46 8.16 2.46 16.78 1.01 24.22-.54 8.57-1.79 17.16-4.02 25.54-6.63 5.75-1.79 11.77-3.89 16.57-8.11 1.89-1.66 2.69-3.42 2.4-5.25-.24-1.46-1.26-3.41-4.82-4.39-6.32-1.75-12.87-1.67-19.03-1.32-6.87.38-17.14 1.28-27 4.64-4.13 1.41-8.73 2.99-12.9 5.17.76-5.59-.08-11.79-.61-15.65-.99-7.3-2.73-14.48-5.15-21.35-.95-2.7-2.16-5.77-4.59-8.1-.34-.32-1.24-1.18-2.63-1.23-1.69-.12-3.31.89-3.93 3.69l-3.22 14.19c-.97 4.29-1.97 8.72-2.02 13.3 0 .2 0 20.28 6.93 25.9.98.8 2.07 1.29 3.21 1.49-4.38 9.07-9.92 17.54-16.52 25.18-3.66 4.23-7.71 8.29-11.63 12.22-3.87 3.87-7.86 7.87-11.54 12.1-10.11 11.62-17.89 24.85-23.11 39.34-3.32 9.2-4.92 17.42-4.85 24.93-13.8-19.72-13.55-45.62-11.98-60.04.27-2.45.6-4.89.98-7.34.72.22 1.49.3 2.2.3.88 0 1.69-.11 2.22-.18.32-.04.61-.08.85-.1 5.01-.29 10.05-1.07 14.97-2.3 9.92-2.48 19.43-6.79 28.27-12.81.5-.34 1.33-.91 1.87-1.96 1.37-2.66-.21-5.72-2.47-7.37-5.3-3.86-12.24-4.92-19.53-2.98-6.24 1.66-11.89 5.12-17.35 8.46-3 1.84-6.09 3.76-8.83 6.54 1.29-6.32 2.76-12.6 4.2-18.77.93-3.98 1.87-8.02 2.77-12.09 2.65 1.74 6.57 2.24 10.02 2.24 3.18 0 5.93-.41 6.89-.63 7.22-1.68 14.16-5.91 20-9.82 6.86-4.6 13.84-10.11 18.42-19.21.71-1.42 1.72-4.13.46-6.28-.83-1.39-2.19-1.73-2.7-1.86-6.33-1.58-13.27-1.72-21.82-.44-4.5.67-9.78 1.78-14.73 4.9-4.44 2.8-9.03 7.4-12.99 12.82.04-.25.09-.5.13-.74 1.9-12.35 2.31-23.7 1.29-34.03.69.15 1.4.24 2.13.24 3.1 0 6.53-1.19 9.4-2.18.8-.28 1.55-.54 2.24-.75 17.67-5.47 34.96-13.25 51.39-23.12.67-.4 2.06-1.22 2.68-2.95.47-1.32.34-2.74-.34-4.01-.83-1.53-2.51-2.8-4.28-3.23-4.3-1.04-8.52 0-12.25.91-9.67 2.37-19.68 4.83-29.11 9.62-7.54 3.83-17.29 10.24-22.62 19.56-1.51-9.38-4.33-17.82-8.43-25.3 1.01-3.18 4.06-6.27 7.04-9.26 2-2.01 4.06-4.08 5.61-6.27 5.42-7.71 9.67-16.38 13.41-24.02 6.23-12.71 11.53-25.17 8.09-37.83-.22-.8-.88-3.24-3.16-4.14-1.45-.56-2.84-.24-3.9.1-3.63 1.18-7.19 3.29-11.22 6.64-18.8 15.64-28.17 42.85-23.78 65.82-4.17-2.87-9.38-4.58-14.24-5.96a99.853 99.853 0 0 0-32.49-3.68c-7.37.39-16.88 2.35-20.29 9.51-.35.73-.32 1.59.07 2.3 1.27 2.25 59.6 11.96 60.16 12.02zm9.2 70.83c-14.18-1.22-28.85-2.48-42.15-9.38-.6-.31-.79-.6-.8-.68 0-.03.04-.19.36-.62 2.45-3.23 6.15-4.78 11.65-4.87 8.13-.14 16.32 2.09 23.86 6.45.51.3 1.11.62 1.77.98 2.93 1.6 7.38 4.01 8.66 6.63.41.83.49 1.28.56 1.36-.36.2-1.35.36-3.91.13zm86.78 3.79c-.03-.1-.05-.21-.09-.31 19.11-8.24 40-12.74 60.83-13.07l-60.74 13.38zm47.72-6.5c-8.22 2.56-16.66 4.75-25.07 6.51-6.53 1.36-14.01 2.61-20.79.87l58.58-12.91c-3.77 2.59-8.31 4.16-12.72 5.53zm-28.68-4.92c7.09-2.41 14.98-3.75 25.57-4.35 5.68-.31 11.72-.39 17.31 1.12-20.95.18-41.94 4.54-61.21 12.66.34-.36.67-.74.96-1.15 4.56-3.89 11.45-6.26 17.37-8.28zm-20.13-14.09c1.01 7.36 1.52 14.94-1.03 18.99-.52.47-1.02.96-1.49 1.47 1.27-12.8.77-25.63-1.49-38.27 1.8 5.65 3.15 11.53 4.01 17.81zm-11.62-.58c.03-4.05.98-8.21 1.9-12.25l2.83-12.33c.07.11.11.24.18.35 3.56 15.21 4.5 30.75 2.83 46.25-.33.14-.68.26-1.06.34-.63.14-1.08.01-1.6-.4-3.66-2.97-5.14-15.98-5.08-21.96zm-35.24-43.58c8.91-4.53 18.63-6.91 28.03-9.22 2.42-.59 4.89-1.2 7.26-1.2.89 0 1.76.09 2.61.29.49.12 1 .58 1.11.62-.05.07-.24.19-.56.38-16.09 9.66-33.02 17.28-50.31 22.63-.73.23-1.54.51-2.39.8-1.59.55-3.51 1.22-5.27 1.6 4.91-7.37 13.09-12.64 19.52-15.9zm7.41 98.08c-8.35 5.68-17.31 9.75-26.66 12.09a77.294 77.294 0 0 1-14.04 2.16c-.19.01-.45.05-.68.07 13.06-3.48 27.11-7.8 37.98-16.96.94.42 1.84.9 2.67 1.5.56.41.9 1.01.73 1.14zM130.3 204.8c2.37-2.53 5.2-4.26 8.2-6.1 5.16-3.15 10.49-6.41 16.02-7.89 1.95-.52 3.86-.78 5.68-.78 1.99 0 3.87.33 5.62.93-10.81 8.87-24.82 13.04-37.75 16.47.55-.72 1.26-1.6 2.23-2.63z"></path></svg><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 300 300" style="
                        position: absolute;
                        left: calc(50% - 24px);
                        bottom: -3px;
                      " xml:space="preserve" width="46" height="46" fill="#f4f2f0"><path class="flower_back_svg__st0" fill="current" d="M60.04 84.14C38.16 99.2 16.78 117.25 7.8 141.53c-12.35 33.37 2.71 72.32 30.63 95.6 27.92 23.27 66.27 32.54 103.33 32.38 48.95-.2 100.54-17.97 128.08-56.63 10.93-15.35 17.57-33.18 21.77-51.31 5.37-23.21 6.8-47.92-1.3-70.39C253.06-12.11 123.8 40.25 60.04 84.14z"></path></svg>`,1),OA=Fe(`<div class="invitation"><div style="padding: 60px 0"><div data-aos="" data-aos-once="true" class="aos-init aos-animate"><div><div style="
                      position: relative;
                      height: 50px;
                      margin-bottom: 20px;
                    "><!></div></div> <div style="line-height: 2rem; font-size: 0.9rem; margin-top: 0"><!></div></div> <div style="max-width: 300px; margin: 0 auto" data-aos="" data-aos-once="true" class="aos-init aos-animate"><div style="margin-top: 40px"><div><span style="font-size: 0.9rem"><span style="padding: 0 0.2rem"> </span><span>·</span><span style="padding: 0 0.2rem"> </span><span style="font-size: 0.8rem; opacity: 0.7"> <span style="
                            min-width: 2rem;
                            display: inline-block;
                            text-align: center;
                          ">아들</span></span></span> <span style="
                        font-size: 0.9rem;
                        min-width: 38px;
                        display: inline-block;
                        text-align: center;
                      "> </span></div> <div style="margin-top: 10px"><span style="font-size: 0.9rem"><span style="padding: 0 0.2rem"> </span><span>·</span><span style="padding: 0 0.2rem"> </span><span style="font-size: 0.8rem; opacity: 0.7"> <span style="
                            min-width: 2rem;
                            display: inline-block;
                            text-align: center;
                          ">딸</span></span></span> <span style="
                        font-size: 0.9rem;
                        min-width: 38px;
                        display: inline-block;
                        text-align: center;
                      "> </span></div></div></div> <div style="
                  border: 1px solid #e2e2e2;
                  color: #777;
                  margin-top: 30px;
                  height: 40px;
                  width: 150px;
                  margin-left: auto;
                  margin-right: auto;
                  display: flex;
                  justify-content: center;
                  align-items: center;
                  border-radius: 5px;
                  cursor: pointer;
                "><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" color="#777" style="color: #777" height="11" width="11" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"></path></svg><span style="
                    margin-left: 3px;
                    font-size: 0.8rem;
                    line-height: 0.8rem;
                    letter-spacing: 2px;
                    margin-right: 2px;
                  ">연락하기</span></div></div></div>`);function VA(n,e){zt(e,!0);const t=sn=>{var We=MA(),pe=To(We);O(pe),M(pe);var Ge=R(pe);O(Ge),M(Ge),Ee(sn,We)};var i=OA(),s=O(i),r=O(s),o=O(r),c=O(o),l=O(c);t(l),M(c),M(o);var u=R(R(o,!0)),d=O(u);bg(d,()=>e.invitationMessage.split(`
`).map(sn=>sn.trim()?`<p>${sn}</p>`:"<p><br></p>").join(" ")),M(u),M(r);var p=R(R(r,!0)),m=O(p),g=O(m),x=O(g),E=O(x),k=O(E);M(E);var S=R(E),D=R(S),F=O(D);M(D);var V=R(D),L=O(V);L.nodeValue="의 ",R(L),M(V),M(x);var N=R(R(x,!0)),C=O(N);M(N),M(g);var v=R(R(g,!0)),w=O(v),I=O(w),b=O(I);M(I);var T=R(I),_=R(T),U=O(_);M(_);var ie=R(_),Re=O(ie);Re.nodeValue="의 ",R(Re),M(ie),M(w);var Ie=R(R(w,!0)),$e=O(Ie);M(Ie),M(v),M(m),M(p);var He=R(R(p,!0)),Tt=O(He);O(Tt),M(Tt),R(Tt),M(He),M(s),M(i),Et(()=>{Ue(k,e.groomFather),Ue(F,e.groomMother),Ue(C,e.groom.shortName),Ue(b,e.brideFather),Ue(U,e.brideMother),Ue($e,e.bride.shortName)}),Ee(n,i),Bt()}var NA=Fe('<meta property="og:title"> <meta property="og:description"> <meta property="og:image"> <meta property="og:image:width" content="800"> <meta property="og:image:height" content="400">',1),LA=Fe('<!> <!> <div class="ver4_bg_white" style="padding: 0"></div> <!> <!> <!> <!>',1);function r2(n,e){zt(e,!0),Ar(()=>Og.init());let t="cryucard/6bKqy74jln2xfZI71X1c",i={fullName:"윤영광",shortName:"영광"},s={fullName:"곽정민",shortName:"정민"},r="윤봉선",o="주두리",c="곽유현",l="김근희",u={src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-94500ecd-41d5-4da1-9ac7-f1ff1ff7bf53.jpeg",width:1333,height:2e3},d=new Date(2024,2,9,12,0),p="웨스틴 조선 호텔 L층 그랜드볼룸",m="서울 중구 소공로 106",g=`햇살은 더없이 눈부시고
우리의 다정함은 채워져서
근사한 날을 맞게 되었습니다.

따스한 빛이 내려앉는 3월,
저희가 내딛는 첫걸음에 부디 오셔서
따뜻한 사랑으로 축복해 주십시오.`,x=[{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-941c85e2-b1bd-44dd-b14e-18b4dddc1ac9.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-f83a577d-f7db-4b46-81ea-0890c8c5f62b.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-2bf11b60-8d48-4201-a5c8-4967d5524f70.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-75c78ef0-80d4-44b6-8f4b-e71e2ef3ff85.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-84be23dc-df5b-4267-8416-4df2cc35cb1d.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-dedb6986-37ef-442f-af55-adace1c51f9e.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-1fa10b21-22dc-43d1-9489-6983385edb72.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-f88b99ee-7a13-499c-aaf8-a637c5e16b3e.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-08773b29-a5d8-4951-b5df-55507e13a326.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-0d263e12-f5a7-4068-98e1-88ebf1c78993.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-c9f1b816-3407-488e-9fd6-46f07f2ec3f0.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-ff085002-d28c-46a7-96ff-345df04a1652.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-67a05700-13a0-4e95-a3e6-d02e9392ad91.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-ca9af177-4c0e-4eb8-ad20-dfde11e7914a.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-73dc0bef-b78b-42b1-9f2d-a89f8e1ec80f.jpeg"},{src:"/cryucard/image/2024-03-09/6bKqy74jln2xfZI71X1c-c627e3ca-e6ff-4de6-b38d-6d10f5a97c9e.jpeg"}],E={lat:37.5644378,long:126.9800994},k={naverMap:"http://map.naver.com/index.nhn?enc=utf8&level=2&lng=126.9800994&lat=37.5644378&pinTitle=%EC%9B%A8%EC%8A%A4%ED%8B%B4%20%EC%A1%B0%EC%84%A0%20%ED%98%B8%ED%85%94&pinType=SITE",kakaoMap:"https://map.kakao.com/link/map/%EC%9B%A8%EC%8A%A4%ED%8B%B4%20%EC%A1%B0%EC%84%A0%20%ED%98%B8%ED%85%94,37.5644378,126.9800994",tMap:null},S=Ht(()=>d.getMinutes()>0);var D=LA();fg(b=>{var T=NA(),_=To(T),U=R(R(_,!0));Et(()=>yt(U,"content",$c(d,"MMMM do EEEE a h시"+(me(S)?" mm분":""),{locale:Dg})));var ie=R(R(U,!0)),Re=R(R(ie,!0)),Ie=R(R(Re,!0));Et(()=>{Zo.title=`${i.shortName??""} ❤️ ${s.shortName??""} 결혼합니다.`,yt(_,"content",`${i.shortName??""} ❤️ ${s.shortName??""} 결혼합니다.`),yt(ie,"content",u.src)}),Ee(b,T)});var F=To(D);Ng(F,{groom:i,bride:s,location:p,dateTime:d,introImage:u});var V=R(R(F,!0));VA(V,{groom:i,bride:s,groomFather:r,groomMother:o,brideFather:c,brideMother:l,invitationMessage:g});var L=R(R(V,!0)),N=R(R(L,!0));i1(N,{images:x});var C=R(R(N,!0));DA(C,{location:p,locationAddress:m,mapPos:E,mapLinks:k});var v=R(R(C,!0));SA(v,{weddingId:t});var w=R(v,!0);w.nodeValue="  ";var I=R(w);U0(I,{}),Ee(n,D),Bt()}export{r2 as component};
