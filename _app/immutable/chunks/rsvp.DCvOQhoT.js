import{d as i,c as y,g as S,T as u,s as C}from"./index.esm2017.jVYVdHNJ.js";import{z as t}from"./index.DXqQCM1T.js";import{g as T}from"./init_firebase.Cta6V5La.js";import{o as H}from"./utils.vkuU_gs0.js";import{n as v}from"./firebase_utils.uA8kCWMc.js";import{f as g}from"./modalPortal-action.q8WiRC-G.js";t.object({name:t.string(),side:t.union([t.literal("groom"),t.literal("bride")]),count:t.number(),dining:t.union([t.literal("true"),t.literal("false"),t.literal("tbd")])});const b="rsvp";async function w(e,o){if(!o)return[null,null];const m=T(),d=i(m,"wedding",v(e)),r=y(d,b),l=i(r,o),s=await S(l);return[p(s),s];function p(a){const c=a.data();if(!c)return null;const D=c.createdTimestamp.toDate(),R=g(D,"yyyy-M-d HH:mm"),f=c.updatedTimestamp.toDate(),h=g(f,"yyyy-M-d HH:mm");return{...H(c,"createdTimestamp","updatedTimestamp"),id:a.id,date:D,dateStr:R,updatedDate:f,updatedDateStr:h}}}async function O(e,o,m){const d=T(),[r]=await w(e,o),l=i(d,"wedding",v(e)),s=y(l,b);try{const n=u.now(),p=r?u.fromDate(r.date):u.now(),a=i(s,o);return await C(a,{...m,updatedTimestamp:n,createdTimestamp:p}),console.log("Document written with ID: ",a.id,a),await w(e,o)}catch(n){throw console.error("Error adding document: ",n),n}}export{w as loadRsvpSessionData,O as saveRsvpSessionData};
