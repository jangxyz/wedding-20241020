import{d as i,n as l,a as d,c as p,b as g,T as w,r as y,g as k}from"./firebase_utils.CFK9klH1.js";import{z as r}from"./index.DXqQCM1T.js";import{o as L}from"./utils.vkuU_gs0.js";import{f as T}from"./modalPortal-action.wbZHkdq-.js";r.object({likes:r.record(r.string(),r.any())});const m="photo_likes";async function C(a,t){const o=i(d,"wedding",l(a)),n=p(o,m),s=i(n,t),e=await k(s);return console.log("ðŸš€ ~ file: like_photo.ts:52 ~ loadPhotoLikes ~ snapshot:",e),[u(e),e]}async function _(a){const t=i(d,"wedding",l(a)),o=p(t,m),n=await g(o);return[n.docs.map(e=>u(e)),n]}async function E(a,t,o){const n=w.now();return await y(d,async s=>{const e=i(d,"wedding",l(a)),D=p(e,m),f=i(D,t);let h=await s.get(f),c={};h.exists()&&(c=h.data().likes??{}),c[o]?delete c[o]:c[o]=n,s.set(f,{likes:c,updatedTimestamp:n})}),await C(a,t)}function u(a){const t=a.data();if(!t)return null;const o=t.updatedTimestamp.toDate(),n=T(o,"yyyy-M-d HH:mm");return{...L(t,"createdTimestamp"),id:a.id,updatedDate:o,updatedDateStr:n}}export{_ as loadAllPhotoLikes,C as loadPhotoLikes,E as togglePhotoLike};
