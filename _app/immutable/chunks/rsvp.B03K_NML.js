import{d as i,n as y,a as g,c as T,g as h,T as p,s as S}from"./firebase_utils.CFK9klH1.js";import{z as t}from"./index.DXqQCM1T.js";import{o as C}from"./utils.vkuU_gs0.js";import{f}from"./modalPortal-action.q8WiRC-G.js";t.object({name:t.string(),side:t.union([t.literal("groom"),t.literal("bride")]),count:t.number(),dining:t.union([t.literal("true"),t.literal("false"),t.literal("tbd")])});const v="rsvp";async function w(e,a){if(!a)return[null,null];const m=i(g,"wedding",y(e)),r=T(m,v),d=i(r,a),c=await h(d);return[l(c),c];function l(o){const s=o.data();if(!s)return null;const u=s.createdTimestamp.toDate(),R=f(u,"yyyy-M-d HH:mm"),D=s.updatedTimestamp.toDate(),b=f(D,"yyyy-M-d HH:mm");return{...C(s,"createdTimestamp","updatedTimestamp"),id:o.id,date:u,dateStr:R,updatedDate:D,updatedDateStr:b}}}async function L(e,a,m){const[r]=await w(e,a),d=i(g,"wedding",y(e)),c=T(d,v);try{const n=p.now(),l=r?p.fromDate(r.date):p.now(),o=i(c,a);return await S(o,{...m,updatedTimestamp:n,createdTimestamp:l}),console.log("Document written with ID: ",o.id,o),await w(e,a)}catch(n){throw console.error("Error adding document: ",n),n}}export{w as loadRsvpSessionData,L as saveRsvpSessionData};
